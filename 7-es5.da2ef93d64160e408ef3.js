!function(){function o(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function i(o,i){for(var t=0;t<i.length;t++){var e=i[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function t(o,t,e){return t&&i(o.prototype,t),e&&i(o,e),o}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"8O9Z":function(i,e,n){"use strict";n.r(e),n.d(e,"NewPromotionModule",function(){return Yo});var c,r=n("SVse"),a=n("s7LF"),s=n("3sEA"),d=n("vpPe"),l=n("cp0P"),u=n("JX91"),p=n("lJxs"),h=n("8iJF"),b=n("Sp5M"),m=n("qA6C"),f=n("AytR"),g=n("8Y7J"),v=n("IheW"),P=((c=function(){function i(t){o(this,i),this.http=t}return t(i,[{key:"obtenerPromocion",value:function(o){return this.http.get(encodeURI("".concat(f.a.apiURL,"Promociones/").concat(o)))}},{key:"obtenerSucursales",value:function(){return this.http.get(encodeURI(f.a.apiURL+'Sucursales?filter={"where":{"deletedon":{"eq":null}}}'))}},{key:"obtenerFamilias",value:function(){return this.http.get(encodeURI(f.a.apiURL+'Familias?filter={"where":{"deletedon":{"eq":null}},"order":"sfamilia ASC"}'))}},{key:"obtenerTiposCondPago",value:function(){return this.http.get(encodeURI(f.a.apiURL+'TiposCondPago?filter={"where":{"deletedon":{"eq":null}}}'))}},{key:"actualizarPromocion",value:function(o){return this.http.put("".concat(f.a.apiURL,"Promociones/").concat(o.id),o)}},{key:"agregarPromocion",value:function(o){return this.http.post(f.a.apiURL+"Promociones",o)}}]),i}()).\u0275fac=function(o){return new(o||c)(g.bc(v.c))},c.\u0275prov=g.Nb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),E=n("iInd"),O=n("zHaW"),M=n("PDjf"),W=n("pMoy"),I=n("Dxy4"),T=n("Tj54"),k=n("Q2Ze"),D=n("VDRc"),C=n("ZTz/"),X=n("e6WT"),y=n("n1FK"),N=n("TN/R"),F=n("UhP/"),R=n("vrAh"),x=n("TSSN");function j(o,i){if(1&o&&(g.Xb(0,"div"),g.Sb(1,"img",31),g.Wb()),2&o){var t=g.jc();g.Eb(1),g.qc("src",t.formImagenPromocion,g.Fc)}}function S(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",null==t?null:t.sdescripcion," ")}}function L(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",t," ")}}function A(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",t," ")}}function w(o,i){if(1&o&&(g.Xb(0,"div"),g.Xb(1,"label"),g.Oc(2),g.Wb(),g.Wb()),2&o){var t=g.jc(2);g.Eb(2),g.Pc(t.editorCliente.srazonsocial)}}function U(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc(" ",null==t?null:t.srazonsocial," ")}}function Y(o,i){if(1&o&&(g.Xb(0,"section"),g.Xb(1,"mat-form-field",8),g.Sb(2,"input",33),g.kc(3,"translate"),g.Xb(4,"mat-autocomplete",34,35),g.Mc(6,U,2,2,"mat-option",10),g.kc(7,"async"),g.Wb(),g.Wb(),g.Wb()),2&o){var t=g.Ac(5),e=g.jc(2);g.Eb(2),g.qc("placeholder",g.lc(3,5,"NEWPROMOTION.CLIENT")),g.pc("formControl",e.editorCliente)("matAutocomplete",t),g.Eb(2),g.pc("displayWith",e.displayFnClientes),g.Eb(2),g.pc("ngForOf",g.lc(7,7,e.filteredClientes))}}function V(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",null==t?null:t.stipocliente," ")}}function Q(o,i){if(1&o){var t=g.Yb();g.Xb(0,"div"),g.Xb(1,"mat-form-field",8),g.Xb(2,"mat-label"),g.Oc(3),g.kc(4,"translate"),g.Wb(),g.Xb(5,"mat-select",9),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc(2).editorTipoCliente=o}),g.Mc(6,V,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb()}if(2&o){var e=g.jc(2);g.Eb(3),g.Pc(g.lc(4,3,"NEWPROMOTION.CLIENTTYPE")),g.Eb(2),g.pc("ngModel",e.editorTipoCliente),g.Eb(1),g.pc("ngForOf",e.listaTipoClientes)}}function q(o,i){if(1&o){var t=g.Yb();g.Xb(0,"div"),g.Xb(1,"section"),g.Xb(2,"mat-form-field",8),g.Xb(3,"mat-label"),g.Oc(4),g.kc(5,"translate"),g.Wb(),g.Xb(6,"mat-select",24),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc().dto0=o})("selectionChange",function(o){return g.Dc(t),g.jc().elegirTipoDto0Event(o.value)}),g.Mc(7,A,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb(),g.Mc(8,w,3,1,"div",1),g.Mc(9,Y,8,9,"section",1),g.Mc(10,Q,7,5,"div",1),g.Wb()}if(2&o){var e=g.jc();g.Eb(4),g.Pc(g.lc(5,6,"NEWPROMOTION.TYPE")),g.Eb(2),g.pc("ngModel",e.dto0),g.Eb(1),g.pc("ngForOf",e.tiposDto0),g.Eb(1),g.pc("ngIf",0==e.dto0id),g.Eb(1),g.pc("ngIf",0==e.dto0id),g.Eb(1),g.pc("ngIf",1==e.dto0id)}}function $(o,i){if(1&o){var t=g.Yb();g.Xb(0,"mat-checkbox",0),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc().checkAplicaSobreElPrecio=o}),g.Oc(1),g.kc(2,"translate"),g.Wb()}if(2&o){var e=g.jc();g.pc("ngModel",e.checkAplicaSobreElPrecio),g.Eb(1),g.Pc(g.lc(2,2,"NEWPROMOTION.APPLYONTHEPRICE"))}}function H(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",t," ")}}function B(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",t," ")}}function G(o,i){if(1&o){var t=g.Yb();g.Xb(0,"div"),g.Xb(1,"section"),g.Xb(2,"mat-form-field",8),g.Xb(3,"mat-label"),g.Oc(4),g.kc(5,"translate"),g.Wb(),g.Xb(6,"mat-select",24),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc().dto9=o})("selectionChange",function(o){return g.Dc(t),g.jc().elegirTipoDto9Event(o.value)}),g.Mc(7,B,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb(),g.Xb(8,"section"),g.Xb(9,"mat-form-field",11),g.Xb(10,"input",36),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc().dto9input=o}),g.kc(11,"translate"),g.Wb(),g.Wb(),g.Wb(),g.Wb()}if(2&o){var e=g.jc();g.Eb(4),g.Pc(g.lc(5,5,"NEWPROMOTION.TYPE")),g.Eb(2),g.pc("ngModel",e.dto9),g.Eb(1),g.pc("ngForOf",e.tiposDto9),g.Eb(3),g.qc("placeholder",g.lc(11,7,"NEWPROMOTION.EACH")),g.pc("ngModel",e.dto9input)}}function z(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",t," ")}}function _(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",t," ")}}function J(o,i){if(1&o){var t=g.Yb();g.Xb(0,"div"),g.Xb(1,"mat-form-field",8),g.Xb(2,"mat-label"),g.Oc(3),g.kc(4,"translate"),g.Wb(),g.Xb(5,"mat-select",24),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc(2).medioDto1=o})("selectionChange",function(o){return g.Dc(t),g.jc(2).elegirTipoMedioDto1Event(o.value)}),g.Mc(6,_,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb()}if(2&o){var e=g.jc(2);g.Eb(3),g.Pc(g.lc(4,3,"NEWPROMOTION.PAYMENTMETHOD")),g.Eb(2),g.pc("ngModel",e.medioDto1),g.Eb(1),g.pc("ngForOf",e.tiposMedioDePago)}}function K(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",null==t?null:t.sdescripcion," ")}}function Z(o,i){if(1&o){var t=g.Yb();g.Xb(0,"div"),g.Xb(1,"mat-form-field",8),g.Xb(2,"mat-label"),g.Oc(3),g.kc(4,"translate"),g.Wb(),g.Xb(5,"mat-select",9),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc(2).medioDto1a=o}),g.Mc(6,K,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb()}if(2&o){var e=g.jc(2);g.Eb(3),g.Pc(g.lc(4,3,"NEWPROMOTION.PAYMENTCONDITION")),g.Eb(2),g.pc("ngModel",e.medioDto1a),g.Eb(1),g.pc("ngForOf",e.listaTiposCondPago)}}function oo(o,i){if(1&o){var t=g.Yb();g.Xb(0,"div"),g.Xb(1,"section"),g.Xb(2,"mat-form-field",8),g.Xb(3,"mat-label"),g.Oc(4),g.kc(5,"translate"),g.Wb(),g.Xb(6,"mat-select",24),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc().dto1=o})("selectionChange",function(o){return g.Dc(t),g.jc().elegirTipoDto1Event(o.value)}),g.Mc(7,z,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb(),g.Mc(8,J,7,5,"div",1),g.Mc(9,Z,7,5,"div",1),g.Wb()}if(2&o){var e=g.jc();g.Eb(4),g.Pc(g.lc(5,5,"NEWPROMOTION.TYPE")),g.Eb(2),g.pc("ngModel",e.dto1),g.Eb(1),g.pc("ngForOf",e.tiposDto1),g.Eb(1),g.pc("ngIf",0==e.dto1id),g.Eb(1),g.pc("ngIf",1==e.dto1id)}}function io(o,i){if(1&o){var t=g.Yb();g.Xb(0,"section"),g.Xb(1,"mat-form-field",11),g.Xb(2,"input",37),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc().dto2input=o}),g.Wb(),g.Wb(),g.Wb()}if(2&o){var e=g.jc();g.Eb(2),g.pc("ngModel",e.dto2input)}}function to(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",t," ")}}function eo(o,i){if(1&o&&(g.Xb(0,"div"),g.Xb(1,"label"),g.Oc(2),g.Wb(),g.Wb()),2&o){var t=g.jc(2);g.Eb(2),g.Pc(t.editorProducto.snombre)}}function no(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc(" ",null==t?null:t.snombre," ")}}function co(o,i){if(1&o&&(g.Xb(0,"section"),g.Xb(1,"mat-form-field",8),g.Sb(2,"input",33),g.kc(3,"translate"),g.Xb(4,"mat-autocomplete",34,35),g.Mc(6,no,2,2,"mat-option",10),g.kc(7,"async"),g.Wb(),g.Wb(),g.Wb()),2&o){var t=g.Ac(5),e=g.jc(2);g.Eb(2),g.qc("placeholder",g.lc(3,5,"NEWPROMOTION.PRODUCT")),g.pc("formControl",e.editorProducto)("matAutocomplete",t),g.Eb(2),g.pc("displayWith",e.displayFnProductos),g.Eb(2),g.pc("ngForOf",g.lc(7,7,e.filteredProductos))}}function ro(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",null==t?null:t.sfamilia," ")}}function ao(o,i){if(1&o){var t=g.Yb();g.Xb(0,"div"),g.Xb(1,"mat-form-field",8),g.Xb(2,"mat-label"),g.Oc(3),g.kc(4,"translate"),g.Wb(),g.Xb(5,"mat-select",9),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc(2).editorFamilia=o}),g.Mc(6,ro,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb()}if(2&o){var e=g.jc(2);g.Eb(3),g.Pc(g.lc(4,3,"NEWPROMOTION.FAMILY")),g.Eb(2),g.pc("ngModel",e.editorFamilia),g.Eb(1),g.pc("ngForOf",e.listaFamilias)}}function so(o,i){if(1&o){var t=g.Yb();g.Xb(0,"div"),g.Xb(1,"section"),g.Xb(2,"mat-form-field",8),g.Xb(3,"mat-label"),g.Oc(4),g.kc(5,"translate"),g.Wb(),g.Xb(6,"mat-select",24),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc().dto3=o})("selectionChange",function(o){return g.Dc(t),g.jc().elegirTipoDto3Event(o.value)}),g.Mc(7,to,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb(),g.Mc(8,eo,3,1,"div",1),g.Mc(9,co,8,9,"section",1),g.Mc(10,ao,7,5,"div",1),g.Wb()}if(2&o){var e=g.jc();g.Eb(4),g.Pc(g.lc(5,6,"NEWPROMOTION.TYPE")),g.Eb(2),g.pc("ngModel",e.dto3),g.Eb(1),g.pc("ngForOf",e.tiposDto3),g.Eb(1),g.pc("ngIf",0==e.dto3id||2==e.dto3id),g.Eb(1),g.pc("ngIf",0==e.dto3id||2==e.dto3id),g.Eb(1),g.pc("ngIf",1==e.dto3id)}}function lo(o,i){if(1&o){var t=g.Yb();g.Xb(0,"mat-form-field",11),g.Xb(1,"input",39),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc(2).dto4input=o}),g.Wb(),g.Wb()}if(2&o){var e=g.jc(2);g.Eb(1),g.pc("ngModel",e.dto4input)("placeholder",e.placeholderText())}}function uo(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",t," ")}}function po(o,i){if(1&o&&(g.Xb(0,"div"),g.Xb(1,"label"),g.Oc(2),g.Wb(),g.Wb()),2&o){var t=g.jc(3);g.Eb(2),g.Pc(t.editorProducto.snombre)}}function ho(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc(" ",null==t?null:t.snombre," ")}}function bo(o,i){if(1&o&&(g.Xb(0,"section"),g.Xb(1,"mat-form-field",8),g.Sb(2,"input",33),g.kc(3,"translate"),g.Xb(4,"mat-autocomplete",34,35),g.Mc(6,ho,2,2,"mat-option",10),g.kc(7,"async"),g.Wb(),g.Wb(),g.Wb()),2&o){var t=g.Ac(5),e=g.jc(3);g.Eb(2),g.qc("placeholder",g.lc(3,5,"NEWPROMOTION.PRODUCT")),g.pc("formControl",e.editorProducto)("matAutocomplete",t),g.Eb(2),g.pc("displayWith",e.displayFnProductos),g.Eb(2),g.pc("ngForOf",g.lc(7,7,e.filteredProductos))}}function mo(o,i){if(1&o&&(g.Xb(0,"div"),g.Mc(1,po,3,1,"div",1),g.Mc(2,bo,8,9,"section",1),g.Wb()),2&o){var t=g.jc(2);g.Eb(1),g.pc("ngIf",0==t.dto4id||2==t.dto4id),g.Eb(1),g.pc("ngIf",0==t.dto4id||2==t.dto4id)}}function fo(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",null==t?null:t.sfamilia," ")}}function go(o,i){if(1&o){var t=g.Yb();g.Xb(0,"div"),g.Xb(1,"mat-form-field",8),g.Xb(2,"mat-label"),g.Oc(3),g.kc(4,"translate"),g.Wb(),g.Xb(5,"mat-select",9),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc(2).editorFamilia=o}),g.Mc(6,fo,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb()}if(2&o){var e=g.jc(2);g.Eb(3),g.Pc(g.lc(4,3,"NEWPROMOTION.FAMILY")),g.Eb(2),g.pc("ngModel",e.editorFamilia),g.Eb(1),g.pc("ngForOf",e.listaFamilias)}}function vo(o,i){if(1&o){var t=g.Yb();g.Xb(0,"div"),g.Mc(1,lo,2,2,"mat-form-field",38),g.Xb(2,"section"),g.Xb(3,"mat-form-field",8),g.Xb(4,"mat-label"),g.Oc(5),g.kc(6,"translate"),g.Wb(),g.Xb(7,"mat-select",24),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc().dto4=o})("selectionChange",function(o){return g.Dc(t),g.jc().elegirTipoDto4Event(o.value)}),g.Mc(8,uo,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb(),g.Mc(9,mo,3,2,"div",1),g.Mc(10,go,7,5,"div",1),g.Wb()}if(2&o){var e=g.jc();g.Eb(1),g.pc("ngIf",4==e.editorPromocionIndex||6==e.editorPromocionIndex||8==e.editorPromocionIndex),g.Eb(4),g.Pc(g.lc(6,6,"NEWPROMOTION.TYPE")),g.Eb(2),g.pc("ngModel",e.dto4),g.Eb(1),g.pc("ngForOf",e.tiposDto4),g.Eb(1),g.pc("ngIf",8!=e.editorPromocionIndex),g.Eb(1),g.pc("ngIf",1==e.dto4id)}}function Po(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc(" ",null==t?null:t.snombre," ")}}function Eo(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc(" ",null==t?null:t.snombre," ")}}function Oo(o,i){if(1&o&&(g.Xb(0,"section"),g.Xb(1,"mat-form-field",8),g.Sb(2,"input",33),g.kc(3,"translate"),g.Xb(4,"mat-autocomplete",34,35),g.Mc(6,Eo,2,2,"mat-option",10),g.kc(7,"async"),g.Wb(),g.Wb(),g.Wb()),2&o){var t=g.Ac(5),e=g.jc(2);g.Eb(2),g.qc("placeholder",g.lc(3,5,"NEWPROMOTION.PRODUCT")),g.pc("formControl",e.editorProducto1)("matAutocomplete",t),g.Eb(2),g.pc("displayWith",e.displayFnProductos),g.Eb(2),g.pc("ngForOf",g.lc(7,7,e.filteredProductos1))}}function Mo(o,i){if(1&o){var t=g.Yb();g.Xb(0,"div"),g.Xb(1,"mat-form-field",11),g.Xb(2,"input",40),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc().dto5input1=o}),g.kc(3,"translate"),g.Wb(),g.Wb(),g.Xb(4,"div"),g.Xb(5,"label"),g.Oc(6),g.Wb(),g.Wb(),g.Xb(7,"section"),g.Xb(8,"mat-form-field",8),g.Sb(9,"input",33),g.kc(10,"translate"),g.Xb(11,"mat-autocomplete",34,35),g.Mc(13,Po,2,2,"mat-option",10),g.kc(14,"async"),g.Wb(),g.Wb(),g.Wb(),g.Xb(15,"mat-form-field",11),g.Xb(16,"input",40),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc().dto5input2=o}),g.kc(17,"translate"),g.Wb(),g.Wb(),g.Xb(18,"div"),g.Xb(19,"label"),g.Oc(20),g.Wb(),g.Wb(),g.Mc(21,Oo,8,9,"section",1),g.Wb()}if(2&o){var e=g.Ac(12),n=g.jc();g.Eb(2),g.qc("placeholder",g.lc(3,12,"NEWPROMOTION.EACH")),g.pc("ngModel",n.dto5input1),g.Eb(4),g.Pc(n.editorProducto.snombre),g.Eb(3),g.qc("placeholder",g.lc(10,14,"NEWPROMOTION.PRODUCT")),g.pc("formControl",n.editorProducto)("matAutocomplete",e),g.Eb(2),g.pc("displayWith",n.displayFnProductos),g.Eb(2),g.pc("ngForOf",g.lc(14,16,n.filteredProductos)),g.Eb(3),g.qc("placeholder",g.lc(17,18,"NEWPROMOTION.EACH")),g.pc("ngModel",n.dto5input2),g.Eb(4),g.Pc(n.editorProducto1.snombre),g.Eb(1),g.pc("ngIf",0==n.dto0id)}}function Wo(o,i){if(1&o){var t=g.Yb();g.Xb(0,"section"),g.Xb(1,"mat-form-field",11),g.Xb(2,"input",41),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc().dto5input3=o}),g.Wb(),g.Wb(),g.Wb()}if(2&o){var e=g.jc();g.Eb(2),g.pc("ngModel",e.dto5input3)}}function Io(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",t," ")}}function To(o,i){if(1&o&&(g.Xb(0,"mat-option",32),g.Oc(1),g.Wb()),2&o){var t=i.$implicit;g.pc("value",t),g.Eb(1),g.Qc("",t," ")}}function ko(o,i){if(1&o){var t=g.Yb();g.Xb(0,"section"),g.Xb(1,"mat-form-field",8),g.Xb(2,"mat-label"),g.Oc(3),g.kc(4,"translate"),g.Wb(),g.Xb(5,"mat-select",24),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc(2).porcentajemonto=o})("selectionChange",function(o){return g.Dc(t),g.jc(2).elegirTipoPorcentajeMontoEvent(o.value)}),g.Mc(6,To,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb()}if(2&o){var e=g.jc(2);g.Eb(3),g.Pc(g.lc(4,3,"PERCENTAGE/AMOUNT")),g.Eb(2),g.pc("ngModel",e.porcentajemonto),g.Eb(1),g.pc("ngForOf",e.tiposPorcentajeMonto)}}function Do(o,i){if(1&o){var t=g.Yb();g.Xb(0,"div"),g.Xb(1,"section"),g.Xb(2,"mat-form-field",8),g.Xb(3,"mat-label"),g.Oc(4),g.kc(5,"translate"),g.Wb(),g.Xb(6,"mat-select",24),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc().dtorecargo=o})("selectionChange",function(o){return g.Dc(t),g.jc().elegirTipoDtoRecargoEvent(o.value)}),g.Mc(7,Io,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb(),g.Mc(8,ko,7,5,"section",1),g.Xb(9,"mat-form-field",11),g.Xb(10,"input",40),g.fc("ngModelChange",function(o){return g.Dc(t),g.jc().dtorecargoinput=o}),g.kc(11,"translate"),g.Wb(),g.Wb(),g.Wb()}if(2&o){var e=g.jc();g.Eb(4),g.Pc(g.lc(5,6,"DISCOUNT/SURCHARGE")),g.Eb(2),g.pc("ngModel",e.dtorecargo),g.Eb(1),g.pc("ngForOf",e.tiposDtoRecargo),g.Eb(1),g.pc("ngIf",3==e.editorPromocionIndex||6==e.editorPromocionIndex||7==e.editorPromocionIndex||9==e.editorPromocionIndex),g.Eb(2),g.qc("placeholder",g.lc(11,8,"NEWPROMOTION.AMOUNT")),g.pc("ngModel",e.dtorecargoinput)}}var Co,Xo,yo=function(){return["/products/promotions/"]},No=[{path:"",component:(Co=function(){function i(t,e,n,c,r,s,d,l,u){o(this,i),this.servicioProductos=t,this.servicioUUID=e,this.route=n,this.servicioNuevaPromocion=c,this.servicioEmpresas=r,this.servicioClientes=s,this.loader=d,this.snack=l,this.router=u,this.formInicio=new a.e,this.formFin=new a.e,this.listaPreciosSelecIndex=0,this.promocionSelec=0,this.editorCliente=new a.e(""),this.editorProducto=new a.e(""),this.editorProducto1=new a.e(""),this.formImagenPromocion="",this.mostrarEditor=!1,this.modoEdicion=!1,this.fileName="",this.empresas=[],this.listadeprecios=[],this.listaPreciosSelecIndex=0,this.checkAplicaSobreElPrecio="F",this.listaClientes=[],this.listaTipoClientes=[],this.promociones=[],this.promocionSelec=0,this.tiposPromociones=["General - Descuento por cliente","General - Descuento por medio de pago","General - Descuento por monto","Por Producto - Descuento por Producto","Por Producto - Promocion AxB","Por Producto - Promocion A + B","Por Producto - Descuento variable por cantidad","Por Producto - Descuento fijo","Por Producto - Promocion AxB mas barato","Global - Cantidad / Bulto"],this.tiposDto0=["Cliente","Tipos de cliente"],this.tiposDto1=["Medio de pago"],this.tiposDto3=["Producto","Familia de producto","Bulto"],this.tiposDto4=this.tiposDto3,this.tiposDtoRecargo=["Descuento","Recargo"],this.tiposPorcentajeMonto=["%","$"],this.tiposMedioDePago=["Efectivo"],this.tiposDto9=["Unidades","Bulto"]}return t(i,[{key:"fileExist",value:function(o){var i=o.target.files[0];i&&(this.fileName=i.name)}},{key:"placeholderText",value:function(){switch(this.editorPromocionIndex){case 4:case 6:return"Cada";case 8:return"Llevando"}}},{key:"_filterClientes",value:function(o){if("string"==typeof o){var i=o.toLowerCase();return this.listaClientes.filter(function(o){return o.srazonsocial.toLowerCase().includes(i)})}return[]}},{key:"displayFnClientes",value:function(o){return o&&o.srazonsocial?o.srazonsocial:""}},{key:"_filterProductos",value:function(o){if("string"==typeof o){var i=o.toLowerCase();return this.listaProductos.filter(function(o){return o.snombre.toLowerCase().includes(i)})}return[]}},{key:"displayFnProductos",value:function(o){return o&&o.snombre?o.snombre:""}},{key:"ngOnInit",value:function(){var o=this;this.filteredClientes=this.editorCliente.valueChanges.pipe(Object(u.a)(""),Object(p.a)(function(i){return o._filterClientes(i)})),this.filteredProductos=this.editorProducto.valueChanges.pipe(Object(u.a)(""),Object(p.a)(function(i){return o._filterProductos(i)})),this.filteredProductos1=this.editorProducto1.valueChanges.pipe(Object(u.a)(""),Object(p.a)(function(i){return o._filterProductos(i)}));var i=new Date;i.setHours(0,0,0,0);var t=new Date;t.setDate(1),t.setMonth(0),t.setFullYear(2050),t.setHours(23,59,59,999),this.formInicio.setValue(i),this.formFin.setValue(t),this.loader.open(),this.servicioProductos.traerProductos("",function(){o.listaProductos=o.servicioProductos.listaProductos,Object(l.a)([o.servicioEmpresas.obtenerEmpresas(),o.servicioNuevaPromocion.obtenerSucursales(),o.servicioClientes.traerClientes(),o.servicioClientes.obtenerTiposClientes(),o.servicioNuevaPromocion.obtenerFamilias(),o.servicioNuevaPromocion.obtenerTiposCondPago()]).subscribe(function(i){o.empresas=i[0],o.listadeprecios=["Todas"];for(var t=parseInt(o.empresas[0].icantidadlistasdeprecios),e=1;e<=t;e++)o.listadeprecios.push("Lista "+e);o.listaSucursales=[{idsucursal:-1,sdescripcion:"Todas"}],o.listaSucursales=o.listaSucursales.concat(i[1]),o.listaClientes=i[2],o.listaTipoClientes=i[3],o.listaFamilias=i[4],o.listaTiposCondPago=i[5],o.loader.close();var n=o.route.snapshot.paramMap.get("id");n?o.servicioNuevaPromocion.obtenerPromocion(n).subscribe(function(i){o.editarPromocion(i)}):(o.nuevaPromocion(),o.elegirTipoPromocion(0))})})}},{key:"enviarImagenPromocion",value:function(){var o=this,i=new XMLHttpRequest;i.open("POST","https://api.posberry.com/api/aws/upload"),i.onload=function(i){var t=JSON.parse(i.target.response).cdnGoogle.replace("__WIDTH__","500");o.formImagenPromocion=t,o.formGuardar()};var t=new FormData(document.getElementById("myFormPromocion"));i.send(t)}},{key:"elegirListadoDePrecios",value:function(o){this.listaPreciosSelecIndex=o,this.listaPreciosValue=this.listadeprecios[o]}},{key:"elegirListadoDePreciosEvent",value:function(o){this.elegirListadoDePrecios(this.listadeprecios.indexOf(o))}},{key:"puede_editar",value:function(){return!0}},{key:"puede_agregar",value:function(){return!0}},{key:"elegirTipoPromocion",value:function(o){this.promocionSelec=o,this.formPromocion=this.tiposPromociones[o],this.cambiarOpciones()}},{key:"elegirTipoDto0",value:function(o){this.dto0id=o,this.dto0=this.tiposDto0[o]}},{key:"elegirTipoDto0Event",value:function(o){this.elegirTipoDto0(this.tiposDto0.indexOf(o))}},{key:"elegirTipoDto1",value:function(o){this.dto1id=o,this.dto1=this.tiposDto1[o]}},{key:"elegirTipoDto1Event",value:function(o){this.elegirTipoDto1(this.tiposDto1.indexOf(o))}},{key:"elegirTipoDto3",value:function(o){this.dto3id=o,this.dto3=this.tiposDto3[o]}},{key:"elegirTipoDto3Event",value:function(o){this.elegirTipoDto3(this.tiposDto3.indexOf(o))}},{key:"elegirTipoDto4",value:function(o){this.dto4id=o,this.dto4=this.tiposDto4[o]}},{key:"elegirTipoDto4Event",value:function(o){this.elegirTipoDto4(this.tiposDto4.indexOf(o))}},{key:"elegirTipoDto9",value:function(o){2==o&&(o=1),this.dto9id=o,this.dto9=this.tiposDto9[o]}},{key:"elegirTipoDto9Event",value:function(o){this.elegirTipoDto9(this.tiposDto9.indexOf(o))}},{key:"elegirTipoDtoRecargo",value:function(o){this.dtorecargoid=o,this.dtorecargo=this.tiposDtoRecargo[o]}},{key:"elegirTipoDtoRecargoEvent",value:function(o){this.elegirTipoDtoRecargo(this.tiposDtoRecargo.indexOf(o))}},{key:"elegirTipoPorcentajeMonto",value:function(o){this.porcentajemontoid=o,this.porcentajemonto=this.tiposPorcentajeMonto[o]}},{key:"elegirTipoPorcentajeMontoEvent",value:function(o){this.elegirTipoPorcentajeMonto(this.tiposPorcentajeMonto.indexOf(o))}},{key:"cambiarOpciones",value:function(){this.promocionesFiltro=[];for(var o=0;o<this.promociones.length;o++)this.mostrarItem(this.promociones[o])&&this.promocionesFiltro.push(this.promociones[o])}},{key:"nuevaPromocion",value:function(){this.mostrarEditor=!0,this.modoEdicion=!1,this.promocion={bactivo:"T",itipo:0,blunes:"T",bmartes:"T",bmiercoles:"T",bjueves:"T",bviernes:"T",bsabado:"T",bdomingo:"T",idsucursal:-1,fvigenciadesde:(new Date).toISOString(),fvigenciahasta:new Date(2050,11,31,23,59,59).toISOString(),bonif1idref:null,bonif1itiporef:0,bonif1rcantidad:0,bonif1rmonto:0,bonif1rporcentaje:0,cond1idref:null,cond1itiporef:0,cond1rcantidad:0,cond1rcantidadhasta:0,cond1rmonto:0,cond1rmontohasta:0,cond2idref:null,cond2itiporef:0,cond2rcantidad:0,cond2rcantidadhasta:0,cond2rmonto:0,cond2rmontohasta:0,id:this.servicioUUID.generateUUID(),idempresa:"",sdescripcion:"",sleyendaticket:"",ilistadeprecios:0,baplicasobreelprecio:"F",surlimage1:""},this.asignarValores(this.promocion)}},{key:"editarPromocion",value:function(o){this.promocion={},Object.assign(this.promocion,o),this.mostrarEditor=!0,this.asignarValores(this.promocion),this.modoEdicion=!0}},{key:"asignarValores",value:function(o){this.checkActiva="T"==o.bactivo,this.descripcion=o.sdescripcion,this.checkLunes="T"==o.blunes,this.checkMartes="T"==o.bmartes,this.checkMiercoles="T"==o.bmiercoles,this.checkJueves="T"==o.bjueves,this.checkViernes="T"==o.bviernes,this.checkSabado="T"==o.bsabado,this.checkDomingo="T"==o.bdomingo,this.leyendaTicket=o.sleyendaticket,this.checkAplicaSobreElPrecio="T"==o.baplicasobreelprecio,this.elegirListadoDePrecios(parseInt(o.ilistadeprecios?o.ilistadeprecios:0)),this.elegirTipoPromocionEditor(o.itipo);var i=new Date(o.fvigenciadesde);this.formInicio.setValue(i);var t=new Date(o.fvigenciahasta);switch(this.formFin.setValue(t),this.sucursalSelect=this.listaSucursales.find(function(i){return i.idsucursal==o.idsucursal}),this.sucursalSelect||(this.sucursalSelect=this.listaSucursales[0]),this.formImagenPromocion=o.surlimage1,this.dto5input3=o.bonif1rmonto?o.bonif1rmonto:o.bonif1rcantidad,this.dtorecargoinput=o.bonif1rporcentaje,this.elegirTipoPorcentajeMonto(0),0==this.dtorecargoinput&&0!=o.bonif1rmonto&&(this.dtorecargoinput=o.bonif1rmonto,this.elegirTipoPorcentajeMonto(1)),o.cond1itiporef){case 0:o.cond1itiporef=0;break;case 1:o.cond1itiporef=1;break;case 2:o.cond1itiporef=0;break;case 3:o.cond1itiporef=1;break;case 4:o.cond1itiporef=0;break;case 5:o.cond1itiporef=1;break;case 6:o.cond1itiporef=2}this.elegirTipoDto0(o.cond1itiporef),this.elegirTipoDto1(o.bonif1itiporef),this.elegirTipoDto3(o.cond1itiporef),this.elegirTipoDto4(o.cond1itiporef),this.elegirTipoDto9(o.cond1itiporef),this.dto4input=o.cond1rcantidad,this.dto5input1=o.cond1rcantidad,this.dto9input=o.cond1rcantidad,this.dto2input=o.cond1rmonto,this.dto5input2=o.cond2rcantidad,this.elegirTipoMedioDto1(0),this.elegirTipoMedioDto1a(0),0==this.editorPromocionIndex&&(0==this.dto0id?(this.elegirTipoClienteID(""),this.elegirClienteID(o.bonif1idref)):(this.elegirClienteID(""),this.elegirTipoClienteID(o.bonif1idref))),1==this.editorPromocionIndex&&(this.elegirTipoMedioDto1(o.cond1itiporef),this.elegirTipoMedioDto1aID(o.bonif1idref)),this.dtorecargoinput>=0?this.elegirTipoDtoRecargo(0):(this.elegirTipoDtoRecargo(1),this.dtorecargoinput=-this.dtorecargoinput),3==this.editorPromocionIndex&&(0==this.dto3id?(this.elegirFamiliaID(""),this.elegirProductoID(o.bonif1idref)):(this.elegirFamiliaID(o.bonif1idref),this.elegirProductoID(""))),4!=this.editorPromocionIndex&&6!=this.editorPromocionIndex&&7!=this.editorPromocionIndex&&8!=this.editorPromocionIndex||(0==this.dto4id||2==this.dto4id?(this.elegirFamiliaID(""),this.elegirProductoID(o.bonif1idref)):(this.elegirFamiliaID(o.bonif1idref),this.elegirProductoID(""))),5==this.editorPromocionIndex&&(this.elegirProductoID(o.bonif1idref),this.elegirProducto1ID(o.cond2idref)),this.editorFamilia||(this.editorFamilia=this.listaFamilias[0])}},{key:"popup1",value:function(){this.popup1Opened=!0}},{key:"popup2",value:function(){this.popup2Opened=!0}},{key:"formatoFecha",value:function(o){var i=new Date(o);return i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear()}},{key:"elegirTipoPromocionEditor",value:function(o){this.editorPromocionIndex=o,this.editorPromocion=this.tiposPromociones[o]}},{key:"elegirTipoPromocionEditorEvent",value:function(o){this.elegirTipoPromocionEditor(this.tiposPromociones.indexOf(o))}},{key:"elegirClienteID",value:function(o){this.editorCliente.setValue(this.listaClientes[0]);for(var i=0;i<this.listaClientes.length;i++)if(this.listaClientes[i].id==o)return this.editorCliente.setValue(this.listaClientes[i]),0}},{key:"elegirTipoCliente",value:function(o){this.editorTipoCliente=this.listaTipoClientes[o]}},{key:"elegirTipoClienteID",value:function(o){this.editorTipoCliente=this.listaTipoClientes[0];for(var i=0;i<this.listaTipoClientes.length;i++)if(this.listaTipoClientes[i].id==o)return this.editorTipoCliente=this.listaTipoClientes[i],0}},{key:"elegirFamilia",value:function(o){this.editorFamilia=this.listaFamilias[o]}},{key:"elegirFamiliaID",value:function(o){this.editorFamilia=this.listaFamilias[0];for(var i=0;i<this.listaFamilias.length;i++)if(this.listaFamilias[i].id==o)return this.editorFamilia=this.listaFamilias[i],0}},{key:"elegirProductoID",value:function(o){this.editorProducto.setValue(this.listaProductos[0]);for(var i=0;i<this.listaProductos.length;i++)if(this.listaProductos[i].id==o)return this.editorProducto.setValue(this.listaProductos[i]),0}},{key:"elegirProducto1ID",value:function(o){this.editorProducto1.setValue(this.listaProductos[0]);for(var i=0;i<this.listaProductos.length;i++)if(this.listaProductos[i].id==o)return this.editorProducto1.setValue(this.listaProductos[i]),0}},{key:"elegirTipoMedioDto1",value:function(o){this.medioDto1id=o,this.medioDto1=this.tiposMedioDePago[o]}},{key:"elegirTipoMedioDto1Event",value:function(o){this.elegirTipoMedioDto1(this.tiposMedioDePago.indexOf(o))}},{key:"elegirTipoMedioDto1a",value:function(o){this.medioDto1a=this.listaTiposCondPago[o]}},{key:"elegirTipoMedioDto1aID",value:function(o){this.medioDto1a=this.listaTiposCondPago[0];for(var i=0;i<this.listaTiposCondPago.length;i++)if(this.listaTiposCondPago[i].id==o)return this.medioDto1a=this.listaTiposCondPago[i],0}},{key:"formCancelar",value:function(){this.mostrarEditor=!1}},{key:"puede_eliminar",value:function(){return this.modoEdicion}},{key:"formGuardar",value:function(){var o=this;this.promocion.surlimage1=this.formImagenPromocion,this.promocion.bactivo=this.checkActiva?"T":"F",this.promocion.sdescripcion=this.descripcion,this.promocion.blunes=this.checkLunes?"T":"F",this.promocion.bmartes=this.checkMartes?"T":"F",this.promocion.bmiercoles=this.checkMiercoles?"T":"F",this.promocion.bjueves=this.checkJueves?"T":"F",this.promocion.bviernes=this.checkViernes?"T":"F",this.promocion.bsabado=this.checkSabado?"T":"F",this.promocion.bdomingo=this.checkDomingo?"T":"F",this.promocion.sleyendaticket=this.leyendaTicket,this.promocion.itipo=this.editorPromocionIndex;var i=this.formInicio.value;i.setHours(0,0,0,0);var t=this.formFin.value;t.setHours(23,59,59,999),this.promocion.fvigenciadesde=i.toISOString(),this.promocion.fvigenciahasta=t.toISOString(),this.promocion.idsucursal=parseInt(this.sucursalSelect.idsucursal),this.promocion.baplicasobreelprecio=4!=this.editorPromocionIndex&&8!=this.editorPromocionIndex&&this.checkAplicaSobreElPrecio?"T":"F",this.promocion.ilistadeprecios=this.listaPreciosSelecIndex,this.promocion.bonif1rporcentaje=0==this.dtorecargoid?this.dtorecargoinput:-this.dtorecargoinput,0==this.editorPromocionIndex&&(this.promocion.cond1itiporef=this.dto0id,1==this.dto0id?(this.promocion.bonif1idref=this.editorTipoCliente.id,this.promocion.cond1idref=this.editorTipoCliente.id,this.promocion.cond2idref=this.editorTipoCliente.id):(this.promocion.bonif1idref=this.editorCliente.value.id,this.promocion.cond1idref=this.editorCliente.value.id,this.promocion.cond2idref=this.editorCliente.value.id)),1==this.editorPromocionIndex&&(this.promocion.bonif1itiporef=this.dto1id,0==this.dto1id?this.promocion.cond1itiporef=this.medioDto1id+2:this.promocion.bonif1idref=this.medioDto1a.id),2==this.editorPromocionIndex&&(this.promocion.bonif1rmonto=this.dto2input,this.promocion.bonif1rcantidad=this.dto2input,this.promocion.cond1rmonto=this.dto2input,this.promocion.cond1rcantidad=this.dto2input,this.promocion.cond1rmontohasta=this.dto2input,this.promocion.cond1rcantidadhasta=this.dto2input),3!=this.editorPromocionIndex&&7!=this.editorPromocionIndex||(0==this.dto3id||2==this.dto3id?(this.promocion.bonif1idref=this.editorProducto.value.id,this.promocion.cond1idref=this.editorProducto.value.id,this.promocion.cond2idref=this.editorProducto.value.id):(this.promocion.bonif1idref=this.editorFamilia.id,this.promocion.cond1idref=this.editorFamilia.id,this.promocion.cond2idref=this.editorFamilia.id),this.promocion.bonif1itiporef=this.dto3id,this.promocion.bonif1rmonto=this.dtorecargoinput,this.promocion.bonif1rcantidad=this.dtorecargoinput,this.promocion.bonif1rporcentaje=this.dtorecargoinput,this.promocion.cond1itiporef=this.dto3id+4,this.promocion.cond1rmonto=this.dtorecargoinput,this.promocion.cond1rcantidad=this.dtorecargoinput,this.promocion.cond1rmontohasta=this.dtorecargoinput,this.promocion.cond1rcantidadhasta=this.dtorecargoinput),4!=this.editorPromocionIndex&&6!=this.editorPromocionIndex&&8!=this.editorPromocionIndex||(0==this.dto4id||2==this.dto4id?(this.promocion.bonif1idref=this.editorProducto.value.id,this.promocion.cond1idref=this.editorProducto.value.id,this.promocion.cond2idref=this.editorProducto.value.id):(this.promocion.bonif1idref=this.editorFamilia.id,this.promocion.cond1idref=this.editorFamilia.id,this.promocion.cond2idref=this.editorFamilia.id),this.promocion.bonif1itiporef=this.dto4id+4,this.promocion.bonif1rmonto=this.dto5input3,this.promocion.bonif1rcantidad=this.dto5input3,this.promocion.cond1itiporef=this.dto4id+4,this.promocion.cond1rmonto=this.dto4input,this.promocion.cond1rcantidad=this.dto4input,this.promocion.cond1rmontohasta=this.dto4input,this.promocion.cond1rcantidadhasta=this.dto4input),5==this.editorPromocionIndex&&(this.promocion.bonif1idref=this.editorProducto.value.id,this.promocion.cond1idref=this.editorProducto.value.id,this.promocion.cond2idref=this.editorProducto1.value.id,this.promocion.bonif1rmonto=this.dto5input3,this.promocion.cond1rcantidad=this.dto5input1,this.promocion.cond2rcantidad=this.dto5input2,this.promocion.cond1itiporef=4,this.promocion.cond2itiporef=4),3!=this.editorPromocionIndex&&6!=this.editorPromocionIndex&&7!=this.editorPromocionIndex&&9!=this.editorPromocionIndex||(this.promocion.bonif1rporcentaje=0==this.porcentajemontoid?this.dtorecargoinput:0,this.promocion.bonif1rmonto=1==this.porcentajemontoid?this.dtorecargoinput:0),9==this.editorPromocionIndex&&(this.promocion.bonif1rcantidad=this.dto9input,0==this.dto9id?(this.promocion.cond1itiporef=4,this.promocion.bonif1itiporef=4):(this.promocion.cond1itiporef=6,this.promocion.bonif1itiporef=6),this.promocion.cond1rcantidad=this.dto9input,this.promocion.cond1rcantidadhasta=this.dto9input),this.promocion.sdescripcion?this.promocion.sleyendaticket?(this.loader.open(),this.modoEdicion?this.servicioNuevaPromocion.actualizarPromocion(this.promocion).subscribe(function(i){o.loader.close(),o.snack.open("\xa1Promoci\xf3n Actualizada!","OK",{duration:4e3}),o.router.navigateByUrl("products/promotions")},function(i){o.loader.close(),o.snack.open("ERROR","OK",{duration:4e3})}):(this.promocion.idempresa=this.empresas[0].id,this.servicioNuevaPromocion.agregarPromocion(this.promocion).subscribe(function(i){o.loader.close(),o.snack.open("\xa1Promoci\xf3n Guardada!","OK",{duration:4e3}),o.router.navigateByUrl("products/promotions")},function(i){o.loader.close(),o.snack.open("ERROR","OK",{duration:4e3})}))):this.snack.open('ERROR: Por favor llene el campo "Leyenda Ticket" antes de guardar.',"OK",{duration:4e3}):this.snack.open('ERROR: Por favor llene el campo "Descripci\xf3n" antes de guardar.',"OK",{duration:4e3})}},{key:"mostrarItem",value:function(o){var i,t,e;if(i=!this.checkTipo||o.itipo==this.promocionSelec,t=!this.checkSolamenteActivas||"T"==o.bactivo,this.checkSolamenteVigentes){var n=(new Date).valueOf(),c=new Date(o.fvigenciadesde).valueOf(),r=new Date(o.fvigenciahasta).valueOf();e=n>=c&&n<=r}else e=!0;return i&&t&&e}},{key:"querySearchCliente",value:function(o){if(""==o)return this.listaClientes;var i=[];o=(o=o.toLowerCase()).split(" ");for(var t=0;t<this.listaClientes.length;t++){for(var e=this.listaClientes[t].scodcliente+" - "+this.listaClientes[t].srazonsocial.toLowerCase(),n=!0,c=0;c<o.length;c++)if(-1==e.indexOf(o[c])){n=!1;break}n&&i.push(this.listaClientes[t])}return i}},{key:"querySearchProducto",value:function(o){if(""==o)return this.listaProductos;var i=[];o=(o=o.toLowerCase()).split(" ");for(var t=0;t<this.listaProductos.length;t++){for(var e=this.listaProductos[t].scodproducto+" - "+this.listaProductos[t].snombre.toLowerCase(),n=!0,c=0;c<o.length;c++)if(-1==e.indexOf(o[c])){n=!1;break}n&&i.push(this.listaProductos[t])}return i}},{key:"getPorcentajeMontoStr",value:function(){return 0==this.porcentajemontoid?this.dtorecargoinput+this.porcentajemonto:this.porcentajemonto+this.dtorecargoinput}},{key:"actualizarLeyendaFinal",value:function(){switch(this.LeyendaFinal="",this.editorPromocionIndex){case 0:this.LeyendaFinal=0==this.dto0id?"Al Cliente ["+this.editorCliente.value.srazonsocial+"] ":"Al Tipo de Cliente ["+this.editorTipoCliente.stipocliente+"] ",this.LeyendaFinal+="aplicar un "+this.dtorecargoinput+"% de "+this.dtorecargo;break;case 1:this.LeyendaFinal=0==this.dto1id?"Al Medio de Pago ["+this.medioDto1+"] ":"A la Condici\xf3n de Venta ["+this.medioDto1a.sdescripcion+"] ",this.LeyendaFinal+="aplicar un "+this.dtorecargoinput+"% de "+this.dtorecargo;break;case 2:this.LeyendaFinal="Por un monto mayor o igual a ["+this.dto2input+"] aplicar un "+this.dtorecargoinput+"% de "+this.dtorecargo;break;case 3:0==this.dto3id&&(this.LeyendaFinal="Al Producto ["+this.editorProducto.value.snombre+"] "),1==this.dto3id&&(this.LeyendaFinal="A la Familia ["+this.editorFamilia.sfamilia+"] "),2==this.dto3id&&(this.LeyendaFinal="Al Bulto ["+this.editorProducto.value.snombre+"] "),this.LeyendaFinal+="aplicar "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo;break;case 4:0==this.dto4id&&(this.LeyendaFinal="Por Cada "+this.dto4input+" UN. Producto ["+this.editorProducto.value.snombre+"] "),1==this.dto4id&&(this.LeyendaFinal="Por Cada "+this.dto4input+" UN. de la Familia ["+this.editorFamilia.sfamilia+"] "),2==this.dto4id&&(this.LeyendaFinal="Por Cada "+this.dto4input+" UN. Bulto ["+this.editorProducto.value.snombre+"] "),this.LeyendaFinal+="Bonificar "+this.dto5input3+" UN.";break;case 5:this.LeyendaFinal="Por Cada "+this.dto5input1+" UN. ["+this.editorProducto.value.snombre+"] "+this.dto5input2+" UN. ["+this.editorProducto1.value.snombre+"] aplicar un "+this.dtorecargoinput+"% de "+this.dtorecargo;break;case 6:0==this.dto4id&&(this.LeyendaFinal="Cada "+this.dto4input+" UN. de ["+this.editorProducto.value.snombre+"] "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo),1==this.dto4id&&(this.LeyendaFinal="Cada "+this.dto4input+" UN. de ["+this.editorFamilia.sfamilia+"] "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo),2==this.dto4id&&(this.LeyendaFinal="Cada "+this.dto4input+" UN. de ["+this.editorProducto.value.snombre+"] "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo);break;case 7:this.LeyendaFinal=0==this.dto4id||2==this.dto4id?"Comprando ["+this.editorProducto.value.snombre+"] "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo:"Comprando ["+this.editorFamilia.sfamilia+"] "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo;break;case 8:0==this.dto4id&&(this.LeyendaFinal="Llevando "+this.dto4input+" (o m\xe1s) de cualquier producto "),1==this.dto4id&&(this.LeyendaFinal="Llevando "+this.dto4input+" (o m\xe1s) de la Familia ["+this.editorFamilia.sfamilia+"] "),2==this.dto4id&&(this.LeyendaFinal="Llevando "+this.dto4input+" (o m\xe1s) Bulto de cualquier producto "),this.LeyendaFinal+="Bonificar "+this.dto5input3+" de los productos mas baratos";break;case 9:this.LeyendaFinal=0==this.dto9id?"Llevando "+this.dto9input+" (o m\xe1s) unidades de productos iguales aplicar "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo:"Llevando "+this.dto9input+" (o m\xe1s) bultos de productos iguales aplicar "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo}return this.LeyendaFinal}}]),i}(),Co.\u0275fac=function(o){return new(o||Co)(g.Rb(m.a),g.Rb(d.a),g.Rb(E.a),g.Rb(P),g.Rb(b.a),g.Rb(h.a),g.Rb(s.a),g.Rb(O.a),g.Rb(E.g))},Co.\u0275cmp=g.Lb({type:Co,selectors:[["app-new-promotion"]],decls:122,vars:125,consts:[[1,"mb-16",3,"ngModel","ngModelChange"],[4,"ngIf"],["id","myFormPromocion","method","post","enctype","multipart/form-data","autocomplete","off"],[3,"hidden"],["type","file","color","primary","name","image","accept","image/*",1,"mb-16",3,"change"],["fileUpload",""],["mat-raised-button","","color","primary",1,"m-8",3,"click"],["mat-raised-button","","type","submit","color","primary","value","Upload Image","name","submit",1,"mb-16",3,"click"],["appearance","fill","fxFlex","100","fxFlex.gt-xs","50"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"full-width"],["matInput","","name","descripcion","maxlength","250",3,"ngModel","placeholder","ngModelChange"],["matInput","","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["appearance","fill",1,"mr-16"],["matInput","",3,"ngxMatDatetimePicker","placeholder","formControl"],["matSuffix","",3,"for"],[3,"showSpinners","showSeconds","stepHour","stepMinute","stepSecond","touchUi","color","enableMeridian","disableMinute","hideTime"],["picker",""],["appearance","fill"],["picker2",""],[1,"ml-16","mb-16",3,"ngModel","ngModelChange"],[3,"ngModel","disabled","ngModelChange","selectionChange"],["class","mb-16",3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelChange","selectionChange"],[1,"mb-16",3,"textContent"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"mt-16"],["mat-raised-button","","color","primary",3,"click"],["fxFlex",""],["mat-button","","color","warn","type","button",1,"ml-16",3,"routerLink"],["width","320","height","auto",3,"src"],[3,"value"],["type","text","aria-label","Number","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],["matInput","","type","number","min","0",3,"ngModel","placeholder","ngModelChange"],["matInput","","type","number","placeholder","{{'NEWPROMOTION.AMOUNTGREATERTHANOREQUALTO' | translate}","min","0",3,"ngModel","ngModelChange"],["class","full-width",4,"ngIf"],["matInput","","type","number","step","any","min","0",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["matInput","","type","number","step","any","min","0",3,"ngModel","placeholder","ngModelChange"],["matInput","","type","number","step","any","min","0",3,"ngModel","ngModelChange"]],template:function(o,i){if(1&o){var t=g.Yb();g.Xb(0,"mat-card"),g.Xb(1,"mat-card-content"),g.Xb(2,"section"),g.Xb(3,"mat-checkbox",0),g.fc("ngModelChange",function(o){return i.checkActiva=o}),g.Oc(4),g.kc(5,"translate"),g.Wb(),g.Wb(),g.Xb(6,"section"),g.Xb(7,"label"),g.Oc(8),g.kc(9,"translate"),g.Wb(),g.Mc(10,j,2,1,"div",1),g.Wb(),g.Xb(11,"form",2),g.Xb(12,"div",3),g.Xb(13,"input",4,5),g.fc("change",function(o){return i.fileExist(o)}),g.Wb(),g.Wb(),g.Xb(15,"div",3),g.Oc(16),g.Xb(17,"button",6),g.fc("click",function(){return g.Dc(t),g.Ac(14).click()}),g.Xb(18,"mat-icon"),g.Oc(19,"attach_file"),g.Wb(),g.Oc(20),g.kc(21,"translate"),g.Wb(),g.Wb(),g.Xb(22,"div",3),g.Oc(23),g.Xb(24,"button",7),g.fc("click",function(){return i.enviarImagenPromocion()}),g.Xb(25,"mat-icon"),g.Oc(26,"cloud_upload"),g.Wb(),g.Oc(27),g.kc(28,"translate"),g.Wb(),g.Wb(),g.Wb(),g.Xb(29,"section"),g.Xb(30,"mat-form-field",8),g.Xb(31,"mat-label"),g.Oc(32),g.kc(33,"translate"),g.Wb(),g.Xb(34,"mat-select",9),g.fc("ngModelChange",function(o){return i.sucursalSelect=o}),g.Mc(35,S,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb(),g.Xb(36,"section"),g.Xb(37,"mat-form-field",11),g.Xb(38,"input",12),g.fc("ngModelChange",function(o){return i.descripcion=o}),g.kc(39,"translate"),g.Wb(),g.Wb(),g.Wb(),g.Xb(40,"section"),g.Xb(41,"mat-form-field",11),g.Xb(42,"input",13),g.fc("ngModelChange",function(o){return i.leyendaTicket=o}),g.kc(43,"translate"),g.Wb(),g.Wb(),g.Wb(),g.Xb(44,"section"),g.Xb(45,"label"),g.Oc(46),g.kc(47,"translate"),g.Wb(),g.Wb(),g.Xb(48,"section"),g.Xb(49,"mat-form-field",14),g.Sb(50,"input",15),g.kc(51,"translate"),g.Sb(52,"mat-datepicker-toggle",16),g.Sb(53,"ngx-mat-datetime-picker",17,18),g.Wb(),g.Xb(55,"mat-form-field",19),g.Sb(56,"input",15),g.kc(57,"translate"),g.Sb(58,"mat-datepicker-toggle",16),g.Sb(59,"ngx-mat-datetime-picker",17,20),g.Wb(),g.Wb(),g.Xb(61,"section"),g.Xb(62,"mat-checkbox",9),g.fc("ngModelChange",function(o){return i.checkLunes=o}),g.Oc(63),g.kc(64,"translate"),g.Wb(),g.Xb(65,"mat-checkbox",21),g.fc("ngModelChange",function(o){return i.checkMartes=o}),g.Oc(66),g.kc(67,"translate"),g.Wb(),g.Xb(68,"mat-checkbox",21),g.fc("ngModelChange",function(o){return i.checkMiercoles=o}),g.Oc(69),g.kc(70,"translate"),g.Wb(),g.Xb(71,"mat-checkbox",21),g.fc("ngModelChange",function(o){return i.checkJueves=o}),g.Oc(72),g.kc(73,"translate"),g.Wb(),g.Xb(74,"mat-checkbox",21),g.fc("ngModelChange",function(o){return i.checkViernes=o}),g.Oc(75),g.kc(76,"translate"),g.Wb(),g.Xb(77,"mat-checkbox",21),g.fc("ngModelChange",function(o){return i.checkSabado=o}),g.Oc(78),g.kc(79,"translate"),g.Wb(),g.Xb(80,"mat-checkbox",21),g.fc("ngModelChange",function(o){return i.checkDomingo=o}),g.Oc(81),g.kc(82,"translate"),g.Wb(),g.Wb(),g.Xb(83,"section"),g.Xb(84,"mat-form-field",8),g.Xb(85,"mat-label"),g.Oc(86),g.kc(87,"translate"),g.Wb(),g.Xb(88,"mat-select",22),g.fc("ngModelChange",function(o){return i.editorPromocion=o})("selectionChange",function(o){return i.elegirTipoPromocionEditorEvent(o.value)}),g.Mc(89,L,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb(),g.Mc(90,q,11,8,"div",1),g.Xb(91,"section"),g.Mc(92,$,3,4,"mat-checkbox",23),g.Wb(),g.Xb(93,"section"),g.Xb(94,"mat-form-field",8),g.Xb(95,"mat-label"),g.Oc(96),g.kc(97,"translate"),g.Wb(),g.Xb(98,"mat-select",24),g.fc("ngModelChange",function(o){return i.listaPreciosValue=o})("selectionChange",function(o){return i.elegirListadoDePreciosEvent(o.value)}),g.Mc(99,H,2,2,"mat-option",10),g.Wb(),g.Wb(),g.Wb(),g.Mc(100,G,12,9,"div",1),g.Mc(101,oo,10,7,"div",1),g.Mc(102,io,3,1,"section",1),g.Mc(103,so,11,8,"div",1),g.Mc(104,vo,11,8,"div",1),g.Mc(105,Mo,22,20,"div",1),g.Mc(106,Wo,3,1,"section",1),g.Mc(107,Do,12,10,"div",1),g.Sb(108,"div",25),g.Xb(109,"div",26),g.Xb(110,"div",27),g.Xb(111,"button",28),g.fc("click",function(){return i.formGuardar()}),g.Xb(112,"mat-icon"),g.Oc(113,"save"),g.Wb(),g.Oc(114),g.kc(115,"translate"),g.Wb(),g.Sb(116,"span",29),g.Xb(117,"button",30),g.Xb(118,"mat-icon"),g.Oc(119,"cancel"),g.Wb(),g.Oc(120),g.kc(121,"translate"),g.Wb(),g.Wb(),g.Wb(),g.Wb(),g.Wb()}if(2&o){var e=g.Ac(54),n=g.Ac(60);g.Eb(3),g.pc("ngModel",i.checkActiva),g.Eb(1),g.Pc(g.lc(5,82,"NEWPROMOTION.ACTIVE")),g.Eb(4),g.Qc("",g.lc(9,84,"NEWPROMOTION.IMAGEFORTHEORDERWEBSITE(SQUAREIMAGE)"),":"),g.Eb(2),g.pc("ngIf",i.formImagenPromocion&&""!=i.formImagenPromocion),g.Eb(2),g.pc("hidden",!0),g.Eb(3),g.pc("hidden",i.fileName),g.Eb(1),g.Qc(" ",i.fileName||"Ning\xfan archivo cargado todav\xeda."," "),g.Eb(4),g.Qc("",g.lc(21,86,"NEWPROMOTION.UPLOADIMAGE")," "),g.Eb(2),g.pc("hidden",!i.fileName),g.Eb(1),g.Qc(" ",i.fileName||"Ning\xfan archivo cargado todav\xeda."," "),g.Eb(4),g.Qc("",g.lc(28,88,"NEWPROMOTION.UPLOAD")," "),g.Eb(5),g.Pc(g.lc(33,90,"NEWPROMOTION.BRANCH")),g.Eb(2),g.pc("ngModel",i.sucursalSelect),g.Eb(1),g.pc("ngForOf",i.listaSucursales),g.Eb(3),g.qc("placeholder",g.lc(39,92,"NEWPROMOTION.DESCRIPTION")),g.pc("ngModel",i.descripcion),g.Eb(4),g.qc("placeholder",g.lc(43,94,"NEWPROMOTION.TICKETLEGEND")),g.pc("ngModel",i.leyendaTicket),g.Eb(4),g.Pc(g.lc(47,96,"NEWPROMOTION.VALIDITY")),g.Eb(4),g.qc("placeholder",g.lc(51,98,"NEWPROMOTION.VALIDSINCE")),g.pc("ngxMatDatetimePicker",e)("formControl",i.formInicio),g.Eb(2),g.pc("for",e),g.Eb(1),g.pc("showSpinners",!0)("showSeconds",!0)("stepHour",1)("stepMinute",1)("stepSecond",1)("touchUi",!1)("color","white")("enableMeridian",!0)("disableMinute",!0)("hideTime",!0),g.Eb(3),g.qc("placeholder",g.lc(57,100,"NEWPROMOTION.UNTIL")),g.pc("ngxMatDatetimePicker",n)("formControl",i.formFin),g.Eb(2),g.pc("for",n),g.Eb(1),g.pc("showSpinners",!0)("showSeconds",!0)("stepHour",1)("stepMinute",1)("stepSecond",1)("touchUi",!1)("color","white")("enableMeridian",!0)("disableMinute",!0)("hideTime",!0),g.Eb(3),g.pc("ngModel",i.checkLunes),g.Eb(1),g.Pc(g.lc(64,102,"NEWPROMOTION.MONDAY")),g.Eb(2),g.pc("ngModel",i.checkMartes),g.Eb(1),g.Pc(g.lc(67,104,"NEWPROMOTION.TUESDAY")),g.Eb(2),g.pc("ngModel",i.checkMiercoles),g.Eb(1),g.Pc(g.lc(70,106,"NEWPROMOTION.WEDNESDAY")),g.Eb(2),g.pc("ngModel",i.checkJueves),g.Eb(1),g.Pc(g.lc(73,108,"NEWPROMOTION.THURSDAY")),g.Eb(2),g.pc("ngModel",i.checkViernes),g.Eb(1),g.Pc(g.lc(76,110,"NEWPROMOTION.FRIDAY")),g.Eb(2),g.pc("ngModel",i.checkSabado),g.Eb(1),g.Pc(g.lc(79,112,"NEWPROMOTION.SATURDAY")),g.Eb(2),g.pc("ngModel",i.checkDomingo),g.Eb(1),g.Pc(g.lc(82,114,"NEWPROMOTION.SUNDAY")),g.Eb(5),g.Pc(g.lc(87,116,"NEWPROMOTION.TYPE")),g.Eb(2),g.pc("ngModel",i.editorPromocion)("disabled",i.modoEdicion),g.Eb(1),g.pc("ngForOf",i.tiposPromociones),g.Eb(1),g.pc("ngIf",0==i.editorPromocionIndex),g.Eb(2),g.pc("ngIf",4!=i.editorPromocionIndex&&8!=i.editorPromocionIndex),g.Eb(4),g.Pc(g.lc(97,118,"NEWPROMOTION.PRICELIST")),g.Eb(2),g.pc("ngModel",i.listaPreciosValue),g.Eb(1),g.pc("ngForOf",i.listadeprecios),g.Eb(1),g.pc("ngIf",9==i.editorPromocionIndex),g.Eb(1),g.pc("ngIf",1==i.editorPromocionIndex),g.Eb(1),g.pc("ngIf",2==i.editorPromocionIndex),g.Eb(1),g.pc("ngIf",3==i.editorPromocionIndex),g.Eb(1),g.pc("ngIf",4==i.editorPromocionIndex||6==i.editorPromocionIndex||7==i.editorPromocionIndex||8==i.editorPromocionIndex),g.Eb(1),g.pc("ngIf",5==i.editorPromocionIndex),g.Eb(1),g.pc("ngIf",4==i.editorPromocionIndex||8==i.editorPromocionIndex),g.Eb(1),g.pc("ngIf",4!=i.editorPromocionIndex&&8!=i.editorPromocionIndex),g.Eb(1),g.pc("textContent",i.actualizarLeyendaFinal()),g.Eb(6),g.Qc("",g.lc(115,120,"NEWPROMOTION.SAVE")," "),g.Eb(3),g.pc("routerLink",g.uc(124,yo)),g.Eb(3),g.Qc("",g.lc(121,122,"NEWPROMOTION.CANCEL")," ")}},directives:[M.a,M.b,W.a,a.o,a.r,r.o,a.w,a.p,a.q,I.b,T.a,k.c,D.a,k.f,C.a,r.n,X.b,a.c,a.k,y.a,a.f,N.h,k.h,y.b,D.c,E.h,F.n,R.c,R.a,a.s],pipes:[x.c,r.b],styles:[""]}),Co),data:{title:"NUEVA PROMOCION"}}],Fo=n("u9T3"),Ro=n("f44v"),xo=n("iELJ"),jo=n("jMqV"),So=n("M9ds"),Lo=n("ZFy/"),Ao=n("w9WL"),wo=n("PCNd"),Uo=n("BxcV"),Yo=((Xo=function i(){o(this,i)}).\u0275mod=g.Pb({type:Xo}),Xo.\u0275inj=g.Ob({factory:function(o){return new(o||Xo)},imports:[[r.c,a.t,Fo.a,Ao.f,X.c,X.c,M.c,X.c,I.c,Ro.a,X.c,Lo.b,xo.f,O.b,jo.b,So.c,C.b,T.b,x.b,wo.a,Uo.a,a.j,W.b,N.g,y.c,y.e,y.d,a.j,R.b,E.k.forChild(No)]]}),Xo)}}])}();