!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{GmJt:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var o=a("GS7A"),i=Object(o.g)([Object(o.l)({opacity:"{{opacity}}",transform:"scale({{scale}}) translate3d({{x}}, {{y}}, {{z}})"}),Object(o.e)("{{duration}} {{delay}} cubic-bezier(0.0, 0.0, 0.2, 1)",Object(o.l)("*"))],{params:{duration:"200ms",delay:"0ms",opacity:"0",scale:"1",x:"0",y:"0",z:"0"}}),r=[Object(o.n)("animate",[Object(o.m)("void => *",[Object(o.o)(i)])]),Object(o.n)("fadeInOut",[Object(o.k)("0",Object(o.l)({opacity:0,display:"none"})),Object(o.k)("1",Object(o.l)({opacity:1,display:"block"})),Object(o.m)("0 => 1",Object(o.e)("300ms")),Object(o.m)("1 => 0",Object(o.e)("300ms"))])]},HkQJ:function(t,o,i){"use strict";i.r(o),i.d(o,"PointOfSaleSettingsModule",function(){return be});var r=i("SVse"),c=i("iInd"),n=i("u9T3"),l=i("s7LF"),s=i("Dxy4"),b=i("PDjf"),u=i("f44v"),d=i("iELJ"),p=i("Tj54"),f=i("e6WT"),m=i("ZTz/"),v=i("jMqV"),h=i("zHaW"),O=i("M9ds"),E=i("ZFy/"),P=i("TSSN"),g=i("w9WL"),T=i("PCNd"),S=i("GmJt"),I=i("3kSh"),F=i("3sEA"),k=i("vpPe"),N=i("cp0P"),W=i("Ap+n"),y=i("8Y7J"),C=i("VDRc"),X=i("Q2Ze"),x=i("pMoy"),A=i("UhP/");function L(e,t){1&e&&(y.Xb(0,"h1",23),y.Oc(1),y.kc(2,"translate"),y.Wb()),2&e&&(y.Eb(1),y.Pc(y.lc(2,1,"POINTOFSALESETTINGSPOPUP.ADDPOINTOFSALE")))}function U(e,t){1&e&&(y.Xb(0,"h1",23),y.Oc(1),y.kc(2,"translate"),y.Wb()),2&e&&(y.Eb(1),y.Pc(y.lc(2,1,"POINTOFSALESETTINGSPOPUP.EDITPOINTOFSALE")))}function R(e,t){if(1&e&&(y.Xb(0,"mat-option",24),y.Oc(1),y.Wb()),2&e){var a=t.$implicit;y.pc("value",a.idsucursal),y.Eb(1),y.Qc(" ",a.sdescripcion," ")}}function D(e,t){if(1&e&&(y.Xb(0,"mat-option",24),y.Oc(1),y.Wb()),2&e){var a=t.$implicit;y.pc("value",a.indice),y.Eb(1),y.Qc(" ",a.value," ")}}function w(e,t){if(1&e&&(y.Xb(0,"mat-option",24),y.Oc(1),y.Wb()),2&e){var a=t.$implicit;y.pc("value",a.scodcliente),y.Eb(1),y.Qc(" ",a.srazonsocial," ")}}function G(e,t){if(1&e&&(y.Xb(0,"mat-tab",1),y.kc(1,"translate"),y.Xb(2,"form",2),y.Xb(3,"mat-dialog-content",3),y.Xb(4,"div",10),y.Xb(5,"mat-form-field",7),y.Xb(6,"mat-label"),y.Oc(7),y.kc(8,"translate"),y.Wb(),y.Xb(9,"mat-select",25),y.Mc(10,w,2,2,"mat-option",9),y.Wb(),y.Wb(),y.Wb(),y.Xb(11,"div",15),y.Xb(12,"mat-checkbox",16),y.Oc(13),y.kc(14,"translate"),y.Wb(),y.Wb(),y.Xb(15,"div",15),y.Xb(16,"mat-checkbox",16),y.Oc(17),y.kc(18,"translate"),y.Wb(),y.Wb(),y.Xb(19,"div",15),y.Xb(20,"mat-checkbox",16),y.Oc(21),y.kc(22,"translate"),y.Wb(),y.Wb(),y.Xb(23,"div",15),y.Xb(24,"mat-checkbox",16),y.Oc(25),y.kc(26,"translate"),y.Wb(),y.Wb(),y.Xb(27,"div",15),y.Xb(28,"mat-checkbox",16),y.Oc(29),y.kc(30,"translate"),y.Wb(),y.Wb(),y.Wb(),y.Wb(),y.Wb()),2&e){var a=y.jc();y.qc("label",y.lc(1,15,"POINTOFSALESETTINGSPOPUP.PARAMETERS")),y.Eb(2),y.pc("formGroup",a.itemForm2),y.Eb(5),y.Pc(y.lc(8,17,"POINTOFSALESETTINGSPOPUP.DEFAULTCLIENT")),y.Eb(2),y.pc("formControl",a.itemForm2.controls.idclientegenerico),y.Eb(1),y.pc("ngForOf",a.listaDeClientes),y.Eb(2),y.pc("formControl",a.itemForm2.controls.bagruparproductosidenticos),y.Eb(1),y.Qc("",y.lc(14,19,"POINTOFSALESETTINGSPOPUP.GROUPIDENTICALPRODUCTS")," "),y.Eb(3),y.pc("formControl",a.itemForm2.controls.bforzarloginalcerrarcaja),y.Eb(1),y.Qc("",y.lc(18,21,"POINTOFSALESETTINGSPOPUP.FORCELOGINWHENCLOSINGBOX")," "),y.Eb(3),y.pc("formControl",a.itemForm2.controls.bpuedeeditarpreciounitario),y.Eb(1),y.Qc("",y.lc(22,23,"POINTOFSALESETTINGSPOPUP.CANEDITUNITPRICE")," "),y.Eb(3),y.pc("formControl",a.itemForm2.controls.bpuedeeditarcantidad),y.Eb(1),y.Qc("",y.lc(26,25,"POINTOFSALESETTINGSPOPUP.CANEDITQUANTITIES")," "),y.Eb(3),y.pc("formControl",a.itemForm2.controls.bpermitecantidadesnegativas),y.Eb(1),y.Qc("",y.lc(30,27,"POINTOFSALESETTINGSPOPUP.ALLOWNEGATIVEAMOUNTS")," ")}}function j(e,t){if(1&e){var a=y.Yb();y.Xb(0,"mat-tab",1),y.kc(1,"translate"),y.Xb(2,"form",2),y.Xb(3,"mat-dialog-content",3),y.Xb(4,"div",10),y.Xb(5,"mat-form-field",5),y.Sb(6,"input",26),y.kc(7,"translate"),y.Wb(),y.Wb(),y.Xb(8,"div"),y.Xb(9,"label"),y.Oc(10),y.kc(11,"translate"),y.Wb(),y.Xb(12,"div"),y.Xb(13,"input",27),y.fc("change",function(e){return y.Dc(a),y.jc().leerArchivoKey(e)}),y.Wb(),y.Xb(14,"pre",28),y.fc("ngModelChange",function(e){return y.Dc(a),y.jc().itemForm.controls.safipkey.value=e}),y.Oc(15),y.Wb(),y.Wb(),y.Wb(),y.Xb(16,"div"),y.Xb(17,"label"),y.Oc(18),y.kc(19,"translate"),y.Wb(),y.Xb(20,"div",29),y.Xb(21,"input",30),y.fc("change",function(e){return y.Dc(a),y.jc().leerArchivoCrt(e)}),y.Wb(),y.Xb(22,"pre",31),y.fc("ngModelChange",function(e){return y.Dc(a),y.jc().itemForm.controls.safipcrt.value=e}),y.Oc(23),y.Wb(),y.Wb(),y.Wb(),y.Wb(),y.Wb(),y.Wb()}if(2&e){var o=y.jc();y.qc("label",y.lc(1,10,"POINTOFSALESETTINGSPOPUP.ELECTRONICBILL")),y.Eb(2),y.pc("formGroup",o.itemForm),y.Eb(4),y.qc("placeholder",y.lc(7,12,"POINTOFSALESETTINGSPOPUP.POSCAEANUMBER")),y.pc("formControl",o.itemForm.controls.idpvcaea),y.Eb(4),y.Qc("",y.lc(11,14,"POINTOFSALESETTINGSPOPUP.ELECTRONICINVOICE-FILE.KEY"),":"),y.Eb(4),y.pc("ngModel",o.itemForm.controls.safipkey.value),y.Eb(1),y.Pc(o.itemForm.controls.safipkey.value),y.Eb(3),y.Qc("",y.lc(19,16,"POINTOFSALESETTINGSPOPUP.ELECTRONICINVOICE-FILE.CRT"),":"),y.Eb(4),y.pc("ngModel",o.itemForm.controls.safipcrt.value),y.Eb(1),y.Pc(o.itemForm.controls.safipcrt.value)}}var M,V,Q=((M=function(){function t(a,o,i,r){e(this,t),this.data=a,this.dialogRef=o,this.fb=i,this.cdRef=r,this.tipoFacturacion=[{value:"Sin Impresion",indice:0},{value:"Serial",indice:1},{value:"Fiscal",indice:2},{value:"Factura Electr\xf3nica",indice:3}],this.listaDeSucursales=[],this.listaDeClientes=[]}return a(t,[{key:"ngOnInit",value:function(){this.listaDeSucursales=this.data.sucursales,this.listaDeClientes=this.data.clientes,this.buildItemForm(this.data.payload,this.data.parametros)}},{key:"buildItemForm",value:function(e,t){this.itemForm=this.fb.group({id:[e.id||""],idsucursal:[e.idsucursal||this.listaDeSucursales[0].idsucursal,l.v.required],idpv:[e.idpv||"",l.v.required],idpvcaea:[e.idpvcaea||""],sdescripcion:[e.sdescripcion||"Punto de Venta",l.v.required],sdomicilio:[e.sdomicilio||"Domicilio"],slocalidad:[e.slocalidad||""],sprovincia:[e.sprovincia||""],spais:[e.spais||""],sweathercode:[e.sweathercode||""],bactivo:[!e.hasOwnProperty("bactivo")||"T"==e.bactivo],soperadorcreacion:[e.soperadorcreacion||""],fcreacion:[e.fcreacion||null],soperadormodificacion:[e.soperadormodificacion||""],fmodificacion:[e.fmodificacion||null],insertedon:[e.insertedon||null],updatedon:[e.updatedon||null],deletedon:[e.deletedon||null],itipo:[e.itipo||0,l.v.required],busarpantallaalcliente:[!e.hasOwnProperty("busarpantallaalcliente")||"T"==e.busarpantallaalcliente],busarverificadordeprecios:[!e.hasOwnProperty("busarverificadordeprecios")||"T"==e.busarverificadordeprecios],busarventaypreventaremota:[!e.hasOwnProperty("busarventaypreventaremota")||"T"==e.busarventaypreventaremota],rtopedescuento:[e.rtopedescuento||0,l.v.required],rlatitud:[e.rlatitud||0],rlongitud:[e.rlongitud||0],safipcrt:[e.safipcrt||""],safipkey:[e.safipkey||""],bfeenproduccion:[!e.hasOwnProperty("bfeenproduccion")||"T"==e.bfeenproduccion],hardid:[e.hardid||null],soperadoractivacion:[e.soperadoractivacion||null],factivacion:[e.factivacion||null],snumerodeserie:[e.snumerodeserie||null],rporcotrosimpuestos:[e.rporcotrosimpuestos||0]}),e.id&&(this.itemForm2=this.fb.group({id:[t.id||""],idpv:[t.idpv],smarcafiscal:[t.smarcafiscal],smodelofiscal:[t.smodelofiscal],bagruparproductosidenticos:[1==t.bagruparproductosidenticos],bpuedeeditarpreciounitario:[1==t.bpuedeeditarpreciounitario],bpuedeeditarcantidad:[1==t.bpuedeeditarcantidad],bpermitecantidadesnegativas:[1==t.bpermitecantidadesnegativas],idclientegenerico:[t.idclientegenerico.toString()],sformatofecha:[t.sformatofecha],sversion:[t.sversion],isegundosentresincro:[t.isegundosentresincro],fultimocalculodestock:[t.fultimocalculodestock],bforzarloginalcerrarcaja:[!t.hasOwnProperty("bforzarloginalcerrarcaja")||"T"==t.bforzarloginalcerrarcaja],soperadorcreacion:[t.soperadorcreacion],fcreacion:[t.fcreacion],soperadormodificacion:[t.soperadormodificacion],fmodificacion:[t.fmodificacion],insertedon:[t.insertedon],updatedon:[t.updatedon],deletedon:[t.deletedon]}))}},{key:"leerArchivoKey",value:function(e){var t=this,a=e.target.files[0];if(a){var o=new FileReader;o.onload=function(e){var a=e.target.result;t.itemForm.get("safipkey").setValue(a),t.cdRef.detectChanges()},o.readAsText(a)}}},{key:"leerArchivoCrt",value:function(e){var t=this,a=e.target.files[0];if(a){var o=new FileReader;o.onload=function(e){var a=e.target.result;t.itemForm.get("safipcrt").setValue(a),t.cdRef.detectChanges()},o.readAsText(a)}}},{key:"submit",value:function(){this.dialogRef.close(this.itemForm.value.id?[this.itemForm.value,this.itemForm2.value]:[this.itemForm.value,null])}}]),t}()).\u0275fac=function(e){return new(e||M)(y.Rb(d.a),y.Rb(d.g),y.Rb(l.d),y.Rb(y.h))},M.\u0275cmp=y.Lb({type:M,selectors:[["app-point-of-sale-settings-popup"]],decls:68,vars:58,consts:[["matDialogTitle","",4,"ngIf"],[3,"label"],[3,"formGroup"],["mat-dialog-content","","fxLayout","row wrap","fxLayout.lt-sm","column",2,"max-width","100%","margin","0px","padding-top","10px"],["fxFlex","50",1,"pr-16",3,"hidden"],[1,"full-width"],["matInput","","name","idpv",3,"formControl","placeholder"],["appearance","fill"],["name","idsucursal",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","50",1,"pr-16"],["matInput","","name","sdescripcion",3,"formControl","placeholder"],["name","itipo",3,"formControl"],["matInput","","name","rtopedescuento",3,"formControl","placeholder"],["name","bactivo",3,"formControl"],["fxFlex","50",1,"mb-16"],[3,"formControl"],["fxFlex","100"],[3,"label",4,"ngIf"],["fxFlex","100",1,"mt-16"],["mat-raised-button","","color","primary",3,"disabled","click"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],["matDialogTitle",""],[3,"value"],["name","idclientegenerico",3,"formControl"],["matInput","","name","idpvcaea",3,"formControl","placeholder"],["type","file","id","file-input-key","accept",".key",3,"change"],["id","contenido-archivo-key",3,"ngModel","ngModelChange"],[1,"col-sm-10"],["type","file","id","file-input-crt","accept",".crt",3,"change"],["id","contenido-archivo-crt",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(y.Mc(0,L,3,3,"h1",0),y.Mc(1,U,3,3,"h1",0),y.Xb(2,"mat-tab-group"),y.Xb(3,"mat-tab",1),y.kc(4,"translate"),y.Xb(5,"form",2),y.Xb(6,"mat-dialog-content",3),y.Xb(7,"div",4),y.Xb(8,"mat-form-field",5),y.Sb(9,"input",6),y.kc(10,"translate"),y.Wb(),y.Wb(),y.Xb(11,"div",4),y.Xb(12,"mat-form-field",7),y.Xb(13,"mat-label"),y.Oc(14),y.kc(15,"translate"),y.Wb(),y.Xb(16,"mat-select",8),y.Mc(17,R,2,2,"mat-option",9),y.Wb(),y.Wb(),y.Wb(),y.Xb(18,"div",10),y.Xb(19,"mat-form-field",5),y.Sb(20,"input",11),y.kc(21,"translate"),y.Wb(),y.Wb(),y.Xb(22,"div",10),y.Xb(23,"mat-form-field",7),y.Xb(24,"mat-label"),y.Oc(25),y.kc(26,"translate"),y.Wb(),y.Xb(27,"mat-select",12),y.Mc(28,D,2,2,"mat-option",9),y.Wb(),y.Wb(),y.Wb(),y.Xb(29,"div",10),y.Xb(30,"mat-form-field",5),y.Sb(31,"input",13),y.kc(32,"translate"),y.Wb(),y.Wb(),y.Xb(33,"div",10),y.Xb(34,"mat-slide-toggle",14),y.Oc(35),y.kc(36,"translate"),y.Wb(),y.Wb(),y.Xb(37,"div",15),y.Xb(38,"mat-checkbox",16),y.Oc(39),y.kc(40,"translate"),y.Wb(),y.Wb(),y.Xb(41,"div",15),y.Xb(42,"mat-checkbox",16),y.Oc(43),y.kc(44,"translate"),y.Wb(),y.Wb(),y.Xb(45,"div",15),y.Xb(46,"mat-checkbox",16),y.Oc(47),y.kc(48,"translate"),y.Wb(),y.Wb(),y.Xb(49,"div",17),y.Xb(50,"i"),y.Oc(51),y.kc(52,"translate"),y.Wb(),y.Wb(),y.Wb(),y.Wb(),y.Wb(),y.Mc(53,G,31,29,"mat-tab",18),y.Mc(54,j,24,18,"mat-tab",18),y.Wb(),y.Xb(55,"mat-dialog-content",3),y.Xb(56,"div",19),y.Xb(57,"button",20),y.fc("click",function(){return t.submit()}),y.Xb(58,"mat-icon"),y.Oc(59,"save"),y.Wb(),y.Oc(60),y.kc(61,"translate"),y.Wb(),y.Sb(62,"span",21),y.Xb(63,"button",22),y.fc("click",function(){return t.dialogRef.close(!1)}),y.Xb(64,"mat-icon"),y.Oc(65,"cancel"),y.Wb(),y.Oc(66),y.kc(67,"translate"),y.Wb(),y.Wb(),y.Wb()),2&e&&(y.pc("ngIf",t.data.isNew),y.Eb(1),y.pc("ngIf",!t.data.isNew),y.Eb(2),y.qc("label",y.lc(4,32,"POINTOFSALESETTINGSPOPUP.DETAILS")),y.Eb(2),y.pc("formGroup",t.itemForm),y.Eb(2),y.pc("hidden",t.itemForm.value.id),y.Eb(2),y.rc("placeholder","*",y.lc(10,34,"POINTOFSALESETTINGSPOPUP.NUMBEROFPV"),""),y.pc("formControl",t.itemForm.controls.idpv),y.Eb(2),y.pc("hidden",t.itemForm.value.id),y.Eb(3),y.Qc("*",y.lc(15,36,"POINTOFSALESETTINGSPOPUP.BRANCHOFFICE"),""),y.Eb(2),y.pc("formControl",t.itemForm.controls.idsucursal),y.Eb(1),y.pc("ngForOf",t.listaDeSucursales),y.Eb(3),y.rc("placeholder","*",y.lc(21,38,"POINTOFSALESETTINGSPOPUP.DESCRIPTION"),""),y.pc("formControl",t.itemForm.controls.sdescripcion),y.Eb(5),y.Qc("*",y.lc(26,40,"POINTOFSALESETTINGSPOPUP.BILLINGTYPE"),""),y.Eb(2),y.pc("formControl",t.itemForm.controls.itipo),y.Eb(1),y.pc("ngForOf",t.tipoFacturacion),y.Eb(3),y.rc("placeholder","*",y.lc(32,42,"POINTOFSALESETTINGSPOPUP.DISCOUNTCAP"),""),y.pc("formControl",t.itemForm.controls.rtopedescuento),y.Eb(3),y.pc("formControl",t.itemForm.controls.bactivo),y.Eb(1),y.Qc(" ",y.lc(36,44,"POINTOFSALESETTINGSPOPUP.ACTIVE"),""),y.Eb(3),y.pc("formControl",t.itemForm.controls.busarpantallaalcliente),y.Eb(1),y.Qc("",y.lc(40,46,"POINTOFSALESETTINGSPOPUP.USECUSTOMERSCREEN")," "),y.Eb(3),y.pc("formControl",t.itemForm.controls.busarventaypreventaremota),y.Eb(1),y.Qc("",y.lc(44,48,"POINTOFSALESETTINGSPOPUP.USEREMOTESALEANDPRESALE")," "),y.Eb(3),y.pc("formControl",t.itemForm.controls.busarverificadordeprecios),y.Eb(1),y.Qc("",y.lc(48,50,"POINTOFSALESETTINGSPOPUP.USEPRICECHECKER")," "),y.Eb(4),y.Qc("* ",y.lc(52,52,"POINTOFSALESETTINGSPOPUP.PARRAF1"),"."),y.Eb(2),y.pc("ngIf",t.itemForm.value.id),y.Eb(1),y.pc("ngIf",3==t.itemForm.controls.itipo.value),y.Eb(3),y.pc("disabled",t.itemForm.invalid),y.Eb(3),y.Qc("",y.lc(61,54,"POINTOFSALESETTINGSPOPUP.SAVE")," "),y.Eb(6),y.Qc("",y.lc(67,56,"POINTOFSALESETTINGSPOPUP.CANCEL")," "))},directives:[r.o,O.b,O.a,l.w,l.p,l.i,d.e,C.c,C.a,X.c,f.b,l.c,l.o,l.f,X.f,m.a,r.n,v.a,x.a,s.b,p.a,d.h,A.n,l.r],pipes:[P.c],styles:[""],data:{animation:[S.a]}}),M),z=i("AytR"),q=i("IheW"),H=((V=function(){function t(a){e(this,t),this.http=a}return a(t,[{key:"obtenerDatos",value:function(e,t,a,o){return this.http.get(encodeURI("".concat(z.a.apiURL,'PuntosVenta?filter={"where":').concat(e,',"limit":').concat(t,',"skip":').concat(a,',"order":"').concat(o,'"}')))}},{key:"obtenerCount",value:function(e){return this.http.get(encodeURI("".concat(z.a.apiURL,"PuntosVenta/count?where=").concat(e)))}},{key:"actualizarPuntoDeVenta",value:function(e){return this.http.put("".concat(z.a.apiURL,"PuntosVenta/").concat(e.id),e)}},{key:"actualizarParametros",value:function(e){return this.http.put("".concat(z.a.apiURL,"Parametros/").concat(e.id),e)}},{key:"agregarPuntoDeVenta",value:function(e){return this.http.post(z.a.apiURL+"PuntosVenta",e)}},{key:"obtenerSucursales",value:function(){return this.http.get(encodeURI(z.a.apiURL+"Sucursales?"))}},{key:"obtenerParametros",value:function(){return this.http.get(encodeURI(z.a.apiURL+"Parametros?"))}},{key:"obtenerClientes",value:function(){return this.http.get(encodeURI(z.a.apiURL+'Clientes?filter={"where":{"deletedon":{"eq":null}},"order":"srazonsocial ASC"}'))}}]),t}()).\u0275fac=function(e){return new(e||V)(y.bc(q.c))},V.\u0275prov=y.Nb({token:V,factory:V.\u0275fac,providedIn:"root"}),V);function J(e,t){if(1&e){var a=y.Yb();y.Xb(0,"button",12),y.fc("click",function(e){y.Dc(a);var t=y.jc(),o=y.Ac(10);return t.updateFilter(e)&&(o.value="")}),y.Xb(1,"mat-icon"),y.Oc(2,"close"),y.Wb(),y.Wb()}}function K(e,t){if(1&e&&y.Oc(0),2&e){var a=t.row;y.Qc(" ",null==a?null:a.sdescripcion," ")}}function Y(e,t){if(1&e){var a=y.Yb();y.Xb(0,"button",13),y.fc("click",function(){y.Dc(a);var e=t.row;return y.jc().openPopUp(e)}),y.Xb(1,"mat-icon"),y.Oc(2,"edit"),y.Wb(),y.Wb(),y.Xb(3,"button",13),y.fc("click",function(){y.Dc(a);var e=t.row;return y.jc().openUserInfoPopUp(e)}),y.Xb(4,"mat-icon"),y.Oc(5,"person_pin"),y.Wb(),y.Wb()}}var B,Z,$=function(){return{y:"50px",delay:"300ms"}},_=function(e){return{value:"*",params:e}},ee=[{path:"",component:(B=function(){function t(a,o,i,r,c,n){e(this,t),this.servicioPuntoDeVenta=a,this.dialog=o,this.snack=i,this.confirmService=r,this.loader=c,this.servicioUUID=n,this.timeOutDuration=800,this.rows=[],this.order="sdescripcion ASC",this.search="",this.page={count:0,offset:0,limit:10}}return a(t,[{key:"ngOnInit",value:function(){var e=this;this.prepararFiltro(),this.refresh(),this.servicioPuntoDeVenta.obtenerSucursales().subscribe(function(t){e.sucursales=t}),this.servicioPuntoDeVenta.obtenerClientes().subscribe(function(t){e.clientes=t})}},{key:"prepararFiltro",value:function(){var e=this;if(this.search){this.filter='{"and":[';var t=this.search.split(" ");t.length>0&&(t.forEach(function(t,a){t.length>1&&(e.filter+='{"or":[{"sdescripcion":{"ilike":"%'.concat(t,'%"}}]}'),a<e.search.length-1&&(e.filter+=","))}),this.filter+='{"deletedon":{"eq":null}}]}')}else this.filter='{"deletedon":{"eq":null}}'}},{key:"refresh",value:function(){var e=this;this.prepararFiltro(),Object(N.a)([this.servicioPuntoDeVenta.obtenerCount(this.filter),this.servicioPuntoDeVenta.obtenerDatos(this.filter,this.page.limit,this.page.offset*this.page.limit,this.order),this.servicioPuntoDeVenta.obtenerParametros()]).subscribe(function(t){e.page.count=t[0].count,e.rows=t[1],e.parametros=t[2]},function(t){e.loader.close(),e.snack.open("ERROR","OK",{duration:4e3})})}},{key:"pageCallback",value:function(e){this.page.offset=e.offset,this.refresh()}},{key:"updateFilter",value:function(e){var t=this;return this.search=e instanceof MouseEvent?"":e.target.value,clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){t.refresh()},this.timeOutDuration),!0}},{key:"onSort",value:function(e){var t=e.sorts[0];this.order="".concat(t.prop," ").concat(t.dir.toUpperCase()),this.refresh()}},{key:"openPopUp",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;this.dialog.open(Q,{width:"720px",disableClose:!0,data:{payload:t,sucursales:this.sucursales,parametros:this.parametros.find(function(e){return e.idpv==t.idpv}),clientes:this.clientes,isNew:a}}).afterClosed().subscribe(function(t){if(t){e.loader.open();var o={};if(Object.assign(o,t[0]),o.bactivo=t[0].bactivo?"T":"F",o.busarpantallaalcliente=t[0].busarpantallaalcliente?"T":"F",o.busarverificadordeprecios=t[0].busarverificadordeprecios?"T":"F",o.busarventaypreventaremota=t[0].busarventaypreventaremota?"T":"F",o.bfeenproduccion=t[0].bfeenproduccion?"T":"F",a)o.id=e.servicioUUID.generateUUID(),e.servicioPuntoDeVenta.agregarPuntoDeVenta(o).subscribe(function(t){e.refresh(),e.loader.close(),e.snack.open("\xa1Punto de Venta Agregado!","OK",{duration:4e3})},function(t){e.loader.close(),e.snack.open("ERROR","OK",{duration:4e3})});else{var i={};Object.assign(i,t[1]),i.bagruparproductosidenticos=t[1].bagruparproductosidenticos?1:0,i.bpuedeeditarpreciounitario=t[1].bpuedeeditarpreciounitario?1:0,i.bpuedeeditarcantidad=t[1].bpuedeeditarcantidad?1:0,i.bpermitecantidadesnegativas=t[1].bpermitecantidadesnegativas?1:0,i.bforzarloginalcerrarcaja=t[1].bforzarloginalcerrarcaja?"T":"F",Object(N.a)([e.servicioPuntoDeVenta.actualizarPuntoDeVenta(o),e.servicioPuntoDeVenta.actualizarParametros(i)]).subscribe(function(t){e.refresh(),e.loader.close(),e.snack.open("\xa1Punto de Venta Actualizado!","OK",{duration:4e3})},function(t){e.loader.close(),e.snack.open("ERROR","OK",{duration:4e3})})}}})}},{key:"openUserInfoPopUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dialog.open(W.a,{width:"720px",disableClose:!0,data:{title:"INFORMACION DE MODIFICACION",payload:e}})}}]),t}(),B.\u0275fac=function(e){return new(e||B)(y.Rb(H),y.Rb(d.b),y.Rb(h.a),y.Rb(I.a),y.Rb(F.a),y.Rb(k.a))},B.\u0275cmp=y.Lb({type:B,selectors:[["app-point-of-sale-settings"]],decls:22,vars:30,consts:[[1,"m-333"],["mat-raised-button","","color","primary",1,"mb-8",3,"click"],[1,"margin-333",2,"width","100%"],["matPrefix",""],["matInput","","value","",3,"placeholder","keyup"],["searchinput",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","rowHeight","count","offset","limit","externalPaging","selectionType","page","sort"],["prop","sdescripcion",3,"name","flexGrow"],["ngx-datatable-cell-template",""],[3,"name","flexGrow"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-icon-button","","mat-sm-button","","color","foreground",1,"mr-16",3,"click"]],template:function(e,t){if(1&e&&(y.Xb(0,"div",0),y.Xb(1,"button",1),y.fc("click",function(){return t.openPopUp({},!0)}),y.Xb(2,"mat-icon"),y.Oc(3,"library_add"),y.Wb(),y.Oc(4),y.kc(5,"translate"),y.Wb(),y.Wb(),y.Xb(6,"mat-form-field",2),y.Xb(7,"mat-icon",3),y.Oc(8,"search"),y.Wb(),y.Xb(9,"input",4,5),y.fc("keyup",function(e){return t.updateFilter(e)}),y.kc(11,"translate"),y.Wb(),y.Mc(12,J,3,0,"button",6),y.Wb(),y.Xb(13,"mat-card",7),y.Xb(14,"mat-card-content",7),y.Xb(15,"ngx-datatable",8),y.fc("page",function(e){return t.pageCallback(e)})("sort",function(e){return t.onSort(e)}),y.Xb(16,"ngx-datatable-column",9),y.kc(17,"translate"),y.Mc(18,K,1,1,"ng-template",10),y.Wb(),y.Xb(19,"ngx-datatable-column",11),y.kc(20,"translate"),y.Mc(21,Y,6,0,"ng-template",10),y.Wb(),y.Wb(),y.Wb(),y.Wb()),2&e){var a=y.Ac(10);y.Eb(4),y.Qc("",y.lc(5,19,"POINTOFSALESETTINGS.ADDPOINTOFSALE")," "),y.Eb(5),y.qc("placeholder",y.lc(11,21,"POINTOFSALESETTINGS.FILTER")),y.Eb(3),y.pc("ngIf",a.value),y.Eb(1),y.pc("@animate",y.vc(28,_,y.uc(27,$))),y.Eb(2),y.pc("rows",t.rows)("columnMode","flex")("headerHeight",50)("footerHeight",50)("scrollbarH",!1)("rowHeight",50)("count",t.page.count)("offset",t.page.offset)("limit",t.page.limit)("externalPaging",!0)("selectionType","single"),y.Eb(1),y.qc("name",y.lc(17,23,"POINTOFSALESETTINGS.POINTOFSALE")),y.pc("flexGrow",1),y.Eb(3),y.qc("name",y.lc(20,25,"POINTOFSALESETTINGS.ACTIONS")),y.pc("flexGrow",1)}},directives:[s.b,p.a,X.c,X.g,f.b,r.o,b.a,b.b,g.d,g.b,g.a,X.h],pipes:[P.c],styles:[""],data:{animation:[S.a]}}),B),data:{title:"PUNTO DE VENTA"}}],te=i("TN/R"),ae=i("40+f"),oe=i("SqCe"),ie=i("rJgo"),re=i("BTe0"),ce=i("zQhy"),ne=i("aYsj"),le=i("hrfs"),se=i("pYyI"),be=((Z=function t(){e(this,t)}).\u0275mod=y.Pb({type:Z}),Z.\u0275inj=y.Ob({factory:function(e){return new(e||Z)},imports:[[r.c,l.t,n.a,g.f,f.c,f.c,b.c,f.c,s.c,u.a,f.c,E.b,d.f,h.b,v.b,O.c,m.b,p.b,P.b,T.a,te.g,l.j,oe.b,ie.c,ae.b,x.b,ce.c,re.b,le.a,se.a,ne.a,c.k.forChild(ee)]]}),Z)},vpPe:function(t,o,i){"use strict";i.d(o,"a",function(){return c});var r=i("8Y7J"),c=function(){var t=function(){function t(){e(this,t)}return a(t,[{key:"generateUUID",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:3&a|8).toString(16)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();