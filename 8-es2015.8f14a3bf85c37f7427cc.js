(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"8O9Z":function(o,i,t){"use strict";t.r(i),t.d(i,"NewPromotionModule",function(){return yo});var e=t("SVse"),n=t("s7LF"),c=t("3sEA"),r=t("vpPe"),s=t("cp0P"),a=t("JX91"),d=t("lJxs"),l=t("8iJF"),h=t("Sp5M"),p=t("qA6C"),b=t("AytR"),m=t("8Y7J"),u=t("IheW");let f=(()=>{class o{constructor(o){this.http=o}obtenerPromocion(o){return this.http.get(encodeURI(`${b.a.apiURL}Promociones/${o}`))}obtenerSucursales(){return this.http.get(encodeURI(b.a.apiURL+'Sucursales?filter={"where":{"deletedon":{"eq":null}}}'))}obtenerFamilias(){return this.http.get(encodeURI(b.a.apiURL+'Familias?filter={"where":{"deletedon":{"eq":null}},"order":"sfamilia ASC"}'))}obtenerTiposCondPago(){return this.http.get(encodeURI(b.a.apiURL+'TiposCondPago?filter={"where":{"deletedon":{"eq":null}}}'))}actualizarPromocion(o){return this.http.put(`${b.a.apiURL}Promociones/${o.id}`,o)}agregarPromocion(o){return this.http.post(b.a.apiURL+"Promociones",o)}}return o.\u0275fac=function(i){return new(i||o)(m.bc(u.c))},o.\u0275prov=m.Nb({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var g=t("iInd"),P=t("zHaW"),E=t("PDjf"),O=t("pMoy"),M=t("Dxy4"),v=t("Tj54"),W=t("Q2Ze"),I=t("VDRc"),T=t("ZTz/"),D=t("e6WT"),C=t("n1FK"),X=t("TN/R"),k=t("UhP/"),N=t("vrAh"),x=t("TSSN");function F(o,i){if(1&o&&(m.Xb(0,"div"),m.Sb(1,"img",31),m.Wb()),2&o){const o=m.jc();m.Eb(1),m.qc("src",o.formImagenPromocion,m.Fc)}}function R(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",null==o?null:o.sdescripcion," ")}}function j(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",o," ")}}function S(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",o," ")}}function y(o,i){if(1&o&&(m.Xb(0,"div"),m.Xb(1,"label"),m.Oc(2),m.Wb(),m.Wb()),2&o){const o=m.jc(2);m.Eb(2),m.Pc(o.editorCliente.srazonsocial)}}function L(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc(" ",null==o?null:o.srazonsocial," ")}}function A(o,i){if(1&o&&(m.Xb(0,"section"),m.Xb(1,"mat-form-field",8),m.Sb(2,"input",33),m.kc(3,"translate"),m.Xb(4,"mat-autocomplete",34,35),m.Mc(6,L,2,2,"mat-option",10),m.kc(7,"async"),m.Wb(),m.Wb(),m.Wb()),2&o){const o=m.Ac(5),i=m.jc(2);m.Eb(2),m.qc("placeholder",m.lc(3,5,"NEWPROMOTION.CLIENT")),m.pc("formControl",i.editorCliente)("matAutocomplete",o),m.Eb(2),m.pc("displayWith",i.displayFnClientes),m.Eb(2),m.pc("ngForOf",m.lc(7,7,i.filteredClientes))}}function w(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",null==o?null:o.stipocliente," ")}}function U(o,i){if(1&o){const o=m.Yb();m.Xb(0,"div"),m.Xb(1,"mat-form-field",8),m.Xb(2,"mat-label"),m.Oc(3),m.kc(4,"translate"),m.Wb(),m.Xb(5,"mat-select",9),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc(2).editorTipoCliente=i}),m.Mc(6,w,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb()}if(2&o){const o=m.jc(2);m.Eb(3),m.Pc(m.lc(4,3,"NEWPROMOTION.CLIENTTYPE")),m.Eb(2),m.pc("ngModel",o.editorTipoCliente),m.Eb(1),m.pc("ngForOf",o.listaTipoClientes)}}function Y(o,i){if(1&o){const o=m.Yb();m.Xb(0,"div"),m.Xb(1,"section"),m.Xb(2,"mat-form-field",8),m.Xb(3,"mat-label"),m.Oc(4),m.kc(5,"translate"),m.Wb(),m.Xb(6,"mat-select",24),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc().dto0=i})("selectionChange",function(i){return m.Dc(o),m.jc().elegirTipoDto0Event(i.value)}),m.Mc(7,S,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb(),m.Mc(8,y,3,1,"div",1),m.Mc(9,A,8,9,"section",1),m.Mc(10,U,7,5,"div",1),m.Wb()}if(2&o){const o=m.jc();m.Eb(4),m.Pc(m.lc(5,6,"NEWPROMOTION.TYPE")),m.Eb(2),m.pc("ngModel",o.dto0),m.Eb(1),m.pc("ngForOf",o.tiposDto0),m.Eb(1),m.pc("ngIf",0==o.dto0id),m.Eb(1),m.pc("ngIf",0==o.dto0id),m.Eb(1),m.pc("ngIf",1==o.dto0id)}}function V(o,i){if(1&o){const o=m.Yb();m.Xb(0,"mat-checkbox",0),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc().checkAplicaSobreElPrecio=i}),m.Oc(1),m.kc(2,"translate"),m.Wb()}if(2&o){const o=m.jc();m.pc("ngModel",o.checkAplicaSobreElPrecio),m.Eb(1),m.Pc(m.lc(2,2,"NEWPROMOTION.APPLYONTHEPRICE"))}}function Q(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",o," ")}}function q(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",o," ")}}function $(o,i){if(1&o){const o=m.Yb();m.Xb(0,"div"),m.Xb(1,"section"),m.Xb(2,"mat-form-field",8),m.Xb(3,"mat-label"),m.Oc(4),m.kc(5,"translate"),m.Wb(),m.Xb(6,"mat-select",24),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc().dto9=i})("selectionChange",function(i){return m.Dc(o),m.jc().elegirTipoDto9Event(i.value)}),m.Mc(7,q,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb(),m.Xb(8,"section"),m.Xb(9,"mat-form-field",11),m.Xb(10,"input",36),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc().dto9input=i}),m.kc(11,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb()}if(2&o){const o=m.jc();m.Eb(4),m.Pc(m.lc(5,5,"NEWPROMOTION.TYPE")),m.Eb(2),m.pc("ngModel",o.dto9),m.Eb(1),m.pc("ngForOf",o.tiposDto9),m.Eb(3),m.qc("placeholder",m.lc(11,7,"NEWPROMOTION.EACH")),m.pc("ngModel",o.dto9input)}}function H(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",o," ")}}function B(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",o," ")}}function G(o,i){if(1&o){const o=m.Yb();m.Xb(0,"div"),m.Xb(1,"mat-form-field",8),m.Xb(2,"mat-label"),m.Oc(3),m.kc(4,"translate"),m.Wb(),m.Xb(5,"mat-select",24),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc(2).medioDto1=i})("selectionChange",function(i){return m.Dc(o),m.jc(2).elegirTipoMedioDto1Event(i.value)}),m.Mc(6,B,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb()}if(2&o){const o=m.jc(2);m.Eb(3),m.Pc(m.lc(4,3,"NEWPROMOTION.PAYMENTMETHOD")),m.Eb(2),m.pc("ngModel",o.medioDto1),m.Eb(1),m.pc("ngForOf",o.tiposMedioDePago)}}function z(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",null==o?null:o.sdescripcion," ")}}function _(o,i){if(1&o){const o=m.Yb();m.Xb(0,"div"),m.Xb(1,"mat-form-field",8),m.Xb(2,"mat-label"),m.Oc(3),m.kc(4,"translate"),m.Wb(),m.Xb(5,"mat-select",9),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc(2).medioDto1a=i}),m.Mc(6,z,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb()}if(2&o){const o=m.jc(2);m.Eb(3),m.Pc(m.lc(4,3,"NEWPROMOTION.PAYMENTCONDITION")),m.Eb(2),m.pc("ngModel",o.medioDto1a),m.Eb(1),m.pc("ngForOf",o.listaTiposCondPago)}}function J(o,i){if(1&o){const o=m.Yb();m.Xb(0,"div"),m.Xb(1,"section"),m.Xb(2,"mat-form-field",8),m.Xb(3,"mat-label"),m.Oc(4),m.kc(5,"translate"),m.Wb(),m.Xb(6,"mat-select",24),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc().dto1=i})("selectionChange",function(i){return m.Dc(o),m.jc().elegirTipoDto1Event(i.value)}),m.Mc(7,H,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb(),m.Mc(8,G,7,5,"div",1),m.Mc(9,_,7,5,"div",1),m.Wb()}if(2&o){const o=m.jc();m.Eb(4),m.Pc(m.lc(5,5,"NEWPROMOTION.TYPE")),m.Eb(2),m.pc("ngModel",o.dto1),m.Eb(1),m.pc("ngForOf",o.tiposDto1),m.Eb(1),m.pc("ngIf",0==o.dto1id),m.Eb(1),m.pc("ngIf",1==o.dto1id)}}function K(o,i){if(1&o){const o=m.Yb();m.Xb(0,"section"),m.Xb(1,"mat-form-field",11),m.Xb(2,"input",37),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc().dto2input=i}),m.Wb(),m.Wb(),m.Wb()}if(2&o){const o=m.jc();m.Eb(2),m.pc("ngModel",o.dto2input)}}function Z(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",o," ")}}function oo(o,i){if(1&o&&(m.Xb(0,"div"),m.Xb(1,"label"),m.Oc(2),m.Wb(),m.Wb()),2&o){const o=m.jc(2);m.Eb(2),m.Pc(o.editorProducto.snombre)}}function io(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc(" ",null==o?null:o.snombre," ")}}function to(o,i){if(1&o&&(m.Xb(0,"section"),m.Xb(1,"mat-form-field",8),m.Sb(2,"input",33),m.kc(3,"translate"),m.Xb(4,"mat-autocomplete",34,35),m.Mc(6,io,2,2,"mat-option",10),m.kc(7,"async"),m.Wb(),m.Wb(),m.Wb()),2&o){const o=m.Ac(5),i=m.jc(2);m.Eb(2),m.qc("placeholder",m.lc(3,5,"NEWPROMOTION.PRODUCT")),m.pc("formControl",i.editorProducto)("matAutocomplete",o),m.Eb(2),m.pc("displayWith",i.displayFnProductos),m.Eb(2),m.pc("ngForOf",m.lc(7,7,i.filteredProductos))}}function eo(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",null==o?null:o.sfamilia," ")}}function no(o,i){if(1&o){const o=m.Yb();m.Xb(0,"div"),m.Xb(1,"mat-form-field",8),m.Xb(2,"mat-label"),m.Oc(3),m.kc(4,"translate"),m.Wb(),m.Xb(5,"mat-select",9),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc(2).editorFamilia=i}),m.Mc(6,eo,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb()}if(2&o){const o=m.jc(2);m.Eb(3),m.Pc(m.lc(4,3,"NEWPROMOTION.FAMILY")),m.Eb(2),m.pc("ngModel",o.editorFamilia),m.Eb(1),m.pc("ngForOf",o.listaFamilias)}}function co(o,i){if(1&o){const o=m.Yb();m.Xb(0,"div"),m.Xb(1,"section"),m.Xb(2,"mat-form-field",8),m.Xb(3,"mat-label"),m.Oc(4),m.kc(5,"translate"),m.Wb(),m.Xb(6,"mat-select",24),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc().dto3=i})("selectionChange",function(i){return m.Dc(o),m.jc().elegirTipoDto3Event(i.value)}),m.Mc(7,Z,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb(),m.Mc(8,oo,3,1,"div",1),m.Mc(9,to,8,9,"section",1),m.Mc(10,no,7,5,"div",1),m.Wb()}if(2&o){const o=m.jc();m.Eb(4),m.Pc(m.lc(5,6,"NEWPROMOTION.TYPE")),m.Eb(2),m.pc("ngModel",o.dto3),m.Eb(1),m.pc("ngForOf",o.tiposDto3),m.Eb(1),m.pc("ngIf",0==o.dto3id||2==o.dto3id),m.Eb(1),m.pc("ngIf",0==o.dto3id||2==o.dto3id),m.Eb(1),m.pc("ngIf",1==o.dto3id)}}function ro(o,i){if(1&o){const o=m.Yb();m.Xb(0,"mat-form-field",11),m.Xb(1,"input",39),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc(2).dto4input=i}),m.Wb(),m.Wb()}if(2&o){const o=m.jc(2);m.Eb(1),m.pc("ngModel",o.dto4input)("placeholder",o.placeholderText())}}function so(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",o," ")}}function ao(o,i){if(1&o&&(m.Xb(0,"div"),m.Xb(1,"label"),m.Oc(2),m.Wb(),m.Wb()),2&o){const o=m.jc(3);m.Eb(2),m.Pc(o.editorProducto.snombre)}}function lo(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc(" ",null==o?null:o.snombre," ")}}function ho(o,i){if(1&o&&(m.Xb(0,"section"),m.Xb(1,"mat-form-field",8),m.Sb(2,"input",33),m.kc(3,"translate"),m.Xb(4,"mat-autocomplete",34,35),m.Mc(6,lo,2,2,"mat-option",10),m.kc(7,"async"),m.Wb(),m.Wb(),m.Wb()),2&o){const o=m.Ac(5),i=m.jc(3);m.Eb(2),m.qc("placeholder",m.lc(3,5,"NEWPROMOTION.PRODUCT")),m.pc("formControl",i.editorProducto)("matAutocomplete",o),m.Eb(2),m.pc("displayWith",i.displayFnProductos),m.Eb(2),m.pc("ngForOf",m.lc(7,7,i.filteredProductos))}}function po(o,i){if(1&o&&(m.Xb(0,"div"),m.Mc(1,ao,3,1,"div",1),m.Mc(2,ho,8,9,"section",1),m.Wb()),2&o){const o=m.jc(2);m.Eb(1),m.pc("ngIf",0==o.dto4id||2==o.dto4id),m.Eb(1),m.pc("ngIf",0==o.dto4id||2==o.dto4id)}}function bo(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",null==o?null:o.sfamilia," ")}}function mo(o,i){if(1&o){const o=m.Yb();m.Xb(0,"div"),m.Xb(1,"mat-form-field",8),m.Xb(2,"mat-label"),m.Oc(3),m.kc(4,"translate"),m.Wb(),m.Xb(5,"mat-select",9),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc(2).editorFamilia=i}),m.Mc(6,bo,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb()}if(2&o){const o=m.jc(2);m.Eb(3),m.Pc(m.lc(4,3,"NEWPROMOTION.FAMILY")),m.Eb(2),m.pc("ngModel",o.editorFamilia),m.Eb(1),m.pc("ngForOf",o.listaFamilias)}}function uo(o,i){if(1&o){const o=m.Yb();m.Xb(0,"div"),m.Mc(1,ro,2,2,"mat-form-field",38),m.Xb(2,"section"),m.Xb(3,"mat-form-field",8),m.Xb(4,"mat-label"),m.Oc(5),m.kc(6,"translate"),m.Wb(),m.Xb(7,"mat-select",24),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc().dto4=i})("selectionChange",function(i){return m.Dc(o),m.jc().elegirTipoDto4Event(i.value)}),m.Mc(8,so,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb(),m.Mc(9,po,3,2,"div",1),m.Mc(10,mo,7,5,"div",1),m.Wb()}if(2&o){const o=m.jc();m.Eb(1),m.pc("ngIf",4==o.editorPromocionIndex||6==o.editorPromocionIndex||8==o.editorPromocionIndex),m.Eb(4),m.Pc(m.lc(6,6,"NEWPROMOTION.TYPE")),m.Eb(2),m.pc("ngModel",o.dto4),m.Eb(1),m.pc("ngForOf",o.tiposDto4),m.Eb(1),m.pc("ngIf",8!=o.editorPromocionIndex),m.Eb(1),m.pc("ngIf",1==o.dto4id)}}function fo(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc(" ",null==o?null:o.snombre," ")}}function go(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc(" ",null==o?null:o.snombre," ")}}function Po(o,i){if(1&o&&(m.Xb(0,"section"),m.Xb(1,"mat-form-field",8),m.Sb(2,"input",33),m.kc(3,"translate"),m.Xb(4,"mat-autocomplete",34,35),m.Mc(6,go,2,2,"mat-option",10),m.kc(7,"async"),m.Wb(),m.Wb(),m.Wb()),2&o){const o=m.Ac(5),i=m.jc(2);m.Eb(2),m.qc("placeholder",m.lc(3,5,"NEWPROMOTION.PRODUCT")),m.pc("formControl",i.editorProducto1)("matAutocomplete",o),m.Eb(2),m.pc("displayWith",i.displayFnProductos),m.Eb(2),m.pc("ngForOf",m.lc(7,7,i.filteredProductos1))}}function Eo(o,i){if(1&o){const o=m.Yb();m.Xb(0,"div"),m.Xb(1,"mat-form-field",11),m.Xb(2,"input",40),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc().dto5input1=i}),m.kc(3,"translate"),m.Wb(),m.Wb(),m.Xb(4,"div"),m.Xb(5,"label"),m.Oc(6),m.Wb(),m.Wb(),m.Xb(7,"section"),m.Xb(8,"mat-form-field",8),m.Sb(9,"input",33),m.kc(10,"translate"),m.Xb(11,"mat-autocomplete",34,35),m.Mc(13,fo,2,2,"mat-option",10),m.kc(14,"async"),m.Wb(),m.Wb(),m.Wb(),m.Xb(15,"mat-form-field",11),m.Xb(16,"input",40),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc().dto5input2=i}),m.kc(17,"translate"),m.Wb(),m.Wb(),m.Xb(18,"div"),m.Xb(19,"label"),m.Oc(20),m.Wb(),m.Wb(),m.Mc(21,Po,8,9,"section",1),m.Wb()}if(2&o){const o=m.Ac(12),i=m.jc();m.Eb(2),m.qc("placeholder",m.lc(3,12,"NEWPROMOTION.EACH")),m.pc("ngModel",i.dto5input1),m.Eb(4),m.Pc(i.editorProducto.snombre),m.Eb(3),m.qc("placeholder",m.lc(10,14,"NEWPROMOTION.PRODUCT")),m.pc("formControl",i.editorProducto)("matAutocomplete",o),m.Eb(2),m.pc("displayWith",i.displayFnProductos),m.Eb(2),m.pc("ngForOf",m.lc(14,16,i.filteredProductos)),m.Eb(3),m.qc("placeholder",m.lc(17,18,"NEWPROMOTION.EACH")),m.pc("ngModel",i.dto5input2),m.Eb(4),m.Pc(i.editorProducto1.snombre),m.Eb(1),m.pc("ngIf",0==i.dto0id)}}function Oo(o,i){if(1&o){const o=m.Yb();m.Xb(0,"section"),m.Xb(1,"mat-form-field",11),m.Xb(2,"input",41),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc().dto5input3=i}),m.Wb(),m.Wb(),m.Wb()}if(2&o){const o=m.jc();m.Eb(2),m.pc("ngModel",o.dto5input3)}}function Mo(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",o," ")}}function vo(o,i){if(1&o&&(m.Xb(0,"mat-option",32),m.Oc(1),m.Wb()),2&o){const o=i.$implicit;m.pc("value",o),m.Eb(1),m.Qc("",o," ")}}function Wo(o,i){if(1&o){const o=m.Yb();m.Xb(0,"section"),m.Xb(1,"mat-form-field",8),m.Xb(2,"mat-label"),m.Oc(3),m.kc(4,"translate"),m.Wb(),m.Xb(5,"mat-select",24),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc(2).porcentajemonto=i})("selectionChange",function(i){return m.Dc(o),m.jc(2).elegirTipoPorcentajeMontoEvent(i.value)}),m.Mc(6,vo,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb()}if(2&o){const o=m.jc(2);m.Eb(3),m.Pc(m.lc(4,3,"NEWPROMOTION.PERCENTAGE/AMOUNT")),m.Eb(2),m.pc("ngModel",o.porcentajemonto),m.Eb(1),m.pc("ngForOf",o.tiposPorcentajeMonto)}}function Io(o,i){if(1&o){const o=m.Yb();m.Xb(0,"div"),m.Xb(1,"section"),m.Xb(2,"mat-form-field",8),m.Xb(3,"mat-label"),m.Oc(4),m.kc(5,"translate"),m.Wb(),m.Xb(6,"mat-select",24),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc().dtorecargo=i})("selectionChange",function(i){return m.Dc(o),m.jc().elegirTipoDtoRecargoEvent(i.value)}),m.Mc(7,Mo,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb(),m.Mc(8,Wo,7,5,"section",1),m.Xb(9,"mat-form-field",11),m.Xb(10,"input",40),m.fc("ngModelChange",function(i){return m.Dc(o),m.jc().dtorecargoinput=i}),m.kc(11,"translate"),m.Wb(),m.Wb(),m.Wb()}if(2&o){const o=m.jc();m.Eb(4),m.Pc(m.lc(5,6,"NEWPROMOTION.DISCOUNT/SURCHARGE")),m.Eb(2),m.pc("ngModel",o.dtorecargo),m.Eb(1),m.pc("ngForOf",o.tiposDtoRecargo),m.Eb(1),m.pc("ngIf",3==o.editorPromocionIndex||6==o.editorPromocionIndex||7==o.editorPromocionIndex||9==o.editorPromocionIndex),m.Eb(2),m.qc("placeholder",m.lc(11,8,"NEWPROMOTION.AMOUNT")),m.pc("ngModel",o.dtorecargoinput)}}const To=function(){return["/products/promotions/"]},Do=[{path:"",component:(()=>{class o{constructor(o,i,t,e,c,r,s,a,d){this.servicioProductos=o,this.servicioUUID=i,this.route=t,this.servicioNuevaPromocion=e,this.servicioEmpresas=c,this.servicioClientes=r,this.loader=s,this.snack=a,this.router=d,this.formInicio=new n.e,this.formFin=new n.e,this.listaPreciosSelecIndex=0,this.promocionSelec=0,this.editorCliente=new n.e(""),this.editorProducto=new n.e(""),this.editorProducto1=new n.e(""),this.formImagenPromocion="",this.mostrarEditor=!1,this.modoEdicion=!1,this.fileName="",this.empresas=[],this.listadeprecios=[],this.listaPreciosSelecIndex=0,this.checkAplicaSobreElPrecio="F",this.listaClientes=[],this.listaTipoClientes=[],this.promociones=[],this.promocionSelec=0,this.tiposPromociones=["General - Descuento por cliente","General - Descuento por medio de pago","General - Descuento por monto","Por Producto - Descuento por Producto","Por Producto - Promocion AxB","Por Producto - Promocion A + B","Por Producto - Descuento variable por cantidad","Por Producto - Descuento fijo","Por Producto - Promocion AxB mas barato","Global - Cantidad / Bulto"],this.tiposDto0=["Cliente","Tipos de cliente"],this.tiposDto1=["Medio de pago"],this.tiposDto3=["Producto","Familia de producto","Bulto"],this.tiposDto4=this.tiposDto3,this.tiposDtoRecargo=["Descuento","Recargo"],this.tiposPorcentajeMonto=["%","$"],this.tiposMedioDePago=["Efectivo"],this.tiposDto9=["Unidades","Bulto"]}fileExist(o){const i=o.target.files[0];i&&(this.fileName=i.name)}placeholderText(){switch(this.editorPromocionIndex){case 4:case 6:return"Cada";case 8:return"Llevando"}}_filterClientes(o){if("string"==typeof o){const i=o.toLowerCase();return this.listaClientes.filter(o=>o.srazonsocial.toLowerCase().includes(i))}return[]}displayFnClientes(o){return o&&o.srazonsocial?o.srazonsocial:""}_filterProductos(o){if("string"==typeof o){const i=o.toLowerCase();return this.listaProductos.filter(o=>o.snombre.toLowerCase().includes(i))}return[]}displayFnProductos(o){return o&&o.snombre?o.snombre:""}ngOnInit(){this.filteredClientes=this.editorCliente.valueChanges.pipe(Object(a.a)(""),Object(d.a)(o=>this._filterClientes(o))),this.filteredProductos=this.editorProducto.valueChanges.pipe(Object(a.a)(""),Object(d.a)(o=>this._filterProductos(o))),this.filteredProductos1=this.editorProducto1.valueChanges.pipe(Object(a.a)(""),Object(d.a)(o=>this._filterProductos(o)));var o=new Date;o.setHours(0,0,0,0);var i=new Date;i.setDate(1),i.setMonth(0),i.setFullYear(2050),i.setHours(23,59,59,999),this.formInicio.setValue(o),this.formFin.setValue(i),this.loader.open(),this.servicioProductos.traerProductos("",()=>{this.listaProductos=this.servicioProductos.listaProductos,Object(s.a)([this.servicioEmpresas.obtenerEmpresas(),this.servicioNuevaPromocion.obtenerSucursales(),this.servicioClientes.traerClientes(),this.servicioClientes.obtenerTiposClientes(),this.servicioNuevaPromocion.obtenerFamilias(),this.servicioNuevaPromocion.obtenerTiposCondPago()]).subscribe(o=>{this.empresas=o[0],this.listadeprecios=["Todas"];for(var i=parseInt(this.empresas[0].icantidadlistasdeprecios),t=1;t<=i;t++)this.listadeprecios.push("Lista "+t);this.listaSucursales=[{idsucursal:-1,sdescripcion:"Todas"}],this.listaSucursales=this.listaSucursales.concat(o[1]),this.listaClientes=o[2],this.listaTipoClientes=o[3],this.listaFamilias=o[4],this.listaTiposCondPago=o[5],this.loader.close();const e=this.route.snapshot.paramMap.get("id");e?this.servicioNuevaPromocion.obtenerPromocion(e).subscribe(o=>{this.editarPromocion(o)}):(this.nuevaPromocion(),this.elegirTipoPromocion(0))})})}enviarImagenPromocion(){var o=new XMLHttpRequest;o.open("POST","https://api.posberry.com/api/aws/upload"),o.onload=o=>{var i=JSON.parse(o.target.response).cdnGoogle.replace("__WIDTH__","500");this.formImagenPromocion=i,this.formGuardar()};var i=new FormData(document.getElementById("myFormPromocion"));o.send(i)}elegirListadoDePrecios(o){this.listaPreciosSelecIndex=o,this.listaPreciosValue=this.listadeprecios[o]}elegirListadoDePreciosEvent(o){this.elegirListadoDePrecios(this.listadeprecios.indexOf(o))}puede_editar(){return!0}puede_agregar(){return!0}elegirTipoPromocion(o){this.promocionSelec=o,this.formPromocion=this.tiposPromociones[o],this.cambiarOpciones()}elegirTipoDto0(o){this.dto0id=o,this.dto0=this.tiposDto0[o]}elegirTipoDto0Event(o){this.elegirTipoDto0(this.tiposDto0.indexOf(o))}elegirTipoDto1(o){this.dto1id=o,this.dto1=this.tiposDto1[o]}elegirTipoDto1Event(o){this.elegirTipoDto1(this.tiposDto1.indexOf(o))}elegirTipoDto3(o){this.dto3id=o,this.dto3=this.tiposDto3[o]}elegirTipoDto3Event(o){this.elegirTipoDto3(this.tiposDto3.indexOf(o))}elegirTipoDto4(o){this.dto4id=o,this.dto4=this.tiposDto4[o]}elegirTipoDto4Event(o){this.elegirTipoDto4(this.tiposDto4.indexOf(o))}elegirTipoDto9(o){2==o&&(o=1),this.dto9id=o,this.dto9=this.tiposDto9[o]}elegirTipoDto9Event(o){this.elegirTipoDto9(this.tiposDto9.indexOf(o))}elegirTipoDtoRecargo(o){this.dtorecargoid=o,this.dtorecargo=this.tiposDtoRecargo[o]}elegirTipoDtoRecargoEvent(o){this.elegirTipoDtoRecargo(this.tiposDtoRecargo.indexOf(o))}elegirTipoPorcentajeMonto(o){this.porcentajemontoid=o,this.porcentajemonto=this.tiposPorcentajeMonto[o]}elegirTipoPorcentajeMontoEvent(o){this.elegirTipoPorcentajeMonto(this.tiposPorcentajeMonto.indexOf(o))}cambiarOpciones(){this.promocionesFiltro=[];for(var o=0;o<this.promociones.length;o++)this.mostrarItem(this.promociones[o])&&this.promocionesFiltro.push(this.promociones[o])}nuevaPromocion(){this.mostrarEditor=!0,this.modoEdicion=!1,this.promocion={bactivo:"T",itipo:0,blunes:"T",bmartes:"T",bmiercoles:"T",bjueves:"T",bviernes:"T",bsabado:"T",bdomingo:"T",idsucursal:-1,fvigenciadesde:(new Date).toISOString(),fvigenciahasta:new Date(2050,11,31,23,59,59).toISOString(),bonif1idref:null,bonif1itiporef:0,bonif1rcantidad:0,bonif1rmonto:0,bonif1rporcentaje:0,cond1idref:null,cond1itiporef:0,cond1rcantidad:0,cond1rcantidadhasta:0,cond1rmonto:0,cond1rmontohasta:0,cond2idref:null,cond2itiporef:0,cond2rcantidad:0,cond2rcantidadhasta:0,cond2rmonto:0,cond2rmontohasta:0,id:this.servicioUUID.generateUUID(),idempresa:"",sdescripcion:"",sleyendaticket:"",ilistadeprecios:0,baplicasobreelprecio:"F",surlimage1:""},this.asignarValores(this.promocion)}editarPromocion(o){this.promocion={},Object.assign(this.promocion,o),this.mostrarEditor=!0,this.asignarValores(this.promocion),this.modoEdicion=!0}asignarValores(o){this.checkActiva="T"==o.bactivo,this.descripcion=o.sdescripcion,this.checkLunes="T"==o.blunes,this.checkMartes="T"==o.bmartes,this.checkMiercoles="T"==o.bmiercoles,this.checkJueves="T"==o.bjueves,this.checkViernes="T"==o.bviernes,this.checkSabado="T"==o.bsabado,this.checkDomingo="T"==o.bdomingo,this.leyendaTicket=o.sleyendaticket,this.checkAplicaSobreElPrecio="T"==o.baplicasobreelprecio,this.elegirListadoDePrecios(parseInt(o.ilistadeprecios?o.ilistadeprecios:0)),this.elegirTipoPromocionEditor(o.itipo);var i=new Date(o.fvigenciadesde);this.formInicio.setValue(i);var t=new Date(o.fvigenciahasta);switch(this.formFin.setValue(t),this.sucursalSelect=this.listaSucursales.find(i=>i.idsucursal==o.idsucursal),this.sucursalSelect||(this.sucursalSelect=this.listaSucursales[0]),this.formImagenPromocion=o.surlimage1,this.dto5input3=o.bonif1rmonto?o.bonif1rmonto:o.bonif1rcantidad,this.dtorecargoinput=o.bonif1rporcentaje,this.elegirTipoPorcentajeMonto(0),0==this.dtorecargoinput&&0!=o.bonif1rmonto&&(this.dtorecargoinput=o.bonif1rmonto,this.elegirTipoPorcentajeMonto(1)),o.cond1itiporef){case 0:o.cond1itiporef=0;break;case 1:o.cond1itiporef=1;break;case 2:o.cond1itiporef=0;break;case 3:o.cond1itiporef=1;break;case 4:o.cond1itiporef=0;break;case 5:o.cond1itiporef=1;break;case 6:o.cond1itiporef=2}this.elegirTipoDto0(o.cond1itiporef),this.elegirTipoDto1(o.bonif1itiporef),this.elegirTipoDto3(o.cond1itiporef),this.elegirTipoDto4(o.cond1itiporef),this.elegirTipoDto9(o.cond1itiporef),this.dto4input=o.cond1rcantidad,this.dto5input1=o.cond1rcantidad,this.dto9input=o.cond1rcantidad,this.dto2input=o.cond1rmonto,this.dto5input2=o.cond2rcantidad,this.elegirTipoMedioDto1(0),this.elegirTipoMedioDto1a(0),0==this.editorPromocionIndex&&(0==this.dto0id?(this.elegirTipoClienteID(""),this.elegirClienteID(o.bonif1idref)):(this.elegirClienteID(""),this.elegirTipoClienteID(o.bonif1idref))),1==this.editorPromocionIndex&&(this.elegirTipoMedioDto1(o.cond1itiporef),this.elegirTipoMedioDto1aID(o.bonif1idref)),this.dtorecargoinput>=0?this.elegirTipoDtoRecargo(0):(this.elegirTipoDtoRecargo(1),this.dtorecargoinput=-this.dtorecargoinput),3==this.editorPromocionIndex&&(0==this.dto3id?(this.elegirFamiliaID(""),this.elegirProductoID(o.bonif1idref)):(this.elegirFamiliaID(o.bonif1idref),this.elegirProductoID(""))),4!=this.editorPromocionIndex&&6!=this.editorPromocionIndex&&7!=this.editorPromocionIndex&&8!=this.editorPromocionIndex||(0==this.dto4id||2==this.dto4id?(this.elegirFamiliaID(""),this.elegirProductoID(o.bonif1idref)):(this.elegirFamiliaID(o.bonif1idref),this.elegirProductoID(""))),5==this.editorPromocionIndex&&(this.elegirProductoID(o.bonif1idref),this.elegirProducto1ID(o.cond2idref)),this.editorFamilia||(this.editorFamilia=this.listaFamilias[0])}popup1(){this.popup1Opened=!0}popup2(){this.popup2Opened=!0}formatoFecha(o){var i=new Date(o);return i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear()}elegirTipoPromocionEditor(o){this.editorPromocionIndex=o,this.editorPromocion=this.tiposPromociones[o]}elegirTipoPromocionEditorEvent(o){this.elegirTipoPromocionEditor(this.tiposPromociones.indexOf(o))}elegirClienteID(o){this.editorCliente.setValue(this.listaClientes[0]);for(var i=0;i<this.listaClientes.length;i++)if(this.listaClientes[i].id==o)return this.editorCliente.setValue(this.listaClientes[i]),0}elegirTipoCliente(o){this.editorTipoCliente=this.listaTipoClientes[o]}elegirTipoClienteID(o){this.editorTipoCliente=this.listaTipoClientes[0];for(var i=0;i<this.listaTipoClientes.length;i++)if(this.listaTipoClientes[i].id==o)return this.editorTipoCliente=this.listaTipoClientes[i],0}elegirFamilia(o){this.editorFamilia=this.listaFamilias[o]}elegirFamiliaID(o){this.editorFamilia=this.listaFamilias[0];for(var i=0;i<this.listaFamilias.length;i++)if(this.listaFamilias[i].id==o)return this.editorFamilia=this.listaFamilias[i],0}elegirProductoID(o){this.editorProducto.setValue(this.listaProductos[0]);for(var i=0;i<this.listaProductos.length;i++)if(this.listaProductos[i].id==o)return this.editorProducto.setValue(this.listaProductos[i]),0}elegirProducto1ID(o){this.editorProducto1.setValue(this.listaProductos[0]);for(var i=0;i<this.listaProductos.length;i++)if(this.listaProductos[i].id==o)return this.editorProducto1.setValue(this.listaProductos[i]),0}elegirTipoMedioDto1(o){this.medioDto1id=o,this.medioDto1=this.tiposMedioDePago[o]}elegirTipoMedioDto1Event(o){this.elegirTipoMedioDto1(this.tiposMedioDePago.indexOf(o))}elegirTipoMedioDto1a(o){this.medioDto1a=this.listaTiposCondPago[o]}elegirTipoMedioDto1aID(o){this.medioDto1a=this.listaTiposCondPago[0];for(var i=0;i<this.listaTiposCondPago.length;i++)if(this.listaTiposCondPago[i].id==o)return this.medioDto1a=this.listaTiposCondPago[i],0}formCancelar(){this.mostrarEditor=!1}puede_eliminar(){return this.modoEdicion}formGuardar(){this.promocion.surlimage1=this.formImagenPromocion,this.promocion.bactivo=this.checkActiva?"T":"F",this.promocion.sdescripcion=this.descripcion,this.promocion.blunes=this.checkLunes?"T":"F",this.promocion.bmartes=this.checkMartes?"T":"F",this.promocion.bmiercoles=this.checkMiercoles?"T":"F",this.promocion.bjueves=this.checkJueves?"T":"F",this.promocion.bviernes=this.checkViernes?"T":"F",this.promocion.bsabado=this.checkSabado?"T":"F",this.promocion.bdomingo=this.checkDomingo?"T":"F",this.promocion.sleyendaticket=this.leyendaTicket,this.promocion.itipo=this.editorPromocionIndex;var o=this.formInicio.value;o.setHours(0,0,0,0);var i=this.formFin.value;i.setHours(23,59,59,999),this.promocion.fvigenciadesde=o.toISOString(),this.promocion.fvigenciahasta=i.toISOString(),this.promocion.idsucursal=parseInt(this.sucursalSelect.idsucursal),this.promocion.baplicasobreelprecio=4!=this.editorPromocionIndex&&8!=this.editorPromocionIndex&&this.checkAplicaSobreElPrecio?"T":"F",this.promocion.ilistadeprecios=this.listaPreciosSelecIndex,this.promocion.bonif1rporcentaje=0==this.dtorecargoid?this.dtorecargoinput:-this.dtorecargoinput,0==this.editorPromocionIndex&&(this.promocion.cond1itiporef=this.dto0id,1==this.dto0id?(this.promocion.bonif1idref=this.editorTipoCliente.id,this.promocion.cond1idref=this.editorTipoCliente.id,this.promocion.cond2idref=this.editorTipoCliente.id):(this.promocion.bonif1idref=this.editorCliente.value.id,this.promocion.cond1idref=this.editorCliente.value.id,this.promocion.cond2idref=this.editorCliente.value.id)),1==this.editorPromocionIndex&&(this.promocion.bonif1itiporef=this.dto1id,0==this.dto1id?this.promocion.cond1itiporef=this.medioDto1id+2:this.promocion.bonif1idref=this.medioDto1a.id),2==this.editorPromocionIndex&&(this.promocion.bonif1rmonto=this.dto2input,this.promocion.bonif1rcantidad=this.dto2input,this.promocion.cond1rmonto=this.dto2input,this.promocion.cond1rcantidad=this.dto2input,this.promocion.cond1rmontohasta=this.dto2input,this.promocion.cond1rcantidadhasta=this.dto2input),3!=this.editorPromocionIndex&&7!=this.editorPromocionIndex||(0==this.dto3id||2==this.dto3id?(this.promocion.bonif1idref=this.editorProducto.value.id,this.promocion.cond1idref=this.editorProducto.value.id,this.promocion.cond2idref=this.editorProducto.value.id):(this.promocion.bonif1idref=this.editorFamilia.id,this.promocion.cond1idref=this.editorFamilia.id,this.promocion.cond2idref=this.editorFamilia.id),this.promocion.bonif1itiporef=this.dto3id,this.promocion.bonif1rmonto=this.dtorecargoinput,this.promocion.bonif1rcantidad=this.dtorecargoinput,this.promocion.bonif1rporcentaje=this.dtorecargoinput,this.promocion.cond1itiporef=this.dto3id+4,this.promocion.cond1rmonto=this.dtorecargoinput,this.promocion.cond1rcantidad=this.dtorecargoinput,this.promocion.cond1rmontohasta=this.dtorecargoinput,this.promocion.cond1rcantidadhasta=this.dtorecargoinput),4!=this.editorPromocionIndex&&6!=this.editorPromocionIndex&&8!=this.editorPromocionIndex||(0==this.dto4id||2==this.dto4id?(this.promocion.bonif1idref=this.editorProducto.value.id,this.promocion.cond1idref=this.editorProducto.value.id,this.promocion.cond2idref=this.editorProducto.value.id):(this.promocion.bonif1idref=this.editorFamilia.id,this.promocion.cond1idref=this.editorFamilia.id,this.promocion.cond2idref=this.editorFamilia.id),this.promocion.bonif1itiporef=this.dto4id+4,this.promocion.bonif1rmonto=this.dto5input3,this.promocion.bonif1rcantidad=this.dto5input3,this.promocion.cond1itiporef=this.dto4id+4,this.promocion.cond1rmonto=this.dto4input,this.promocion.cond1rcantidad=this.dto4input,this.promocion.cond1rmontohasta=this.dto4input,this.promocion.cond1rcantidadhasta=this.dto4input),5==this.editorPromocionIndex&&(this.promocion.bonif1idref=this.editorProducto.value.id,this.promocion.cond1idref=this.editorProducto.value.id,this.promocion.cond2idref=this.editorProducto1.value.id,this.promocion.bonif1rmonto=this.dto5input3,this.promocion.cond1rcantidad=this.dto5input1,this.promocion.cond2rcantidad=this.dto5input2,this.promocion.cond1itiporef=4,this.promocion.cond2itiporef=4),3!=this.editorPromocionIndex&&6!=this.editorPromocionIndex&&7!=this.editorPromocionIndex&&9!=this.editorPromocionIndex||(this.promocion.bonif1rporcentaje=0==this.porcentajemontoid?this.dtorecargoinput:0,this.promocion.bonif1rmonto=1==this.porcentajemontoid?this.dtorecargoinput:0),9==this.editorPromocionIndex&&(this.promocion.bonif1rcantidad=this.dto9input,0==this.dto9id?(this.promocion.cond1itiporef=4,this.promocion.bonif1itiporef=4):(this.promocion.cond1itiporef=6,this.promocion.bonif1itiporef=6),this.promocion.cond1rcantidad=this.dto9input,this.promocion.cond1rcantidadhasta=this.dto9input),this.promocion.sdescripcion?this.promocion.sleyendaticket?(this.loader.open(),this.modoEdicion?this.servicioNuevaPromocion.actualizarPromocion(this.promocion).subscribe(o=>{this.loader.close(),this.snack.open("\xa1Promoci\xf3n Actualizada!","OK",{duration:4e3}),this.router.navigateByUrl("products/promotions")},o=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})}):(this.promocion.idempresa=this.empresas[0].id,this.servicioNuevaPromocion.agregarPromocion(this.promocion).subscribe(o=>{this.loader.close(),this.snack.open("\xa1Promoci\xf3n Guardada!","OK",{duration:4e3}),this.router.navigateByUrl("products/promotions")},o=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})}))):this.snack.open('ERROR: Por favor llene el campo "Leyenda Ticket" antes de guardar.',"OK",{duration:4e3}):this.snack.open('ERROR: Por favor llene el campo "Descripci\xf3n" antes de guardar.',"OK",{duration:4e3})}mostrarItem(o){var i,t,e;if(i=!this.checkTipo||o.itipo==this.promocionSelec,t=!this.checkSolamenteActivas||"T"==o.bactivo,this.checkSolamenteVigentes){var n=(new Date).valueOf(),c=new Date(o.fvigenciadesde).valueOf(),r=new Date(o.fvigenciahasta).valueOf();e=n>=c&&n<=r}else e=!0;return i&&t&&e}querySearchCliente(o){if(""==o)return this.listaClientes;var i=[];o=(o=o.toLowerCase()).split(" ");for(var t=0;t<this.listaClientes.length;t++){for(var e=this.listaClientes[t].scodcliente+" - "+this.listaClientes[t].srazonsocial.toLowerCase(),n=!0,c=0;c<o.length;c++)if(-1==e.indexOf(o[c])){n=!1;break}n&&i.push(this.listaClientes[t])}return i}querySearchProducto(o){if(""==o)return this.listaProductos;var i=[];o=(o=o.toLowerCase()).split(" ");for(var t=0;t<this.listaProductos.length;t++){for(var e=this.listaProductos[t].scodproducto+" - "+this.listaProductos[t].snombre.toLowerCase(),n=!0,c=0;c<o.length;c++)if(-1==e.indexOf(o[c])){n=!1;break}n&&i.push(this.listaProductos[t])}return i}getPorcentajeMontoStr(){return 0==this.porcentajemontoid?this.dtorecargoinput+this.porcentajemonto:this.porcentajemonto+this.dtorecargoinput}actualizarLeyendaFinal(){switch(this.LeyendaFinal="",this.editorPromocionIndex){case 0:this.LeyendaFinal=0==this.dto0id?"Al Cliente ["+this.editorCliente.value.srazonsocial+"] ":"Al Tipo de Cliente ["+this.editorTipoCliente.stipocliente+"] ",this.LeyendaFinal+="aplicar un "+this.dtorecargoinput+"% de "+this.dtorecargo;break;case 1:this.LeyendaFinal=0==this.dto1id?"Al Medio de Pago ["+this.medioDto1+"] ":"A la Condici\xf3n de Venta ["+this.medioDto1a.sdescripcion+"] ",this.LeyendaFinal+="aplicar un "+this.dtorecargoinput+"% de "+this.dtorecargo;break;case 2:this.LeyendaFinal="Por un monto mayor o igual a ["+this.dto2input+"] aplicar un "+this.dtorecargoinput+"% de "+this.dtorecargo;break;case 3:0==this.dto3id&&(this.LeyendaFinal="Al Producto ["+this.editorProducto.value.snombre+"] "),1==this.dto3id&&(this.LeyendaFinal="A la Familia ["+this.editorFamilia.sfamilia+"] "),2==this.dto3id&&(this.LeyendaFinal="Al Bulto ["+this.editorProducto.value.snombre+"] "),this.LeyendaFinal+="aplicar "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo;break;case 4:0==this.dto4id&&(this.LeyendaFinal="Por Cada "+this.dto4input+" UN. Producto ["+this.editorProducto.value.snombre+"] "),1==this.dto4id&&(this.LeyendaFinal="Por Cada "+this.dto4input+" UN. de la Familia ["+this.editorFamilia.sfamilia+"] "),2==this.dto4id&&(this.LeyendaFinal="Por Cada "+this.dto4input+" UN. Bulto ["+this.editorProducto.value.snombre+"] "),this.LeyendaFinal+="Bonificar "+this.dto5input3+" UN.";break;case 5:this.LeyendaFinal="Por Cada "+this.dto5input1+" UN. ["+this.editorProducto.value.snombre+"] "+this.dto5input2+" UN. ["+this.editorProducto1.value.snombre+"] aplicar un "+this.dtorecargoinput+"% de "+this.dtorecargo;break;case 6:0==this.dto4id&&(this.LeyendaFinal="Cada "+this.dto4input+" UN. de ["+this.editorProducto.value.snombre+"] "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo),1==this.dto4id&&(this.LeyendaFinal="Cada "+this.dto4input+" UN. de ["+this.editorFamilia.sfamilia+"] "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo),2==this.dto4id&&(this.LeyendaFinal="Cada "+this.dto4input+" UN. de ["+this.editorProducto.value.snombre+"] "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo);break;case 7:this.LeyendaFinal=0==this.dto4id||2==this.dto4id?"Comprando ["+this.editorProducto.value.snombre+"] "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo:"Comprando ["+this.editorFamilia.sfamilia+"] "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo;break;case 8:0==this.dto4id&&(this.LeyendaFinal="Llevando "+this.dto4input+" (o m\xe1s) de cualquier producto "),1==this.dto4id&&(this.LeyendaFinal="Llevando "+this.dto4input+" (o m\xe1s) de la Familia ["+this.editorFamilia.sfamilia+"] "),2==this.dto4id&&(this.LeyendaFinal="Llevando "+this.dto4input+" (o m\xe1s) Bulto de cualquier producto "),this.LeyendaFinal+="Bonificar "+this.dto5input3+" de los productos mas baratos";break;case 9:this.LeyendaFinal=0==this.dto9id?"Llevando "+this.dto9input+" (o m\xe1s) unidades de productos iguales aplicar "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo:"Llevando "+this.dto9input+" (o m\xe1s) bultos de productos iguales aplicar "+this.getPorcentajeMontoStr()+" de "+this.dtorecargo}return this.LeyendaFinal}}return o.\u0275fac=function(i){return new(i||o)(m.Rb(p.a),m.Rb(r.a),m.Rb(g.a),m.Rb(f),m.Rb(h.a),m.Rb(l.a),m.Rb(c.a),m.Rb(P.a),m.Rb(g.g))},o.\u0275cmp=m.Lb({type:o,selectors:[["app-new-promotion"]],decls:124,vars:129,consts:[[1,"mb-16",3,"ngModel","ngModelChange"],[4,"ngIf"],["id","myFormPromocion","method","post","enctype","multipart/form-data","autocomplete","off"],[3,"hidden"],["type","file","color","primary","name","image","accept","image/*",1,"mb-16",3,"change"],["fileUpload",""],["mat-raised-button","","color","primary",1,"m-8",3,"click"],["mat-raised-button","","type","submit","color","primary","value","Upload Image","name","submit",1,"mb-16",3,"click"],["appearance","fill","fxFlex","100","fxFlex.gt-xs","50"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"full-width"],["matInput","","name","descripcion","maxlength","250",3,"ngModel","placeholder","ngModelChange"],["matInput","","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["appearance","fill",1,"mr-16"],["matInput","",3,"ngxMatDatetimePicker","placeholder","formControl"],["matSuffix","",3,"for"],[3,"showSpinners","showSeconds","stepHour","stepMinute","stepSecond","touchUi","color","enableMeridian","disableMinute","hideTime"],["picker",""],["appearance","fill"],["picker2",""],[1,"ml-16","mb-16",3,"ngModel","ngModelChange"],[3,"ngModel","disabled","ngModelChange","selectionChange"],["class","mb-16",3,"ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelChange","selectionChange"],[1,"mb-16",3,"textContent"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"mt-16"],["mat-raised-button","","color","primary",3,"click"],["fxFlex",""],["mat-button","","color","warn","type","button",1,"ml-16",3,"routerLink"],["width","320","height","auto",3,"src"],[3,"value"],["type","text","aria-label","Number","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith"],["auto","matAutocomplete"],["matInput","","type","number","min","0",3,"ngModel","placeholder","ngModelChange"],["matInput","","type","number","placeholder","{{'NEWPROMOTION.AMOUNTGREATERTHANOREQUALTO' | translate}","min","0",3,"ngModel","ngModelChange"],["class","full-width",4,"ngIf"],["matInput","","type","number","step","any","min","0",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["matInput","","type","number","step","any","min","0",3,"ngModel","placeholder","ngModelChange"],["matInput","","type","number","step","any","min","0",3,"ngModel","ngModelChange"]],template:function(o,i){if(1&o){const o=m.Yb();m.Xb(0,"mat-card"),m.Xb(1,"mat-card-content"),m.Xb(2,"section"),m.Xb(3,"mat-checkbox",0),m.fc("ngModelChange",function(o){return i.checkActiva=o}),m.Oc(4),m.kc(5,"translate"),m.Wb(),m.Wb(),m.Xb(6,"section"),m.Xb(7,"label"),m.Oc(8),m.kc(9,"translate"),m.Wb(),m.Mc(10,F,2,1,"div",1),m.Wb(),m.Xb(11,"form",2),m.Xb(12,"div",3),m.Xb(13,"input",4,5),m.fc("change",function(o){return i.fileExist(o)}),m.Wb(),m.Wb(),m.Xb(15,"div",3),m.Oc(16),m.kc(17,"translate"),m.Xb(18,"button",6),m.fc("click",function(){return m.Dc(o),m.Ac(14).click()}),m.Xb(19,"mat-icon"),m.Oc(20,"attach_file"),m.Wb(),m.Oc(21),m.kc(22,"translate"),m.Wb(),m.Wb(),m.Xb(23,"div",3),m.Oc(24),m.kc(25,"translate"),m.Xb(26,"button",7),m.fc("click",function(){return i.enviarImagenPromocion()}),m.Xb(27,"mat-icon"),m.Oc(28,"cloud_upload"),m.Wb(),m.Oc(29),m.kc(30,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(31,"section"),m.Xb(32,"mat-form-field",8),m.Xb(33,"mat-label"),m.Oc(34),m.kc(35,"translate"),m.Wb(),m.Xb(36,"mat-select",9),m.fc("ngModelChange",function(o){return i.sucursalSelect=o}),m.Mc(37,R,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb(),m.Xb(38,"section"),m.Xb(39,"mat-form-field",11),m.Xb(40,"input",12),m.fc("ngModelChange",function(o){return i.descripcion=o}),m.kc(41,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(42,"section"),m.Xb(43,"mat-form-field",11),m.Xb(44,"input",13),m.fc("ngModelChange",function(o){return i.leyendaTicket=o}),m.kc(45,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Xb(46,"section"),m.Xb(47,"label"),m.Oc(48),m.kc(49,"translate"),m.Wb(),m.Wb(),m.Xb(50,"section"),m.Xb(51,"mat-form-field",14),m.Sb(52,"input",15),m.kc(53,"translate"),m.Sb(54,"mat-datepicker-toggle",16),m.Sb(55,"ngx-mat-datetime-picker",17,18),m.Wb(),m.Xb(57,"mat-form-field",19),m.Sb(58,"input",15),m.kc(59,"translate"),m.Sb(60,"mat-datepicker-toggle",16),m.Sb(61,"ngx-mat-datetime-picker",17,20),m.Wb(),m.Wb(),m.Xb(63,"section"),m.Xb(64,"mat-checkbox",9),m.fc("ngModelChange",function(o){return i.checkLunes=o}),m.Oc(65),m.kc(66,"translate"),m.Wb(),m.Xb(67,"mat-checkbox",21),m.fc("ngModelChange",function(o){return i.checkMartes=o}),m.Oc(68),m.kc(69,"translate"),m.Wb(),m.Xb(70,"mat-checkbox",21),m.fc("ngModelChange",function(o){return i.checkMiercoles=o}),m.Oc(71),m.kc(72,"translate"),m.Wb(),m.Xb(73,"mat-checkbox",21),m.fc("ngModelChange",function(o){return i.checkJueves=o}),m.Oc(74),m.kc(75,"translate"),m.Wb(),m.Xb(76,"mat-checkbox",21),m.fc("ngModelChange",function(o){return i.checkViernes=o}),m.Oc(77),m.kc(78,"translate"),m.Wb(),m.Xb(79,"mat-checkbox",21),m.fc("ngModelChange",function(o){return i.checkSabado=o}),m.Oc(80),m.kc(81,"translate"),m.Wb(),m.Xb(82,"mat-checkbox",21),m.fc("ngModelChange",function(o){return i.checkDomingo=o}),m.Oc(83),m.kc(84,"translate"),m.Wb(),m.Wb(),m.Xb(85,"section"),m.Xb(86,"mat-form-field",8),m.Xb(87,"mat-label"),m.Oc(88),m.kc(89,"translate"),m.Wb(),m.Xb(90,"mat-select",22),m.fc("ngModelChange",function(o){return i.editorPromocion=o})("selectionChange",function(o){return i.elegirTipoPromocionEditorEvent(o.value)}),m.Mc(91,j,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb(),m.Mc(92,Y,11,8,"div",1),m.Xb(93,"section"),m.Mc(94,V,3,4,"mat-checkbox",23),m.Wb(),m.Xb(95,"section"),m.Xb(96,"mat-form-field",8),m.Xb(97,"mat-label"),m.Oc(98),m.kc(99,"translate"),m.Wb(),m.Xb(100,"mat-select",24),m.fc("ngModelChange",function(o){return i.listaPreciosValue=o})("selectionChange",function(o){return i.elegirListadoDePreciosEvent(o.value)}),m.Mc(101,Q,2,2,"mat-option",10),m.Wb(),m.Wb(),m.Wb(),m.Mc(102,$,12,9,"div",1),m.Mc(103,J,10,7,"div",1),m.Mc(104,K,3,1,"section",1),m.Mc(105,co,11,8,"div",1),m.Mc(106,uo,11,8,"div",1),m.Mc(107,Eo,22,20,"div",1),m.Mc(108,Oo,3,1,"section",1),m.Mc(109,Io,12,10,"div",1),m.Sb(110,"div",25),m.Xb(111,"div",26),m.Xb(112,"div",27),m.Xb(113,"button",28),m.fc("click",function(){return i.formGuardar()}),m.Xb(114,"mat-icon"),m.Oc(115,"save"),m.Wb(),m.Oc(116),m.kc(117,"translate"),m.Wb(),m.Sb(118,"span",29),m.Xb(119,"button",30),m.Xb(120,"mat-icon"),m.Oc(121,"cancel"),m.Wb(),m.Oc(122),m.kc(123,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb(),m.Wb()}if(2&o){const o=m.Ac(56),t=m.Ac(62);m.Eb(3),m.pc("ngModel",i.checkActiva),m.Eb(1),m.Pc(m.lc(5,82,"NEWPROMOTION.ACTIVE")),m.Eb(4),m.Qc("",m.lc(9,84,"NEWPROMOTION.IMAGEFORTHEORDERWEBSITE(SQUAREIMAGE)"),":"),m.Eb(2),m.pc("ngIf",i.formImagenPromocion&&""!=i.formImagenPromocion),m.Eb(2),m.pc("hidden",!0),m.Eb(3),m.pc("hidden",i.fileName),m.Eb(1),m.Qc(" ",m.lc(17,86,i.fileName||"NEWPROMOTION.NOFILEUPLOADEDYET.")," "),m.Eb(5),m.Qc("",m.lc(22,88,"NEWPROMOTION.UPLOADIMAGE")," "),m.Eb(2),m.pc("hidden",!i.fileName),m.Eb(1),m.Qc(" ",m.lc(25,90,i.fileName||"NEWPROMOTION.NOFILEUPLOADEDYET.")," "),m.Eb(5),m.Qc("",m.lc(30,92,"NEWPROMOTION.UPLOAD")," "),m.Eb(5),m.Pc(m.lc(35,94,"NEWPROMOTION.BRANCH")),m.Eb(2),m.pc("ngModel",i.sucursalSelect),m.Eb(1),m.pc("ngForOf",i.listaSucursales),m.Eb(3),m.qc("placeholder",m.lc(41,96,"NEWPROMOTION.DESCRIPTION")),m.pc("ngModel",i.descripcion),m.Eb(4),m.qc("placeholder",m.lc(45,98,"NEWPROMOTION.TICKETLEGEND")),m.pc("ngModel",i.leyendaTicket),m.Eb(4),m.Pc(m.lc(49,100,"NEWPROMOTION.VALIDITY")),m.Eb(4),m.qc("placeholder",m.lc(53,102,"NEWPROMOTION.VALIDSINCE")),m.pc("ngxMatDatetimePicker",o)("formControl",i.formInicio),m.Eb(2),m.pc("for",o),m.Eb(1),m.pc("showSpinners",!0)("showSeconds",!0)("stepHour",1)("stepMinute",1)("stepSecond",1)("touchUi",!1)("color","white")("enableMeridian",!0)("disableMinute",!0)("hideTime",!0),m.Eb(3),m.qc("placeholder",m.lc(59,104,"NEWPROMOTION.UNTIL")),m.pc("ngxMatDatetimePicker",t)("formControl",i.formFin),m.Eb(2),m.pc("for",t),m.Eb(1),m.pc("showSpinners",!0)("showSeconds",!0)("stepHour",1)("stepMinute",1)("stepSecond",1)("touchUi",!1)("color","white")("enableMeridian",!0)("disableMinute",!0)("hideTime",!0),m.Eb(3),m.pc("ngModel",i.checkLunes),m.Eb(1),m.Pc(m.lc(66,106,"NEWPROMOTION.MONDAY")),m.Eb(2),m.pc("ngModel",i.checkMartes),m.Eb(1),m.Pc(m.lc(69,108,"NEWPROMOTION.TUESDAY")),m.Eb(2),m.pc("ngModel",i.checkMiercoles),m.Eb(1),m.Pc(m.lc(72,110,"NEWPROMOTION.WEDNESDAY")),m.Eb(2),m.pc("ngModel",i.checkJueves),m.Eb(1),m.Pc(m.lc(75,112,"NEWPROMOTION.THURSDAY")),m.Eb(2),m.pc("ngModel",i.checkViernes),m.Eb(1),m.Pc(m.lc(78,114,"NEWPROMOTION.FRIDAY")),m.Eb(2),m.pc("ngModel",i.checkSabado),m.Eb(1),m.Pc(m.lc(81,116,"NEWPROMOTION.SATURDAY")),m.Eb(2),m.pc("ngModel",i.checkDomingo),m.Eb(1),m.Pc(m.lc(84,118,"NEWPROMOTION.SUNDAY")),m.Eb(5),m.Pc(m.lc(89,120,"NEWPROMOTION.TYPE")),m.Eb(2),m.pc("ngModel",i.editorPromocion)("disabled",i.modoEdicion),m.Eb(1),m.pc("ngForOf",i.tiposPromociones),m.Eb(1),m.pc("ngIf",0==i.editorPromocionIndex),m.Eb(2),m.pc("ngIf",4!=i.editorPromocionIndex&&8!=i.editorPromocionIndex),m.Eb(4),m.Pc(m.lc(99,122,"NEWPROMOTION.PRICELIST")),m.Eb(2),m.pc("ngModel",i.listaPreciosValue),m.Eb(1),m.pc("ngForOf",i.listadeprecios),m.Eb(1),m.pc("ngIf",9==i.editorPromocionIndex),m.Eb(1),m.pc("ngIf",1==i.editorPromocionIndex),m.Eb(1),m.pc("ngIf",2==i.editorPromocionIndex),m.Eb(1),m.pc("ngIf",3==i.editorPromocionIndex),m.Eb(1),m.pc("ngIf",4==i.editorPromocionIndex||6==i.editorPromocionIndex||7==i.editorPromocionIndex||8==i.editorPromocionIndex),m.Eb(1),m.pc("ngIf",5==i.editorPromocionIndex),m.Eb(1),m.pc("ngIf",4==i.editorPromocionIndex||8==i.editorPromocionIndex),m.Eb(1),m.pc("ngIf",4!=i.editorPromocionIndex&&8!=i.editorPromocionIndex),m.Eb(1),m.pc("textContent",i.actualizarLeyendaFinal()),m.Eb(6),m.Qc("",m.lc(117,124,"NEWPROMOTION.SAVE")," "),m.Eb(3),m.pc("routerLink",m.uc(128,To)),m.Eb(3),m.Qc("",m.lc(123,126,"NEWPROMOTION.CANCEL")," ")}},directives:[E.a,E.b,O.a,n.o,n.r,e.o,n.w,n.p,n.q,M.b,v.a,W.c,I.a,W.f,T.a,e.n,D.b,n.c,n.k,C.a,n.f,X.h,W.h,C.b,I.c,g.h,k.n,N.c,N.a,n.s],pipes:[x.c,e.b],styles:[""]}),o})(),data:{title:"NUEVA PROMOCION"}}];var Co=t("u9T3"),Xo=t("f44v"),ko=t("iELJ"),No=t("jMqV"),xo=t("M9ds"),Fo=t("ZFy/"),Ro=t("w9WL"),jo=t("PCNd"),So=t("BxcV");let yo=(()=>{class o{}return o.\u0275mod=m.Pb({type:o}),o.\u0275inj=m.Ob({factory:function(i){return new(i||o)},imports:[[e.c,n.t,Co.a,Ro.f,D.c,D.c,E.c,D.c,M.c,Xo.a,D.c,Fo.b,ko.f,P.b,No.b,xo.c,T.b,v.b,x.b,jo.a,So.a,n.j,O.b,X.g,C.c,C.e,C.d,n.j,N.b,g.k.forChild(Do)]]}),o})()},vpPe:function(o,i,t){"use strict";t.d(i,"a",function(){return n});var e=t("8Y7J");let n=(()=>{class o{constructor(){}generateUUID(){var o=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var t=(o+16*Math.random())%16|0;return o=Math.floor(o/16),("x"==i?t:3&t|8).toString(16)})}}return o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=e.Nb({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}]);