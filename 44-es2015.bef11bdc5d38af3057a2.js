(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"oZ/c":function(e,n,t){"use strict";t.r(n),t.d(n,"CustomerDisplaySettingsModule",function(){return M});var a=t("SVse"),i=t("3sEA"),s=t("vpPe"),o=t("O/+5"),c=t("8Y7J"),r=t("zHaW"),d=t("PDjf");function p(e,n){if(1&e){const e=c.Yb();c.Xb(0,"mat-card-content"),c.Xb(1,"h4"),c.Oc(2),c.Wb(),c.Sb(3,"img",1),c.Sb(4,"br"),c.Sb(5,"input",2),c.Xb(6,"button",3),c.fc("click",function(){c.Dc(e);const t=n.$implicit;return c.jc().enviarImagen(t.nombre,t.indice)}),c.Oc(7,"Enviar"),c.Wb(),c.Wb()}if(2&e){const e=n.$implicit;c.Eb(2),c.Qc("Im\xe1gen ",11==e.indice?"Fondo Promociones":e.indice,""),c.Eb(1),c.qc("src",e.url,c.Fc),c.Eb(2),c.qc("id",e.nombre)}}const b=[{path:"",component:(()=>{class e{constructor(e,n,t,a){this.servicioTicket=e,this.loader=n,this.snack=t,this.servicioUUID=a,this.idEmpresa=""}ngOnInit(){this.loader.open(),this.servicioTicket.obtenerEmpresas().subscribe(e=>{this.idEmpresa=e[0].id,this.listadoImagenes=[];for(var n=1;n<=11;n++)this.listadoImagenes.push({url:`https://s3.sa-east-1.amazonaws.com/images.posberry.com/${this.idEmpresa}-${n}.png?`+this.servicioUUID.generateUUID(),indice:n,nombre:`${this.idEmpresa}-${n}`});this.loader.close()},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}enviarImagen(e,n){!function(e,n){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){var e,a=[];a.push(encodeURIComponent("image")+"="+encodeURIComponent(t.result)),a.push(encodeURIComponent("name")+"="+encodeURIComponent(n)),e=a.join("&").replace(/%20/g,"+");var i=new XMLHttpRequest;i.withCredentials=!0,i.addEventListener("readystatechange",function(){4===this.readyState&&alert("Imagen enviada. Puede que necesite recargar la p\xe1gina para ver la nueva im\xe1gen en miniatura.")}),i.open("POST","/api/subidas3"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.setRequestHeader("cache-control","no-cache"),i.send(e)},t.onerror=function(e){alert("Error: no se pudo enviar la imagen")}}(document.getElementById(e).files[0],e)}}return e.\u0275fac=function(n){return new(n||e)(c.Rb(o.a),c.Rb(i.a),c.Rb(r.a),c.Rb(s.a))},e.\u0275cmp=c.Lb({type:e,selectors:[["app-customer-display-settings"]],decls:5,vars:1,consts:[[4,"ngFor","ngForOf"],["width","320","height","auto",3,"src"],["type","file","accept",".png",3,"id"],["type","submit",1,"btn","btn-raised","btn-primary",3,"click"]],template:function(e,n){1&e&&(c.Xb(0,"mat-card"),c.Xb(1,"mat-card-content"),c.Xb(2,"p"),c.Oc(3,"Puede seleccionar hasta 10 imagenes como banner y una imagen de fondo para las Promociones."),c.Wb(),c.Wb(),c.Mc(4,p,8,3,"mat-card-content",0),c.Wb()),2&e&&(c.Eb(4),c.pc("ngForOf",n.listadoImagenes))},directives:[d.a,d.b,a.n],styles:[""]}),e})(),data:{title:"CUSTOMER DISPLAY"}}];var m=t("iInd"),u=t("u9T3"),l=t("s7LF"),h=t("Dxy4"),g=t("pMoy"),f=t("f44v"),v=t("TN/R"),y=t("iELJ"),I=t("40+f"),R=t("Tj54"),w=t("e6WT"),E=t("SqCe"),O=t("rJgo"),S=t("BTe0"),T=t("zQhy"),U=t("ZTz/"),C=t("jMqV"),P=t("M9ds"),k=t("ZFy/"),D=t("TSSN"),W=t("w9WL"),j=t("aYsj"),q=t("PCNd"),F=t("hrfs"),L=t("pYyI");let M=(()=>{class e{}return e.\u0275mod=c.Pb({type:e}),e.\u0275inj=c.Ob({factory:function(n){return new(n||e)},imports:[[a.c,l.t,u.a,W.f,w.c,w.c,d.c,w.c,h.c,f.a,w.c,k.b,y.f,r.b,C.b,P.c,U.b,R.b,D.b,q.a,v.g,l.j,E.b,O.c,I.b,g.b,T.c,S.b,F.a,L.a,j.a,m.k.forChild(b)]]}),e})()}}]);