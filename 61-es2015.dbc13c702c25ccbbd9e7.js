(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{"oZ/c":function(e,t,n){"use strict";n.r(t),n.d(t,"CustomerDisplaySettingsModule",function(){return Y});var a=n("SVse"),r=n("3sEA"),c=n("vpPe"),i=n("O/+5"),o=n("8Y7J"),s=n("zHaW"),d=n("PDjf"),p=n("TSSN");function u(e,t){if(1&e){const e=o.Yb();o.Xb(0,"mat-card-content"),o.Xb(1,"h4"),o.Oc(2),o.kc(3,"translate"),o.Wb(),o.Sb(4,"img",1),o.Sb(5,"br"),o.Sb(6,"input",2),o.Xb(7,"button",3),o.fc("click",function(){o.Dc(e);const n=t.$implicit;return o.jc().enviarImagen(n.nombre,n.indice)}),o.Oc(8),o.kc(9,"translate"),o.Wb(),o.Wb()}if(2&e){const e=t.$implicit;o.Eb(2),o.Rc("",o.lc(3,5,"CUSTOMERDISPLAY.PICTURE")," ",11==e.indice?"Fondo Promociones":e.indice,""),o.Eb(2),o.qc("src",e.url,o.Fc),o.Eb(2),o.qc("id",e.nombre),o.Eb(2),o.Pc(o.lc(9,7,"CUSTOMERDISPLAY.SEND"))}}const b=[{path:"",component:(()=>{class e{constructor(e,t,n,a){this.servicioTicket=e,this.loader=t,this.snack=n,this.servicioUUID=a,this.idEmpresa=""}ngOnInit(){this.loader.open(),this.servicioTicket.obtenerEmpresas().subscribe(e=>{this.idEmpresa=e[0].id,this.listadoImagenes=[];for(var t=1;t<=11;t++)this.listadoImagenes.push({url:`https://s3.sa-east-1.amazonaws.com/images.posberry.com/${this.idEmpresa}-${t}.png?`+this.servicioUUID.generateUUID(),indice:t,nombre:`${this.idEmpresa}-${t}`});this.loader.close()},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}enviarImagen(e,t){!function(e,t){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){var e,a=[];a.push(encodeURIComponent("image")+"="+encodeURIComponent(n.result)),a.push(encodeURIComponent("name")+"="+encodeURIComponent(t)),e=a.join("&").replace(/%20/g,"+");var r=new XMLHttpRequest;r.withCredentials=!0,r.addEventListener("readystatechange",function(){4===this.readyState&&alert("Imagen enviada. Puede que necesite recargar la p\xe1gina para ver la nueva im\xe1gen en miniatura.")}),r.open("POST","/api/subidas3"),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.setRequestHeader("cache-control","no-cache"),r.send(e)},n.onerror=function(e){alert("Error: no se pudo enviar la imagen")}}(document.getElementById(e).files[0],e)}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(i.a),o.Rb(r.a),o.Rb(s.a),o.Rb(c.a))},e.\u0275cmp=o.Lb({type:e,selectors:[["app-customer-display-settings"]],decls:6,vars:4,consts:[[4,"ngFor","ngForOf"],["width","320","height","auto",3,"src"],["type","file","accept",".png",3,"id"],["type","submit",1,"btn","btn-raised","btn-primary",3,"click"]],template:function(e,t){1&e&&(o.Xb(0,"mat-card"),o.Xb(1,"mat-card-content"),o.Xb(2,"p"),o.Oc(3),o.kc(4,"translate"),o.Wb(),o.Wb(),o.Mc(5,u,10,9,"mat-card-content",0),o.Wb()),2&e&&(o.Eb(3),o.Pc(o.lc(4,2,"CUSTOMERDISPLAY.PARRAF1")),o.Eb(2),o.pc("ngForOf",t.listadoImagenes))},directives:[d.a,d.b,a.n],pipes:[p.c],styles:[""]}),e})(),data:{title:"CUSTOMER DISPLAY"}}];var l=n("iInd"),m=n("u9T3"),f=n("s7LF"),h=n("Dxy4"),x=n("pMoy"),g=n("f44v"),v=n("TN/R"),R=n("iELJ"),I=n("40+f"),E=n("Tj54"),y=n("e6WT"),S=n("SqCe"),w=n("rJgo"),U=n("BTe0"),T=n("zQhy"),P=n("ZTz/"),C=n("jMqV"),D=n("M9ds"),O=n("ZFy/"),k=n("w9WL"),M=n("aYsj"),L=n("PCNd"),F=n("hrfs"),W=n("pYyI");let Y=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},imports:[[a.c,f.t,m.a,k.f,y.c,y.c,d.c,y.c,h.c,g.a,y.c,O.b,R.f,s.b,C.b,D.c,P.b,E.b,p.b,L.a,v.g,f.j,S.b,w.c,I.b,x.b,T.c,U.b,F.a,W.a,M.a,l.k.forChild(b)]]}),e})()},vpPe:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("8Y7J");let r=(()=>{class e{constructor(){}generateUUID(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);