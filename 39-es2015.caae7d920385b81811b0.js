(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{N3eF:function(e,t,i){"use strict";i.r(t),i.d(t,"BondingSettingsModule",function(){return N});var a=i("SVse"),r=i("3kSh"),n=i("3sEA"),s=i("vpPe"),c=i("AytR"),o=i("8Y7J"),l=i("IheW");let u=(()=>{class e{constructor(e){this.http=e}obtenerDatos(e,t,i){return this.http.get(encodeURI(`${c.a.apiURL}PuntosVenta?filter={"where":${e},"limit":${t},"skip":${i},"order":"sdescripcion ASC"}`))}actualizarSucursales(e){return this.http.put(`${c.a.apiURL}PuntosVenta/${e.id}`,e)}agregarSucursales(e){return this.http.post(c.a.apiURL+"Sucursales",e)}}return e.\u0275fac=function(t){return new(t||e)(o.bc(l.c))},e.\u0275prov=o.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=i("iELJ"),h=i("zHaW"),d=i("PDjf"),b=i("Q2Ze"),m=i("Tj54"),f=i("e6WT"),g=i("w9WL"),v=i("Dxy4"),w=i("TSSN");function O(e,t){if(1&e&&o.Oc(0),2&e){const e=t.row;o.Qc(" ",null==e?null:e.sdescripcion," ")}}function S(e,t){if(1&e&&o.Oc(0),2&e){const e=t.row;o.Qc(" ",null==e?null:e.hardid," ")}}function I(e,t){if(1&e){const e=o.Yb();o.Xb(0,"button",7),o.fc("click",function(){o.Dc(e);const i=t.row;return o.jc().deleteItem(i)}),o.Xb(1,"mat-icon"),o.Oc(2,"delete"),o.Wb(),o.Wb()}}const W=function(){return{y:"50px",delay:"300ms"}},R=function(e){return{value:"*",params:e}},k=[{path:"",component:(()=>{class e{constructor(e,t,i,a,r,n){this.servicioVinculacion=e,this.dialog=t,this.snack=i,this.confirmService=a,this.loader=r,this.servicioUUID=n,this.timeOutDuration=800,this.rows=[],this.search="",this.page={count:0,offset:0,limit:10}}ngOnInit(){this.prepararFiltro(),this.refresh()}prepararFiltro(){if(this.search){this.filter='{"and":[';var e=this.search.split(" ");e.length>0&&(e.forEach((e,t)=>{e.length>1&&(this.filter+=`{"or":[{"sdescripcion":{"ilike":"%${e}%"}}]}`,t<this.search.length-1&&(this.filter+=","))}),this.filter+='{"deletedon":{"eq":null}}]}')}else this.filter='{"deletedon":{"eq":null}}'}refresh(){this.prepararFiltro(),this.servicioVinculacion.obtenerDatos(this.filter,this.page.limit,this.page.offset).subscribe(e=>{console.log(e),this.page.count=50,this.rows=e;var t=[];this.rows.map(e=>{null!=e.hardid&&t.push(e)}),this.rows=t,console.log(this.rows)},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}pageCallback(e){this.page.offset=e.offset*e.pageSize,this.refresh()}updateFilter(e){this.search=e.target.value,clearTimeout(this.timeOut),this.timeOut=setTimeout(()=>{this.refresh()},this.timeOutDuration)}deleteItem(e){this.confirmService.confirm({message:`\xbfDesvincular ${e.sdescripcion}?`}).subscribe(t=>{if(t){this.loader.open();var i={};Object.assign(i,e),i.hardid=null,this.servicioVinculacion.actualizarSucursales(i).subscribe(e=>{this.refresh(),this.loader.close(),this.snack.open("\xa1Hardware ID Desvinculado!","OK",{duration:4e3})},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}})}}return e.\u0275fac=function(t){return new(t||e)(o.Rb(u),o.Rb(p.b),o.Rb(h.a),o.Rb(r.a),o.Rb(n.a),o.Rb(s.a))},e.\u0275cmp=o.Lb({type:e,selectors:[["app-bonding-settings"]],decls:30,vars:34,consts:[[1,"margin-333",2,"width","100%"],["matPrefix",""],["matInput","","value","",3,"placeholder","keyup"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","rowHeight","count","offset","limit","externalPaging","selectionType","page"],[3,"name","width"],["ngx-datatable-cell-template",""],["mat-icon-button","","mat-sm-button","","color","foreground",1,"mr-16",3,"click"]],template:function(e,t){1&e&&(o.Xb(0,"mat-card"),o.Xb(1,"mat-card-content"),o.Xb(2,"h2"),o.Xb(3,"b"),o.Oc(4,"Vinculaci\xf3n de Dispositivos con Punto de Venta"),o.Wb(),o.Wb(),o.Xb(5,"p"),o.Oc(6,"Al iniciar por primera vez el sistema o si no hay ning\xfan dispositivo vinculado, POSBerry asocia su equipo (Hardware ID) con el punto de venta autom\xe1ticamente. Solo puede haber un equipo vinculado por punto de venta a la vez."),o.Wb(),o.Xb(7,"p"),o.Oc(8,'Puede ver el Hardware ID en el programa de escritorio en el men\xfa "Opciones > Acerca de", en la pesta\xf1a "Informe del Sistema", al lado del nombre del "Sistema Operativo".'),o.Wb(),o.Xb(9,"p"),o.Xb(10,"b"),o.Oc(11,"Desvincular:"),o.Wb(),o.Oc(12," si va a desvincular un dispositivo, aseg\xfarese que el programa de escritorio POSBerry esta cerrado en el equipo que va a desvincular."),o.Wb(),o.Wb(),o.Wb(),o.Xb(13,"mat-form-field",0),o.Xb(14,"mat-icon",1),o.Oc(15,"search"),o.Wb(),o.Xb(16,"input",2),o.fc("keyup",function(e){return t.updateFilter(e)}),o.kc(17,"translate"),o.Wb(),o.Wb(),o.Xb(18,"mat-card",3),o.Xb(19,"mat-card-content",3),o.Xb(20,"ngx-datatable",4),o.fc("page",function(e){return t.pageCallback(e)}),o.Xb(21,"ngx-datatable-column",5),o.kc(22,"translate"),o.Mc(23,O,1,1,"ng-template",6),o.Wb(),o.Xb(24,"ngx-datatable-column",5),o.kc(25,"translate"),o.Mc(26,S,1,1,"ng-template",6),o.Wb(),o.Xb(27,"ngx-datatable-column",5),o.kc(28,"translate"),o.Mc(29,I,3,0,"ng-template",6),o.Wb(),o.Wb(),o.Wb(),o.Wb()),2&e&&(o.pc("@animate",o.vc(29,R,o.uc(28,W))),o.Eb(16),o.qc("placeholder",o.lc(17,20,"BRANCHOFFICESETTINGS.FILTER")),o.Eb(2),o.pc("@animate",o.vc(32,R,o.uc(31,W))),o.Eb(2),o.pc("rows",t.rows)("columnMode","force")("headerHeight",50)("footerHeight",50)("scrollbarH",!0)("rowHeight",50)("count",t.page.count)("offset",t.page.offset)("limit",t.page.limit)("externalPaging",!0)("selectionType","single"),o.Eb(1),o.qc("name",o.lc(22,22,"BRANCHOFFICESETTINGS.BRANCHOFFICE")),o.pc("width",150),o.Eb(3),o.qc("name",o.lc(25,24,"Hardware ID")),o.pc("width",150),o.Eb(3),o.qc("name",o.lc(28,26,"BRANCHOFFICESETTINGS.ACTIONS")),o.pc("width",150))},directives:[d.a,d.b,b.c,m.a,b.g,f.b,g.d,g.b,g.a,v.b],pipes:[w.c],styles:[""]}),e})(),data:{title:"Vinculaci\xf3n"}}];var E=i("iInd"),X=i("u9T3"),y=i("s7LF"),F=i("f44v"),H=i("ZTz/"),T=i("jMqV"),D=i("M9ds"),C=i("ZFy/"),P=i("PCNd"),q=i("BxcV");let N=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(t){return new(t||e)},imports:[[a.c,y.s,X.a,g.f,f.c,f.c,d.c,f.c,v.c,F.a,f.c,C.b,p.e,h.b,T.b,D.c,H.b,m.b,w.b,P.a,q.a,E.k.forChild(k)]]}),e})()}}]);