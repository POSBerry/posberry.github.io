(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{CHRX:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var c=a("wd/R");class r{constructor(){this.sum=[],this.data=[],this.rows=[],this.filter={},this.groups={},this.groupField="",this.secondarySort="",this.sortDir="asc",this.footer={},this.summaryRow=!0,this.emptyRow=!0,this.customFilter=function(t){return t}}static prepararFiltroAPI(t){var e="";for(var a in t)t[a].search&&(e+="number"==typeof t[a].search?`{"${a}":${t[a].search}},`:t[a].exact?`{"${a}":"${t[a].search}"},`:`{"${a}":{"ilike":"%${t[a].search}%"}},`);return e}setGroup(t){this.groups[t.name]=!this.groups[t.name],this.filterRows()}setData(t){this.data=t,this.sortData()}sortData(){this.data.sort((t,e)=>{if(t[this.groupField]==e[this.groupField]){if(this.secondarySort){if(null==t[this.secondarySort])return 1;if(null==e[this.secondarySort])return-1;if(t[this.secondarySort]>e[this.secondarySort])return 1*("desc"===this.sortDir?-1:1);if(t[this.secondarySort]<e[this.secondarySort])return-1*("desc"===this.sortDir?-1:1)}}else{if(null==t[this.groupField])return 1;if(null==e[this.groupField])return-1;if(t[this.groupField]>e[this.groupField])return 1;if(t[this.groupField]<e[this.groupField])return-1}return 0}),this.filterRows()}filterRows(){var t=[];t=this.data.filter(t=>{for(var e in this.filter){if(this.filter[e]&&null==t[e])return!1;switch(typeof t[e]){case"number":if(this.filter[e]&&Math.trunc(t[e]).toString()!==Math.trunc(this.filter[e]).toString())return!1;break;case"string":if("f"==e.charAt(0).toLowerCase()&&c(t[e]).isValid){if(-1==c(t[e]).format("DD/MM/YYYY HH:mm:ss").indexOf(this.filter[e]))return!1;break}if(-1==t[e].toLowerCase().indexOf(this.filter[e].toLowerCase()))return!1}}return!0}),t=this.customFilter(t);var e={};this.groupField?e[this.groupField]=t.length.toString():e.count=t.length.toString(),this.sum.forEach(t=>e[t]=0);for(var a=0;a<t.length;a++)this.sum.forEach(c=>e[c]+=t[a][c]);if(e.isGroup=!0,this.footer=e,this.groupField){var r=[];t.forEach(t=>{-1==r.indexOf(t[this.groupField])&&r.push(t[this.groupField])}),r=r.map(t=>({name:t,count:1}));var n=[],i=!0,o=0,s=null,l=()=>{s&&(s[this.groupField]+=" ("+r[o-1].count.toString()+")")};for(a=0;a<t.length;a++){if(i&&t[a][this.groupField]==r[o].name){l();var u="+";this.groups[r[o].name]&&(u="-"),s={[this.groupField]:u+" "+r[o].name,isGroup:!0,name:r[o].name},this.sum.forEach(t=>s[t]=0),n.push(s),i=++o<r.length}else r[o-1].count++;this.sum.forEach(e=>s[e]+=t[a][e]),n.push(t[a])}l(),t=null,n=n.filter(t=>!!t.isGroup||!!this.groups[t[this.groupField]]||void 0),this.rows=n}else this.rows=t;this.summaryRow&&this.rows.push(this.footer),0==this.rows.length&&this.emptyRow&&this.rows.push({})}updateFilter(t,e){if(t&&e){var a=t.target.value;t instanceof MouseEvent&&(a=""),this.filter[e]=a,this.filterRows()}return!0}updateFilterBoolean(t,e){return this.filter[e]=t,this.filterRows(),!0}}},GmJt:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var c=a("GS7A");const r=Object(c.g)([Object(c.l)({opacity:"{{opacity}}",transform:"scale({{scale}}) translate3d({{x}}, {{y}}, {{z}})"}),Object(c.e)("{{duration}} {{delay}} cubic-bezier(0.0, 0.0, 0.2, 1)",Object(c.l)("*"))],{params:{duration:"200ms",delay:"0ms",opacity:"0",scale:"1",x:"0",y:"0",z:"0"}}),n=[Object(c.n)("animate",[Object(c.m)("void => *",[Object(c.o)(r)])]),Object(c.n)("fadeInOut",[Object(c.k)("0",Object(c.l)({opacity:0,display:"none"})),Object(c.k)("1",Object(c.l)({opacity:1,display:"block"})),Object(c.m)("0 => 1",Object(c.e)("300ms")),Object(c.m)("1 => 0",Object(c.e)("300ms"))])]},vkD5:function(t,e,a){"use strict";a.r(e),a.d(e,"RegistryModule",function(){return wt});var c=a("GmJt"),r=a("3kSh"),n=a("3sEA"),i=a("iELJ"),o=a("8Y7J"),s=a("PDjf"),l=a("SVse"),u=a("VDRc"),b=a("Dxy4"),m=a("Tj54"),p=a("TSSN");function f(t,e){if(1&t&&(o.Xb(0,"div"),o.Oc(1),o.kc(2,"translate"),o.kc(3,"number"),o.Wb()),2&t){const t=o.jc(2);o.Eb(1),o.Rc("",o.lc(2,2,"REGISTRYPOPUP.ACTUALTEMPERATURE"),": ",o.lc(3,4,t.data.payload.rtemperaturaactual),"\xb0c ")}}function d(t,e){if(1&t&&(o.Xb(0,"div"),o.Oc(1),o.kc(2,"translate"),o.kc(3,"number"),o.Wb()),2&t){const t=o.jc(2);o.Eb(1),o.Rc("",o.lc(2,2,"REGISTRYPOPUP.AVERAGETEMPERATURE"),": ",o.lc(3,4,t.data.payload.rtemperaturapromedio),"\xb0c")}}function h(t,e){if(1&t&&(o.Xb(0,"div"),o.Xb(1,"h5"),o.Xb(2,"b"),o.Oc(3),o.kc(4,"translate"),o.Wb(),o.Wb(),o.Mc(5,f,4,6,"div",2),o.Mc(6,d,4,6,"div",2),o.Sb(7,"br"),o.Wb()),2&t){const t=o.jc();o.Eb(3),o.Qc("",o.lc(4,3,"REGISTRYPOPUP.TEMPERATURE"),":"),o.Eb(2),o.pc("ngIf",t.data.payload.rtemperaturaactual),o.Eb(1),o.pc("ngIf",t.data.payload.rtemperaturapromedio)}}const g=function(){return{y:"50px",delay:"300ms"}},O=function(t){return{value:"*",params:t}};let E=(()=>{class t{constructor(t,e){this.data=t,this.dialogRef=e}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(i.a),o.Rb(i.g))},t.\u0275cmp=o.Lb({type:t,selectors:[["app-registry-popup"]],decls:78,vars:89,consts:[["matDialogTitle","",1,"popup-title"],[2,"font-size","small"],[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","end"],["fxFlex","100",1,"mt-16"],["mat-button","","color","warn","type","button",3,"click"]],template:function(t,e){1&t&&(o.Xb(0,"h1",0),o.Xb(1,"span"),o.Oc(2),o.Wb(),o.Xb(3,"span",1),o.Oc(4),o.kc(5,"date"),o.Wb(),o.Wb(),o.Xb(6,"mat-dialog-content"),o.Xb(7,"mat-card"),o.Xb(8,"mat-card-content"),o.Xb(9,"div"),o.Xb(10,"h5"),o.Xb(11,"b"),o.Oc(12),o.kc(13,"translate"),o.Wb(),o.Oc(14),o.Wb(),o.Xb(15,"div"),o.Oc(16),o.kc(17,"translate"),o.kc(18,"date"),o.Wb(),o.Xb(19,"div"),o.Oc(20),o.kc(21,"translate"),o.kc(22,"date"),o.Wb(),o.Sb(23,"br"),o.Wb(),o.Mc(24,h,8,5,"div",2),o.Xb(25,"div"),o.Xb(26,"h5"),o.Xb(27,"b"),o.Oc(28),o.kc(29,"translate"),o.Wb(),o.Wb(),o.Xb(30,"div"),o.Oc(31),o.kc(32,"translate"),o.kc(33,"number"),o.kc(34,"number"),o.Wb(),o.Xb(35,"div"),o.Oc(36),o.kc(37,"translate"),o.kc(38,"number"),o.kc(39,"number"),o.Wb(),o.Sb(40,"br"),o.Wb(),o.Xb(41,"div"),o.Xb(42,"h5"),o.Xb(43,"b"),o.Oc(44),o.kc(45,"translate"),o.Wb(),o.Wb(),o.Xb(46,"div"),o.Oc(47),o.kc(48,"translate"),o.kc(49,"number"),o.Wb(),o.Xb(50,"div"),o.Oc(51),o.kc(52,"translate"),o.kc(53,"number"),o.Wb(),o.Sb(54,"br"),o.Wb(),o.Xb(55,"div"),o.Xb(56,"h5"),o.Xb(57,"b"),o.Oc(58),o.kc(59,"translate"),o.Wb(),o.Wb(),o.Xb(60,"div"),o.Oc(61),o.kc(62,"translate"),o.kc(63,"number"),o.kc(64,"number"),o.Wb(),o.Xb(65,"div"),o.Oc(66),o.kc(67,"translate"),o.kc(68,"number"),o.kc(69,"number"),o.Wb(),o.Sb(70,"br"),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(71,"mat-dialog-content",3),o.Xb(72,"div",4),o.Xb(73,"button",5),o.fc("click",function(){return e.dialogRef.close(!1)}),o.Xb(74,"mat-icon"),o.Oc(75,"cancel"),o.Wb(),o.Oc(76),o.kc(77,"translate"),o.Wb(),o.Wb(),o.Wb()),2&t&&(o.Eb(2),o.Rc("",e.data.puntoDeVenta," (",e.data.payload.shostname,")"),o.Eb(2),o.Pc(o.mc(5,31,e.data.payload.fcreacion,"dd/MM/yyyy HH:mm:ss")),o.Eb(3),o.pc("@animate",o.vc(87,O,o.uc(86,g))),o.Eb(5),o.Qc("",o.lc(13,34,"REGISTRYPOPUP.OPERATINGSYSTEM"),":"),o.Eb(2),o.Qc(" ",e.data.payload.ssistemaoperativo,""),o.Eb(2),o.Rc("",o.lc(17,36,"REGISTRYPOPUP.SYSTEMSTARTUP"),"Inicio del Sistema: ",o.mc(18,38,e.data.payload.finicioos,"dd/MM/yyyy HH:mm:ss"),""),o.Eb(4),o.Rc("",o.lc(21,41,"REGISTRYPOPUP.POSBERRYSTART"),"Inicio de POSBerry: ",o.mc(22,43,e.data.payload.finicioapp,"dd/MM/yyyy HH:mm:ss"),""),o.Eb(4),o.pc("ngIf",e.data.payload.rtemperaturaactual||e.data.payload.rtemperaturapromedio),o.Eb(4),o.Qc("",o.lc(29,46,"REGISTRYPOPUP.MEMORY"),":"),o.Eb(3),o.Sc("",o.lc(32,48,"REGISTRYPOPUP.FREEMEMORY"),": ",o.lc(33,50,e.data.payload.imemorialibre/1e6)," GB (",o.lc(34,52,e.data.payload.imemorialibre)," KB)"),o.Eb(5),o.Sc("",o.lc(37,54,"REGISTRYPOPUP.TOTALMEMORY"),": ",o.lc(38,56,e.data.payload.imemoriatotal/1e6)," GB (",o.lc(39,58,e.data.payload.imemoriatotal)," KB)"),o.Eb(8),o.Qc("",o.lc(45,60,"REGISTRYPOPUP.PROCESSOR"),":"),o.Eb(3),o.Rc("",o.lc(48,62,"REGISTRYPOPUP.CURRENTLOAD"),": ",o.lc(49,64,e.data.payload.rcpuloadactual),"%"),o.Eb(4),o.Rc("",o.lc(52,66,"REGISTRYPOPUP.AVERAGELOAD"),": ",o.lc(53,68,e.data.payload.rcpuloadpromedio),"%"),o.Eb(7),o.Qc("",o.lc(59,70,"REGISTRYPOPUP.STORAGE"),":"),o.Eb(3),o.Sc("",o.lc(62,72,"REGISTRYPOPUP.FREESTORAGE"),": ",o.lc(63,74,e.data.payload.ialmacenamientolibre/1e6)," GB (",o.lc(64,76,e.data.payload.ialmacenamientolibre)," KB)"),o.Eb(5),o.Sc("",o.lc(67,78,"REGISTRYPOPUP.AVERAGELOAD"),": ",o.lc(68,80,e.data.payload.ialmacenamientototal/1e6)," GB (",o.lc(69,82,e.data.payload.ialmacenamientototal)," KB)"),o.Eb(10),o.Qc("",o.lc(77,84,"REGISTRYPOPUP.CANCEL")," "))},directives:[i.h,i.e,s.a,s.b,l.o,u.c,u.b,u.a,b.b,m.a],pipes:[l.f,p.c,l.g],styles:[".popup-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),t})();var R=a("AytR"),y=a("IheW");let w=(()=>{class t{constructor(t){this.http=t}obtenerDatos(t,e,a,c){return this.http.get(encodeURI(`${R.a.apiURL}Registro?filter={"where":${t},"limit":${e},"skip":${a},"order":"${c}"}`))}obtenerCount(t){return this.http.get(encodeURI(`${R.a.apiURL}Registro/count?where=${t}`))}obtenerPV(){return this.http.get(R.a.apiURL+"PuntosVenta")}}return t.\u0275fac=function(e){return new(e||t)(o.bc(y.c))},t.\u0275prov=o.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var S=a("CHRX"),M=a("cp0P"),v=a("HeVh"),k=a("zHaW"),P=a("Q2Ze"),X=a("e6WT"),T=a("w9WL");function G(t,e){if(1&t){const t=o.Yb();o.Xb(0,"button",25),o.fc("click",function(e){o.Dc(t);const a=o.jc(),c=o.Ac(4);return a.updateFilter(e,null,null)&&(c.value="")}),o.Xb(1,"mat-icon"),o.Oc(2,"close"),o.Wb(),o.Wb()}}function x(t,e){if(1&t&&o.Oc(0),2&t){const t=e.row;o.Qc(" ",null==t?null:t.sinstancia," ")}}function I(t,e){if(1&t&&(o.Xb(0,"ngx-datatable-column",26),o.kc(1,"translate"),o.Mc(2,x,1,1,"ng-template",20),o.Wb()),2&t){o.jc();const t=o.Ac(32);o.qc("name",o.lc(1,3,"REGISTRYCOMPONENT.INSTANCE")),o.pc("summaryTemplate",t)("flexGrow",1)}}function W(t,e){if(1&t&&(o.Oc(0),o.kc(1,"date")),2&t){const t=e.row;o.Qc(" ",o.mc(1,1,null==t?null:t.fcreacion,"dd/MM/yyyy HH:mm:ss")," ")}}function A(t,e){1&t&&(o.Xb(0,"ngx-datatable-column",27),o.kc(1,"translate"),o.Mc(2,W,2,4,"ng-template",20),o.Wb()),2&t&&(o.qc("name",o.lc(1,2,"REGISTRYCOMPONENT.DATE")),o.pc("flexGrow",1))}function F(t,e){if(1&t&&o.Oc(0),2&t){const t=e.row;o.Qc(" ",null==t?null:t.message," ")}}function Y(t,e){if(1&t&&(o.Xb(0,"ngx-datatable-column",28),o.kc(1,"translate"),o.Mc(2,F,1,1,"ng-template",20),o.Wb()),2&t){o.jc();const t=o.Ac(28);o.qc("name",o.lc(1,3,"REGISTRYCOMPONENT.MESSAGE")),o.pc("summaryTemplate",t)("flexGrow",2)}}function L(t,e){if(1&t&&o.Oc(0),2&t){const t=e.row;o.Qc(" ",null==t?null:t.soperadorcreacion," ")}}function C(t,e){1&t&&(o.Xb(0,"ngx-datatable-column",29),o.kc(1,"translate"),o.Mc(2,L,1,1,"ng-template",20),o.Wb()),2&t&&(o.qc("name",o.lc(1,2,"REGISTRYCOMPONENT.OPERATOR")),o.pc("flexGrow",1.5))}function j(t,e){if(1&t&&o.Oc(0),2&t){const t=e.row;o.Qc(" ",null==t?null:t.shostname," ")}}function N(t,e){if(1&t&&(o.Xb(0,"ngx-datatable-column",30),o.kc(1,"translate"),o.Mc(2,j,1,1,"ng-template",20),o.Wb()),2&t){o.jc();const t=o.Ac(30);o.qc("name",o.lc(1,3,"REGISTRYCOMPONENT.PCNAME")),o.pc("summaryTemplate",t)("flexGrow",1)}}function D(t,e){if(1&t&&o.Oc(0),2&t){const t=e.row;o.Qc(" ",null==t?null:t.sversion," ")}}function U(t,e){1&t&&(o.Xb(0,"ngx-datatable-column",31),o.kc(1,"translate"),o.Mc(2,D,1,1,"ng-template",20),o.Wb()),2&t&&(o.qc("name",o.lc(1,2,"REGISTRYCOMPONENT.VERSION")),o.pc("flexGrow",.7))}function H(t,e){if(1&t&&o.Oc(0),2&t){const t=e.row;o.Qc(" ",null==t?null:t.idpv," ")}}function Q(t,e){if(1&t&&(o.Xb(0,"ngx-datatable-column",32),o.kc(1,"translate"),o.Mc(2,H,1,1,"ng-template",20),o.Wb()),2&t){o.jc();const t=o.Ac(26);o.qc("name",o.lc(1,3,"REGISTRYCOMPONENT.POS")),o.pc("summaryTemplate",t)("flexGrow",1)}}function V(t,e){if(1&t&&o.Oc(0),2&t){const t=e.row;o.Qc(" ",null==t?null:t.ssistemaoperativo," ")}}function $(t,e){1&t&&(o.Xb(0,"ngx-datatable-column",33),o.kc(1,"translate"),o.Mc(2,V,1,1,"ng-template",20),o.Wb()),2&t&&(o.qc("name",o.lc(1,2,"REGISTRYCOMPONENT.OS")),o.pc("flexGrow",1.5))}function q(t,e){if(1&t&&(o.Oc(0),o.kc(1,"date")),2&t){const t=e.row;o.Qc(" ",o.mc(1,1,null==t?null:t.finicioapp,"dd/MM/yyyy HH:mm:ss")," ")}}function B(t,e){1&t&&(o.Xb(0,"ngx-datatable-column",34),o.kc(1,"translate"),o.Mc(2,q,2,4,"ng-template",20),o.Wb()),2&t&&(o.qc("name",o.lc(1,2,"REGISTRYCOMPONENT.APPSTART")),o.pc("flexGrow",1))}function J(t,e){if(1&t&&(o.Oc(0),o.kc(1,"number")),2&t){const t=e.row;o.Qc(" ",o.mc(1,1,null==t?null:t.rtemperaturaactual,"1.00-0")," ")}}function z(t,e){1&t&&(o.Xb(0,"ngx-datatable-column",35),o.kc(1,"translate"),o.Mc(2,J,2,4,"ng-template",20),o.Wb()),2&t&&(o.qc("name",o.lc(1,3,"REGISTRYCOMPONENT.CPUTEMP")),o.pc("summaryFunc",null)("flexGrow",.7))}function K(t,e){if(1&t&&(o.Oc(0),o.kc(1,"number")),2&t){const t=e.row;o.Qc(" ",o.mc(1,1,null==t?null:t.rtemperaturapromedio,"1.00-0")," ")}}function Z(t,e){1&t&&(o.Xb(0,"ngx-datatable-column",36),o.kc(1,"translate"),o.Mc(2,K,2,4,"ng-template",20),o.Wb()),2&t&&(o.qc("name",o.lc(1,3,"REGISTRYCOMPONENT.CPUAVERAGETEMP")),o.pc("summaryFunc",null)("flexGrow",.7))}function _(t,e){if(1&t&&(o.Oc(0),o.kc(1,"number")),2&t){const t=e.row;o.Qc(" ",o.mc(1,1,null==t?null:t.rcpuloadpromedio,"1.00-0")," ")}}function tt(t,e){1&t&&(o.Xb(0,"ngx-datatable-column",37),o.kc(1,"translate"),o.Mc(2,_,2,4,"ng-template",20),o.Wb()),2&t&&(o.qc("name",o.lc(1,3,"REGISTRYCOMPONENT.CPUAVERAGELOAD")),o.pc("summaryFunc",null)("flexGrow",.7))}function et(t,e){if(1&t){const t=o.Yb();o.Xb(0,"button",38),o.fc("click",function(){o.Dc(t);const a=e.row;return o.jc().openPopUp(a)}),o.Xb(1,"mat-icon"),o.Oc(2,"info"),o.Wb(),o.Wb()}}function at(t,e){if(1&t){const t=o.Yb();o.Xb(0,"button",25),o.fc("click",function(e){o.Dc(t),o.jc();const a=o.Ac(2);return o.jc().updateFilter(e,"idpv",!0)&&(a.value="")}),o.Xb(1,"mat-icon"),o.Oc(2,"close"),o.Wb(),o.Wb()}}function ct(t,e){if(1&t){const t=o.Yb();o.Xb(0,"mat-form-field",0),o.Xb(1,"input",39,3),o.fc("keyup",function(e){return o.Dc(t),o.jc().updateFilter(e,"idpv",!0)}),o.Wb(),o.Mc(3,at,3,0,"button",4),o.Wb()}if(2&t){const t=o.Ac(2);o.Eb(3),o.pc("ngIf",t.value)}}function rt(t,e){if(1&t){const t=o.Yb();o.Xb(0,"button",25),o.fc("click",function(e){o.Dc(t),o.jc();const a=o.Ac(2);return o.jc().updateFilter(e,"message",!1)&&(a.value="")}),o.Xb(1,"mat-icon"),o.Oc(2,"close"),o.Wb(),o.Wb()}}function nt(t,e){if(1&t){const t=o.Yb();o.Xb(0,"mat-form-field",0),o.Xb(1,"input",39,3),o.fc("keyup",function(e){return o.Dc(t),o.jc().updateFilter(e,"message",!1)}),o.Wb(),o.Mc(3,rt,3,0,"button",4),o.Wb()}if(2&t){const t=o.Ac(2);o.Eb(3),o.pc("ngIf",t.value)}}function it(t,e){if(1&t){const t=o.Yb();o.Xb(0,"button",25),o.fc("click",function(e){o.Dc(t),o.jc();const a=o.Ac(2);return o.jc().updateFilter(e,"shostname",!1)&&(a.value="")}),o.Xb(1,"mat-icon"),o.Oc(2,"close"),o.Wb(),o.Wb()}}function ot(t,e){if(1&t){const t=o.Yb();o.Xb(0,"mat-form-field",0),o.Xb(1,"input",39,3),o.fc("keyup",function(e){return o.Dc(t),o.jc().updateFilter(e,"shostname",!1)}),o.Wb(),o.Mc(3,it,3,0,"button",4),o.Wb()}if(2&t){const t=o.Ac(2);o.Eb(3),o.pc("ngIf",t.value)}}function st(t,e){if(1&t){const t=o.Yb();o.Xb(0,"button",25),o.fc("click",function(e){o.Dc(t),o.jc();const a=o.Ac(2);return o.jc().updateFilter(e,"sinstancia",!1)&&(a.value="")}),o.Xb(1,"mat-icon"),o.Oc(2,"close"),o.Wb(),o.Wb()}}function lt(t,e){if(1&t){const t=o.Yb();o.Xb(0,"mat-form-field",0),o.Xb(1,"input",39,3),o.fc("keyup",function(e){return o.Dc(t),o.jc().updateFilter(e,"sinstancia",!1)}),o.Wb(),o.Mc(3,st,3,0,"button",4),o.Wb()}if(2&t){const t=o.Ac(2);o.Eb(3),o.pc("ngIf",t.value)}}const ut=function(){return{y:"50px",delay:"300ms"}},bt=function(t){return{value:"*",params:t}},mt=[{path:"",component:(()=>{class t{constructor(t,e,a,c,r,n){this.servicioRegistro=t,this.snack=e,this.loader=a,this.dialog=c,this.confirmService=r,this.breakpointObserver=n,this.fields={},this.timeOutDuration=800,this.rows=[],this.order="fcreacion DESC",this.search="",this.page={count:0,offset:0,limit:10}}ngOnInit(){this.refresh(),this.servicioRegistro.obtenerPV().subscribe(t=>{this.puntosDeVenta=t,console.log(t)}),this.breakpointObserver.observe([v.b.XSmall,v.b.Small,v.b.Medium,v.b.Large,v.b.XLarge]).subscribe(t=>{this.isXSmall=this.breakpointObserver.isMatched(v.b.XSmall),this.isSmall=this.breakpointObserver.isMatched(v.b.Small),this.isMedium=this.breakpointObserver.isMatched(v.b.Medium),this.isLarge=this.breakpointObserver.isMatched(v.b.Large),this.isXLarge=this.breakpointObserver.isMatched(v.b.XLarge)})}mostrarOcultar(t){switch(t){case"XS":return!0;case"S":return this.isSmall||this.isMedium||this.isLarge||this.isXLarge;case"M":return this.isMedium||this.isLarge||this.isXLarge;case"L":return this.isLarge||this.isXLarge;case"XL":return this.isXLarge}}prepararFiltro(){this.filter='{"and":[';var t=this.search.split(" ");t.length>0&&t.forEach((t,e)=>{t.length>1&&(this.filter+=`{"or":[{"sinstancia":{"ilike":"%${t}%"}},{"message":{"ilike":"%${t}%"}},{"shostname":{"ilike":"%${t}%"}}]}`,e<this.search.length-1&&(this.filter+=","))}),this.filter+=S.a.prepararFiltroAPI(this.fields),this.filter+='{"deletedon":{"eq":null}}]}'}refresh(){this.prepararFiltro(),Object(M.a)([this.servicioRegistro.obtenerCount(this.filter),this.servicioRegistro.obtenerDatos(this.filter,this.page.limit,this.page.offset*this.page.limit,this.order)]).subscribe(t=>{this.page.count=t[0].count,this.rows=t[1],0==this.rows.length&&this.rows.push({})},t=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}pageCallback(t){this.page.offset=t.offset,this.refresh()}updateFilter(t,e,a){if(t&&e){var c=t.target.value;t instanceof MouseEvent&&(c=""),this.fields[e]={search:c,exact:a}}else t&&(this.search=t instanceof MouseEvent?"":t.target.value);return clearTimeout(this.timeOut),this.timeOut=setTimeout(()=>{this.refresh()},this.timeOutDuration),!0}onSort(t){const e=t.sorts[0];this.order=`${e.prop} ${e.dir.toUpperCase()}`,this.refresh()}openPopUp(t={}){this.dialog.open(E,{width:"720px",disableClose:!0,data:{title:"INFORMACION",payload:t,puntoDeVenta:this.puntosDeVenta.find(e=>e.idpv=t.idpv).sdescripcion}}).afterClosed()}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(w),o.Rb(k.a),o.Rb(n.a),o.Rb(i.b),o.Rb(r.a),o.Rb(v.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["app-registry"]],decls:33,vars:36,consts:[[1,"margin-333",2,"width","100%"],["matPrefix",""],["matInput","","value","",3,"placeholder","keyup"],["searchinput",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"p-0"],["summaryRow","true",1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","rowHeight","count","offset","limit","externalPaging","selectionType","page","sort"],["prop","sinstancia",3,"summaryTemplate","name","flexGrow",4,"ngIf"],["prop","fcreacion",3,"name","flexGrow",4,"ngIf"],["prop","message",3,"summaryTemplate","name","flexGrow",4,"ngIf"],["prop","soperadorcreacion",3,"name","flexGrow",4,"ngIf"],["prop","hostname",3,"summaryTemplate","name","flexGrow",4,"ngIf"],["prop","sversion",3,"name","flexGrow",4,"ngIf"],["prop","idpv",3,"summaryTemplate","name","flexGrow",4,"ngIf"],["prop","ssistemaoperativo",3,"name","flexGrow",4,"ngIf"],["prop","finicioapp",3,"name","flexGrow",4,"ngIf"],["prop","rtemperaturaactual",3,"summaryFunc","name","flexGrow",4,"ngIf"],["prop","rtemperaturapromedio",3,"summaryFunc","name","flexGrow",4,"ngIf"],["prop","rcpuloadpromedio",3,"summaryFunc","name","flexGrow",4,"ngIf"],[3,"name","flexGrow","sortable"],["ngx-datatable-cell-template",""],["tabla1idpv",""],["tabla1message",""],["tabla1shostname",""],["tabla1sinstancia",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["prop","sinstancia",3,"summaryTemplate","name","flexGrow"],["prop","fcreacion",3,"name","flexGrow"],["prop","message",3,"summaryTemplate","name","flexGrow"],["prop","soperadorcreacion",3,"name","flexGrow"],["prop","hostname",3,"summaryTemplate","name","flexGrow"],["prop","sversion",3,"name","flexGrow"],["prop","idpv",3,"summaryTemplate","name","flexGrow"],["prop","ssistemaoperativo",3,"name","flexGrow"],["prop","finicioapp",3,"name","flexGrow"],["prop","rtemperaturaactual",3,"summaryFunc","name","flexGrow"],["prop","rtemperaturapromedio",3,"summaryFunc","name","flexGrow"],["prop","rcpuloadpromedio",3,"summaryFunc","name","flexGrow"],["mat-icon-button","","mat-sm-button","","color","foreground",1,"mr-16",3,"click"],["matInput","","placeholder","","value","",3,"keyup"]],template:function(t,e){if(1&t&&(o.Xb(0,"mat-form-field",0),o.Xb(1,"mat-icon",1),o.Oc(2,"search"),o.Wb(),o.Xb(3,"input",2,3),o.fc("keyup",function(t){return e.updateFilter(t,null,null)}),o.kc(5,"translate"),o.Wb(),o.Mc(6,G,3,0,"button",4),o.Wb(),o.Xb(7,"mat-card",5),o.Xb(8,"mat-card-content",5),o.Xb(9,"ngx-datatable",6),o.fc("page",function(t){return e.pageCallback(t)})("sort",function(t){return e.onSort(t)}),o.Mc(10,I,3,5,"ngx-datatable-column",7),o.Mc(11,A,3,4,"ngx-datatable-column",8),o.Mc(12,Y,3,5,"ngx-datatable-column",9),o.Mc(13,C,3,4,"ngx-datatable-column",10),o.Mc(14,N,3,5,"ngx-datatable-column",11),o.Mc(15,U,3,4,"ngx-datatable-column",12),o.Mc(16,Q,3,5,"ngx-datatable-column",13),o.Mc(17,$,3,4,"ngx-datatable-column",14),o.Mc(18,B,3,4,"ngx-datatable-column",15),o.Mc(19,z,3,5,"ngx-datatable-column",16),o.Mc(20,Z,3,5,"ngx-datatable-column",17),o.Mc(21,tt,3,5,"ngx-datatable-column",18),o.Xb(22,"ngx-datatable-column",19),o.kc(23,"translate"),o.Mc(24,et,3,0,"ng-template",20),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Mc(25,ct,4,1,"ng-template",null,21,o.Nc),o.Mc(27,nt,4,1,"ng-template",null,22,o.Nc),o.Mc(29,ot,4,1,"ng-template",null,23,o.Nc),o.Mc(31,lt,4,1,"ng-template",null,24,o.Nc)),2&t){const t=o.Ac(4);o.Eb(3),o.qc("placeholder",o.lc(5,29,"REGISTRYCOMPONENT.FILTER")),o.Eb(3),o.pc("ngIf",t.value),o.Eb(1),o.pc("@animate",o.vc(34,bt,o.uc(33,ut))),o.Eb(2),o.pc("rows",e.rows)("columnMode","flex")("headerHeight",50)("footerHeight",50)("scrollbarH",!1)("rowHeight","auto")("count",e.page.count)("offset",e.page.offset)("limit",e.page.limit)("externalPaging",!0)("selectionType","single"),o.Eb(1),o.pc("ngIf",e.mostrarOcultar("S")),o.Eb(1),o.pc("ngIf",e.mostrarOcultar("XS")),o.Eb(1),o.pc("ngIf",e.mostrarOcultar("XS")),o.Eb(1),o.pc("ngIf",e.mostrarOcultar("L")),o.Eb(1),o.pc("ngIf",e.mostrarOcultar("L")),o.Eb(1),o.pc("ngIf",e.mostrarOcultar("L")),o.Eb(1),o.pc("ngIf",e.mostrarOcultar("XS")),o.Eb(1),o.pc("ngIf",e.mostrarOcultar("L")),o.Eb(1),o.pc("ngIf",e.mostrarOcultar("L")),o.Eb(1),o.pc("ngIf",e.mostrarOcultar("XL")),o.Eb(1),o.pc("ngIf",e.mostrarOcultar("XL")),o.Eb(1),o.pc("ngIf",e.mostrarOcultar("XL")),o.Eb(1),o.qc("name",o.lc(23,31,"SALES.ACTIONS")),o.pc("flexGrow",1)("sortable",!1)}},directives:[P.c,m.a,P.g,X.b,l.o,s.a,s.b,T.d,T.b,T.a,b.b,P.h],pipes:[p.c,l.f,l.g],styles:[""],data:{animation:[c.a]}}),t})(),data:{title:"REGISTRO"}}];var pt=a("iInd"),ft=a("s7LF"),dt=a("f44v"),ht=a("SqCe"),gt=a("rJgo"),Ot=a("jMqV"),Et=a("ZFy/"),Rt=a("u9T3"),yt=a("PCNd");let wt=(()=>{class t{}return t.\u0275mod=o.Pb({type:t}),t.\u0275inj=o.Ob({factory:function(e){return new(e||t)},providers:[w],imports:[[l.c,ft.t,Rt.a,T.f,X.c,m.b,s.c,gt.c,b.c,dt.a,ht.b,Et.b,i.f,k.b,Ot.b,p.b,yt.a,pt.k.forChild(mt)]]}),t})()}}]);