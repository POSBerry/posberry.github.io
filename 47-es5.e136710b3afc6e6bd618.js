!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{"oZ/c":function(a,t,i){"use strict";i.r(t),i.d(t,"CustomerDisplaySettingsModule",function(){return z});var o=i("SVse"),c=i("3sEA"),r=i("vpPe"),s=i("O/+5"),d=i("8Y7J"),u=i("zHaW"),p=i("PDjf");function b(e,n){if(1&e){var a=d.Yb();d.Xb(0,"mat-card-content"),d.Xb(1,"h4"),d.Oc(2),d.Wb(),d.Sb(3,"img",1),d.Sb(4,"br"),d.Sb(5,"input",2),d.Xb(6,"button",3),d.fc("click",function(){d.Dc(a);var e=n.$implicit;return d.jc().enviarImagen(e.nombre,e.indice)}),d.Oc(7,"Enviar"),d.Wb(),d.Wb()}if(2&e){var t=n.$implicit;d.Eb(2),d.Qc("Im\xe1gen ",11==t.indice?"Fondo Promociones":t.indice,""),d.Eb(1),d.qc("src",t.url,d.Fc),d.Eb(2),d.qc("id",t.nombre)}}var m,l,f=[{path:"",component:(m=function(){function a(n,t,i,o){e(this,a),this.servicioTicket=n,this.loader=t,this.snack=i,this.servicioUUID=o,this.idEmpresa=""}var t,i,o;return t=a,(i=[{key:"ngOnInit",value:function(){var e=this;this.loader.open(),this.servicioTicket.obtenerEmpresas().subscribe(function(n){e.idEmpresa=n[0].id,e.listadoImagenes=[];for(var a=1;a<=11;a++)e.listadoImagenes.push({url:"https://s3.sa-east-1.amazonaws.com/images.posberry.com/".concat(e.idEmpresa,"-").concat(a,".png?")+e.servicioUUID.generateUUID(),indice:a,nombre:"".concat(e.idEmpresa,"-").concat(a)});e.loader.close()},function(n){e.loader.close(),e.snack.open("ERROR","OK",{duration:4e3})})}},{key:"enviarImagen",value:function(e,n){!function(e,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){var e,t=[];t.push(encodeURIComponent("image")+"="+encodeURIComponent(a.result)),t.push(encodeURIComponent("name")+"="+encodeURIComponent(n)),e=t.join("&").replace(/%20/g,"+");var i=new XMLHttpRequest;i.withCredentials=!0,i.addEventListener("readystatechange",function(){4===this.readyState&&alert("Imagen enviada. Puede que necesite recargar la p\xe1gina para ver la nueva im\xe1gen en miniatura.")}),i.open("POST","/api/subidas3"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.setRequestHeader("cache-control","no-cache"),i.send(e)},a.onerror=function(e){alert("Error: no se pudo enviar la imagen")}}(document.getElementById(e).files[0],e)}}])&&n(t.prototype,i),o&&n(t,o),a}(),m.\u0275fac=function(e){return new(e||m)(d.Rb(s.a),d.Rb(c.a),d.Rb(u.a),d.Rb(r.a))},m.\u0275cmp=d.Lb({type:m,selectors:[["app-customer-display-settings"]],decls:5,vars:1,consts:[[4,"ngFor","ngForOf"],["width","320","height","auto",3,"src"],["type","file","accept",".png",3,"id"],["type","submit",1,"btn","btn-raised","btn-primary",3,"click"]],template:function(e,n){1&e&&(d.Xb(0,"mat-card"),d.Xb(1,"mat-card-content"),d.Xb(2,"p"),d.Oc(3,"Puede seleccionar hasta 10 imagenes como banner y una imagen de fondo para las Promociones."),d.Wb(),d.Wb(),d.Mc(4,b,8,3,"mat-card-content",0),d.Wb()),2&e&&(d.Eb(4),d.pc("ngForOf",n.listadoImagenes))},directives:[p.a,p.b,o.n],styles:[""]}),m),data:{title:"CUSTOMER DISPLAY"}}],g=i("iInd"),v=i("u9T3"),h=i("s7LF"),y=i("Dxy4"),w=i("pMoy"),I=i("f44v"),E=i("TN/R"),R=i("iELJ"),O=i("40+f"),T=i("Tj54"),k=i("e6WT"),C=i("SqCe"),S=i("rJgo"),U=i("BTe0"),P=i("zQhy"),j=i("ZTz/"),D=i("jMqV"),W=i("M9ds"),q=i("ZFy/"),F=i("TSSN"),L=i("w9WL"),M=i("aYsj"),X=i("PCNd"),J=i("hrfs"),Y=i("pYyI"),z=((l=function n(){e(this,n)}).\u0275mod=d.Pb({type:l}),l.\u0275inj=d.Ob({factory:function(e){return new(e||l)},imports:[[o.c,h.t,v.a,L.f,k.c,k.c,p.c,k.c,y.c,I.a,k.c,q.b,R.f,u.b,D.b,W.c,j.b,T.b,F.b,X.a,E.g,h.j,C.b,S.c,O.b,w.b,P.c,U.b,J.a,Y.a,M.a,g.k.forChild(f)]]}),l)}}])}();