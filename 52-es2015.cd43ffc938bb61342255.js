(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{CgJX:function(t,o,e){"use strict";e.r(o),e.d(o,"PurchasesPlanModule",function(){return Z});var a=e("SVse"),c=e("s7LF"),n=e("GmJt"),l=e("3sEA"),r=e("bPAe"),i=e("CHRX"),s=e("7M/S"),b=e("AytR"),u=e("8Y7J"),p=e("IheW");let d=(()=>{class t{constructor(t){this.http=t}obtenerDepositos(){return this.http.get(encodeURI(b.a.apiURL+'Depositos?filter={"where":{"deletedon":{"eq":null}}}'))}obtenerStock(t){return this.http.get(encodeURI(`${b.a.apiURL}Compras/PlanDeCompras?iddeposito=${t}`))}obtenerHistorialProducto(t,o){return this.http.get(encodeURI(`${b.a.apiURL}Productos/GetHistorialStock?idProducto=${o}&idDeposito=${t}`))}}return t.\u0275fac=function(o){return new(o||t)(u.bc(p.c))},t.\u0275prov=u.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=e("iELJ"),g=e("zHaW"),m=e("PDjf"),h=e("VDRc"),x=e("Q2Ze"),w=e("ZTz/"),k=e("Dxy4"),v=e("Tj54"),S=e("w9WL"),E=e("UhP/"),W=e("jMqV"),P=e("TSSN");function R(t,o){if(1&t&&(u.Xb(0,"mat-option",17),u.Oc(1),u.Wb()),2&t){const t=o.$implicit;u.pc("value",t),u.Eb(1),u.Pc(null==t?null:t.sdescripcion)}}function X(t,o){if(1&t&&(u.Xb(0,"div",1),u.Xb(1,"mat-slide-toggle",18),u.Oc(2),u.kc(3,"translate"),u.Wb(),u.Xb(4,"mat-slide-toggle",18),u.Oc(5),u.kc(6,"translate"),u.Wb(),u.Wb()),2&t){const t=u.jc();u.Eb(1),u.pc("formControl",t.toggle),u.Eb(1),u.Pc(u.lc(3,4,"Solo Activos")),u.Eb(2),u.pc("formControl",t.toggleStock),u.Eb(1),u.Qc("",u.lc(6,6,"Solo Stock debajo del m\xednimo")," ")}}function O(t,o){if(1&t&&u.Oc(0),2&t){const t=o.row;u.Qc(" ",null==t?null:t.sCodProducto," ")}}function y(t,o){if(1&t&&u.Oc(0),2&t){const t=o.row;u.Qc(" ",null==t?null:t.sProducto," ")}}function C(t,o){if(1&t&&u.Oc(0),2&t){const t=o.row;u.Qc(" ",null==t?null:t.sFamilia," ")}}function M(t,o){if(1&t&&u.Oc(0),2&t){const t=o.row;u.Qc(" ",null==t?null:t.Proveedores," ")}}function D(t,o){if(1&t&&(u.Oc(0),u.kc(1,"number")),2&t){const t=o.row;u.Qc(" ",u.lc(1,1,null==t?null:t.rStock)," ")}}function A(t,o){if(1&t&&(u.Oc(0),u.kc(1,"number")),2&t){const t=o.row;u.Qc(" ",u.lc(1,1,null==t?null:t.rStockMinimo)," ")}}function F(t,o){if(1&t){const t=u.Yb();u.Xb(0,"button",5),u.fc("click",function(){return u.Dc(t),u.jc(3).export()}),u.Xb(1,"mat-icon"),u.Oc(2,"save_alt"),u.Wb(),u.Oc(3),u.kc(4,"translate"),u.Wb()}2&t&&(u.Eb(3),u.Qc("",u.lc(4,1,"SALES.EXCEL")," "))}function H(t,o){if(1&t&&(u.Xb(0,"div",20),u.Mc(1,F,5,3,"button",21),u.Wb()),2&t){const t=u.jc(2);u.Eb(1),u.pc("ngIf",t.tabla1.data.length>0)}}function L(t,o){1&t&&(u.Xb(0,"ngx-datatable-footer"),u.Mc(1,H,2,1,"ng-template",19),u.Wb())}const G=function(){return{y:"50px",delay:"300ms"}},I=function(t){return{value:"*",params:t}},Q=[{path:"",component:(()=>{class t{constructor(t,o,e,a,n,l){this.dialog=t,this.servicioStock=o,this.servicioExportarExcel=e,this.loader=a,this.snack=n,this.servicioPermisos=l,this.toggle=new c.e(!0,[]),this.toggleValue=!0,this.toggleStock=new c.e(!1,[]),this.toggleStockValue=!1,this.toggle.valueChanges.subscribe(t=>{this.toggleValue=t,this.tabla1.updateFilterBoolean(this.toggleValue?"T":"","bActivo")}),this.toggleStock.valueChanges.subscribe(t=>{this.toggleStockValue=t,this.tabla1.filterRows()})}ngOnInit(){this.tabla1=new i.a,this.tabla1.groupField="",this.tabla1.secondarySort="sProducto",this.tabla1.sum=[],this.loader.open(),this.servicioStock.obtenerDepositos().subscribe(t=>{this.depositos=t,this.depositos.sort((t,o)=>t.sdescripcion>o.sdescripcion?1:t.sdescripcion<o.sdescripcion?-1:0),this.depositoActual=this.depositos[0],this.loader.close()},t=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}refresh(){this.loader.open(),this.servicioStock.obtenerStock(this.depositoActual.id).subscribe(t=>{this.tabla1.setData(t.filter(()=>!0)),console.log(this.tabla1),this.loader.close()},t=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}seleccionarDeposito(t){this.depositoActual=t}getRowHeight(t){return 50}export(){var t=this.tabla1.data.map(t=>({Dep\u00f3sito:t.sDeposito,C\u00f3digo:t.sCodProducto,Nombre:t.sProducto,Familia:t.sFamilia,Stock:t.rStock}));this.servicioExportarExcel.exportExcel(t,"stock","stock")}onSort(t){const o=t.sorts[0];this.tabla1.secondarySort=o.prop,this.tabla1.sortDir=o.dir,this.tabla1.sortData()}openPopUp(t={}){}}return t.\u0275fac=function(o){return new(o||t)(u.Rb(f.b),u.Rb(d),u.Rb(r.a),u.Rb(l.a),u.Rb(g.a),u.Rb(s.a))},t.\u0275cmp=u.Lb({type:t,selectors:[["app-purchases-plan"]],decls:37,vars:48,consts:[[1,"p-0"],["fxLayout","row wrap","fxLayoutAlign","end center",1,"p-8"],["appearance","fill","fxFlex","100","fxFlex.gt-xs","25","fxFlex.gt-sm","16",1,"m-8"],[3,"value","selectionChange","valueChange"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"m-8",3,"click"],["class","p-8","fxLayout","row wrap","fxLayoutAlign","end center",4,"ngIf"],[1,"material","expandable","bg-white",2,"height","70vh",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","scrollbarH","rows","summaryRow","externalSorting","selectionType","sort"],["myTable",""],["prop","sCodProducto",3,"name","flexGrow"],["ngx-datatable-cell-template",""],["prop","sProducto",3,"name","flexGrow"],["prop","sFamilia",3,"name","flexGrow"],["prop","Proveedores",3,"name","flexGrow"],["prop","rStock",3,"name","flexGrow"],["prop","rStockMinimo",3,"name","flexGrow"],[4,"ngIf"],[3,"value"],[1,"m-8",3,"formControl"],["ngx-datatable-footer-template",""],[1,"p-8",2,"margin-left","auto"],["mat-raised-button","","class","m-8","color","primary",3,"click",4,"ngIf"]],template:function(t,o){1&t&&(u.Xb(0,"mat-card",0),u.Xb(1,"div",1),u.Xb(2,"mat-form-field",2),u.Xb(3,"mat-label"),u.Oc(4),u.kc(5,"translate"),u.Wb(),u.Xb(6,"mat-select",3),u.fc("selectionChange",function(t){return o.seleccionarDeposito(t.value)})("valueChange",function(t){return o.depositoActual=t}),u.Mc(7,R,2,2,"mat-option",4),u.Wb(),u.Wb(),u.Xb(8,"button",5),u.fc("click",function(){return o.refresh()}),u.Xb(9,"mat-icon"),u.Oc(10,"search"),u.Wb(),u.Oc(11),u.kc(12,"translate"),u.Wb(),u.Wb(),u.Mc(13,X,7,8,"div",6),u.Wb(),u.Xb(14,"mat-card",0),u.Xb(15,"mat-card-content",0),u.Xb(16,"ngx-datatable",7,8),u.fc("sort",function(t){return o.onSort(t)}),u.Xb(18,"ngx-datatable-column",9),u.kc(19,"translate"),u.Mc(20,O,1,1,"ng-template",10),u.Wb(),u.Xb(21,"ngx-datatable-column",11),u.kc(22,"translate"),u.Mc(23,y,1,1,"ng-template",10),u.Wb(),u.Xb(24,"ngx-datatable-column",12),u.kc(25,"translate"),u.Mc(26,C,1,1,"ng-template",10),u.Wb(),u.Xb(27,"ngx-datatable-column",13),u.kc(28,"translate"),u.Mc(29,M,1,1,"ng-template",10),u.Wb(),u.Xb(30,"ngx-datatable-column",14),u.kc(31,"translate"),u.Mc(32,D,2,3,"ng-template",10),u.Wb(),u.Xb(33,"ngx-datatable-column",15),u.kc(34,"translate"),u.Mc(35,A,2,3,"ng-template",10),u.Wb(),u.Mc(36,L,2,0,"ngx-datatable-footer",16),u.Wb(),u.Wb(),u.Wb()),2&t&&(u.Eb(4),u.Pc(u.lc(5,29,"Dep\xf3sitos")),u.Eb(2),u.pc("value",o.depositoActual),u.Eb(1),u.pc("ngForOf",o.depositos),u.Eb(4),u.Qc("",u.lc(12,31,"SALES.SHOW")," "),u.Eb(2),u.pc("ngIf",o.tabla1.data.length>0),u.Eb(1),u.pc("@animate",u.vc(46,I,u.uc(45,G))),u.Eb(2),u.pc("columnMode","flex")("headerHeight",50)("footerHeight",100)("rowHeight",o.getRowHeight)("scrollbarV",!0)("scrollbarH",!0)("rows",o.tabla1.rows)("summaryRow",!0)("externalSorting",!0)("selectionType","single"),u.Eb(2),u.qc("name",u.lc(19,33,"C\xf3digo")),u.pc("flexGrow",1),u.Eb(3),u.qc("name",u.lc(22,35,"Nombre")),u.pc("flexGrow",2),u.Eb(3),u.qc("name",u.lc(25,37,"Familia")),u.pc("flexGrow",1),u.Eb(3),u.qc("name",u.lc(28,39,"Proveedor")),u.pc("flexGrow",1),u.Eb(3),u.qc("name",u.lc(31,41,"Stock")),u.pc("flexGrow",1),u.Eb(3),u.qc("name",u.lc(34,43,"Stock M\xednimo")),u.pc("flexGrow",1),u.Eb(3),u.pc("ngIf",o.tabla1.data.length>0))},directives:[m.a,h.c,h.b,x.c,h.a,x.f,w.a,a.n,k.b,v.a,a.o,m.b,S.d,S.b,S.a,E.n,W.a,c.o,c.f,S.e,S.c],pipes:[P.c,a.g],styles:[""],data:{animation:[n.a]}}),t})(),data:{title:"PLAN DE COMPRAS"}}];var T=e("iInd"),V=e("u9T3"),j=e("f44v"),q=e("TN/R"),U=e("e6WT"),N=e("M9ds"),J=e("ZFy/"),$=e("PCNd");let Z=(()=>{class t{}return t.\u0275mod=u.Pb({type:t}),t.\u0275inj=u.Ob({factory:function(o){return new(o||t)},imports:[[a.c,c.t,V.a,S.f,U.c,U.c,m.c,U.c,k.c,j.a,U.c,J.b,f.f,g.b,W.b,N.c,w.b,v.b,P.b,$.a,q.g,T.k.forChild(Q)]]}),t})()}}]);