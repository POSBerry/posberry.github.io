(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{JIvT:function(t,a,e){"use strict";e.r(a),e.d(a,"CheckingAccountStatementModule",function(){return at});var n=e("SVse"),o=e("u9T3"),c=e("s7LF"),l=e("Dxy4"),i=e("PDjf"),r=e("f44v"),s=e("TN/R"),b=e("iELJ"),u=e("Tj54"),d=e("e6WT"),p=e("ZTz/"),m=e("jMqV"),h=e("zHaW"),f=e("M9ds"),g=e("ZFy/"),y=e("iInd"),C=e("TSSN"),v=e("w9WL"),w=e("PCNd"),x=e("GmJt"),E=e("3sEA"),W=e("wd/R"),X=e("bPAe"),R=e("CHRX"),k=e("i59u"),A=e("rbHy"),D=e("AytR"),M=e("cp0P"),I=e("8Y7J"),S=e("IheW");let O=(()=>{class t{constructor(t){this.http=t}obtenerDatos(t){return Object(M.a)([this.http.get(encodeURI(`${D.a.apiURL}Clientes/obtenerSaldoCliente?idcliente=${t}`)),this.http.get(encodeURI(`${D.a.apiURL}Clientes/ExtractoCliente?idcliente=${t}`)),this.http.get(encodeURI(`${D.a.apiURL}Clientes/${t}/`))])}obtenerDatosVenta(t){return Object(M.a)([this.http.get(encodeURI(`${D.a.apiURL}Ventasitems/DetalleDeVentaPorId?idVenta=${t}`)),this.http.get(encodeURI(`${D.a.apiURL}Ventas/DetalleDeMovCajaVenta?idVenta=${t}`)),this.http.get(encodeURI(`${D.a.apiURL}Ventas/${t}/`))])}}return t.\u0275fac=function(a){return new(a||t)(I.bc(S.c))},t.\u0275prov=I.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var T=e("ura0"),j=e("Q2Ze");const P=function(t,a){return{"ngx-alert-success":t,"ngx-alert-danger":a}};function L(t,a){if(1&t&&(I.Xb(0,"mat-card-content"),I.Xb(1,"p"),I.Xb(2,"b"),I.Oc(3,"Cliente:"),I.Wb(),I.Oc(4),I.Wb(),I.Xb(5,"p"),I.Xb(6,"b"),I.Oc(7,"Saldo:"),I.Wb(),I.Oc(8),I.kc(9,"currency"),I.Wb(),I.Xb(10,"p"),I.Xb(11,"b"),I.Oc(12,"L\xedmite de Cr\xe9dito:"),I.Wb(),I.Oc(13),I.kc(14,"currency"),I.Wb(),I.Xb(15,"p"),I.Xb(16,"b"),I.Oc(17,"Saldo Disponible:"),I.Wb(),I.Oc(18," (Saldo + L\xedmite de Cr\xe9dito) "),I.Xb(19,"span",14),I.Oc(20),I.kc(21,"currency"),I.Wb(),I.Wb(),I.Wb()),2&t){const t=I.jc();I.Eb(4),I.Qc(" ",t.cliente.srazonsocial,""),I.Eb(4),I.Qc(" ",I.lc(9,5,t.saldoCliente.totventas+t.saldoCliente.totmovcaja),""),I.Eb(5),I.Qc(" ",I.lc(14,7,t.saldoCliente.limitecredito),""),I.Eb(6),I.pc("ngClass",I.wc(11,P,t.saldoCliente.saldo>0,t.saldoCliente.saldo<=0)),I.Eb(1),I.Pc(I.lc(21,9,t.saldoCliente.saldo))}}function H(t,a){if(1&t&&(I.Oc(0),I.kc(1,"date")),2&t){const t=a.row;I.Qc(" ",I.mc(1,1,null==t?null:t.fecha,"dd/MM/yyyy HH:mm:ss")," ")}}function V(t,a){if(1&t&&I.Oc(0),2&t){const t=a.row;I.Qc(" ",null==t?null:t.tipo," ")}}function U(t,a){if(1&t&&(I.Oc(0),I.kc(1,"currency")),2&t){const t=a.row;I.Qc(" ",I.lc(1,1,null==t?null:t.saldo)," ")}}function F(t,a){if(1&t){const t=I.Yb();I.Xb(0,"input",16),I.fc("input",function(a){I.Dc(t);const e=I.jc().row;return I.jc().rowChange(a,e)}),I.Wb()}if(2&t){const t=I.jc().row;I.pc("min",0)("max",null==t?null:t.saldoABS)("value",null==t?null:t.totalAPagar)}}function Y(t,a){if(1&t&&I.Mc(0,F,1,3,"input",15),2&t){const t=a.row;I.pc("ngIf",(null==t?null:t.venta)&&(null==t?null:t.saldoABS)>.001)}}function $(t,a){if(1&t){const t=I.Yb();I.Xb(0,"button",18),I.fc("click",function(){I.Dc(t);const a=I.jc().row;return I.jc().openPopUp(a)}),I.Xb(1,"mat-icon"),I.Oc(2,"info"),I.Wb(),I.Wb()}}function N(t,a){if(1&t&&I.Mc(0,$,3,0,"button",17),2&t){const t=a.row;I.pc("ngIf",!t.isGroup&&t.venta)}}function Q(t,a){if(1&t){const t=I.Yb();I.Xb(0,"button",22),I.fc("click",function(){return I.Dc(t),I.jc(3).export()}),I.Xb(1,"mat-icon"),I.Oc(2,"save_alt"),I.Wb(),I.Oc(3),I.kc(4,"translate"),I.Wb()}2&t&&(I.Eb(3),I.Qc("",I.lc(4,1,"SALES.EXCEL")," "))}function q(t,a){if(1&t&&(I.Xb(0,"div",20),I.Mc(1,Q,5,3,"button",21),I.Wb()),2&t){const t=I.jc(2);I.Eb(1),I.pc("ngIf",t.tabla1.data.length>0)}}function J(t,a){1&t&&(I.Xb(0,"ngx-datatable-footer"),I.Mc(1,q,2,1,"ng-template",19),I.Wb())}function z(t,a){if(1&t){const t=I.Yb();I.Xb(0,"mat-form-field",23),I.Xb(1,"input",24),I.fc("keyup",function(a){return I.Dc(t),I.jc().tabla1.updateFilter(a,"fecha")}),I.Wb(),I.Wb()}}function G(t,a){if(1&t){const t=I.Yb();I.Xb(0,"mat-form-field",23),I.Xb(1,"input",24),I.fc("keyup",function(a){return I.Dc(t),I.jc().tabla1.updateFilter(a,"tipo")}),I.Wb(),I.Wb()}}function _(t,a){if(1&t){const t=I.Yb();I.Xb(0,"mat-form-field",23),I.Xb(1,"input",25),I.fc("keyup",function(a){return I.Dc(t),I.jc().tabla1.updateFilter(a,"saldo")}),I.Wb(),I.Wb()}}function B(t,a){if(1&t){const t=I.Yb();I.Xb(0,"mat-form-field",23),I.Xb(1,"input",25),I.fc("keyup",function(a){return I.Dc(t),I.jc().tabla1.updateFilter(a,"totalAPagar")}),I.Wb(),I.Wb()}}const Z=function(){return{y:"50px",delay:"300ms"}},K=function(t){return{value:"*",params:t}},tt=[{path:"",component:(()=>{class t{constructor(t,a,e,n,o,c,l){this.dialog=t,this.servicioVentas=a,this.route=e,this.servicioExtractoCliente=n,this.loader=o,this.snack=c,this.servicioExportarExcel=l,this.totalAPagar=0}ngOnInit(){this.tabla1=new R.a,this.tabla1.groupField="",this.tabla1.secondarySort="fecha",this.tabla1.sum=[],this.tabla1.sortDir="desc";const t=this.route.snapshot.paramMap.get("id");console.log(t),this.loader.open(),this.servicioExtractoCliente.obtenerDatos(t).subscribe(t=>{this.saldoCliente=t[0][0],this.saldoCliente.saldo=this.saldoCliente.totventas+this.saldoCliente.totmovcaja+this.saldoCliente.limitecredito,this.extractocliente=t[1],this.cliente=t[2],this.totalAPagar=0;var a=this.extractocliente.map(t=>{var a={};return a.id=t.id,a.fecha=t.fecha,a.saldo=t.saldo,a.saldoABS=Math.abs(t.saldo),a.tipo=t.tipo,a.saldo<0&&(this.totalAPagar+=Math.abs(a.saldo)),a.credito="CRE"==t.condventa||"---"==t.condventa,a.venta="---"!=t.condventa,a.element=t,a.totalAPagar=null,a});this.totalAPagar=parseFloat(this.totalAPagar.toFixed(2)),this.tabla1.setData(a),console.log(this.tabla1.data),this.loader.close()},t=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}getRowHeight(t){return 50}onSort(t){const a=t.sorts[0];this.tabla1.secondarySort=a.prop,this.tabla1.sortDir=a.dir,this.tabla1.sortData()}rowChange(t,a){a.totalAPagar=t.target.value&&null!=t.target.value?parseFloat(t.target.value):null}openPopUp(t={}){this.loader.open(),this.servicioExtractoCliente.obtenerDatosVenta(t.id).subscribe(a=>{this.loader.close();var e="";0!=a[2].idpvcaea&&(e="CAEA no informado.",a[2].fcaeainformado&&(e="CAEA Informado el "+new Date(t.fcaeainformado).toLocaleDateString())),this.dialog.open(k.a,{width:"720px",disableClose:!0,data:{title:"DETALLE DE VENTA",payload:a[2],ventaitems:a[0],ventamovcaja:a[1],sleyendacaea:e}}).afterClosed().subscribe(t=>{})},t=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}export(){var t=this.tabla1.data.map(t=>({Cliente:this.cliente.srazonsocial,Fecha:W(t.fecha).format("DD/MM/YYYY HH:mm:ss"),Tipo:t.tipo,Saldo:t.saldo}));this.servicioExportarExcel.exportExcel(t,"cuenta_corriente_"+this.cliente.srazonsocial,"cuenta_corriente")}getCellClass({row:t}){return{"ngx-alert-success":t.saldo>0,"ngx-alert-danger":t.saldo<=0}}}return t.\u0275fac=function(a){return new(a||t)(I.Rb(b.b),I.Rb(A.a),I.Rb(y.a),I.Rb(O),I.Rb(E.a),I.Rb(h.a),I.Rb(X.a))},t.\u0275cmp=I.Lb({type:t,selectors:[["app-checking-account-statement"]],decls:30,vars:46,consts:[[4,"ngIf"],[1,"p-0"],[1,"material","expandable","bg-white",2,"height","50vh",3,"columnMode","headerHeight","footerHeight","rowHeight","scrollbarV","scrollbarH","rows","summaryRow","externalSorting","selectionType","sort"],["myTable",""],["prop","fecha",3,"summaryTemplate","name","width"],["ngx-datatable-cell-template",""],["prop","tipo",3,"summaryTemplate","name","width"],["prop","saldo",3,"cellClass","summaryTemplate","name","width"],["prop","totalAPagar",3,"summaryTemplate","name","width"],[3,"name","flexGrow","sortable"],["tabla1fecha",""],["tabla1tipo",""],["tabla1saldo",""],["tabla1totalAPagar",""],[3,"ngClass"],["matInput","","placeholder","","type","number","step","any",3,"min","max","value","input",4,"ngIf"],["matInput","","placeholder","","type","number","step","any",3,"min","max","value","input"],["mat-icon-button","","mat-sm-button","","color","foreground","class","mr-16",3,"click",4,"ngIf"],["mat-icon-button","","mat-sm-button","","color","foreground",1,"mr-16",3,"click"],["ngx-datatable-footer-template",""],[1,"p-8",2,"margin-left","auto"],["mat-raised-button","","class","m-8","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",1,"m-8",3,"click"],[1,"margin-333",2,"width","100%"],["matInput","","placeholder","","value","",3,"keyup"],["type","number","matInput","","placeholder","","value","",3,"keyup"]],template:function(t,a){if(1&t&&(I.Xb(0,"mat-card"),I.Mc(1,L,22,14,"mat-card-content",0),I.Wb(),I.Xb(2,"mat-card",1),I.Xb(3,"mat-card-content",1),I.Xb(4,"ngx-datatable",2,3),I.fc("sort",function(t){return a.onSort(t)}),I.Xb(6,"ngx-datatable-column",4),I.kc(7,"translate"),I.Mc(8,H,2,4,"ng-template",5),I.Wb(),I.Xb(9,"ngx-datatable-column",6),I.kc(10,"translate"),I.Mc(11,V,1,1,"ng-template",5),I.Wb(),I.Xb(12,"ngx-datatable-column",7),I.kc(13,"translate"),I.Mc(14,U,2,3,"ng-template",5),I.Wb(),I.Xb(15,"ngx-datatable-column",8),I.kc(16,"translate"),I.Mc(17,Y,1,1,"ng-template",5),I.Wb(),I.Xb(18,"ngx-datatable-column",9),I.kc(19,"translate"),I.Mc(20,N,1,1,"ng-template",5),I.Wb(),I.Mc(21,J,2,0,"ngx-datatable-footer",0),I.Wb(),I.Wb(),I.Wb(),I.Mc(22,z,2,0,"ng-template",null,10,I.Nc),I.Mc(24,G,2,0,"ng-template",null,11,I.Nc),I.Mc(26,_,2,0,"ng-template",null,12,I.Nc),I.Mc(28,B,2,0,"ng-template",null,13,I.Nc)),2&t){const t=I.Ac(23),e=I.Ac(25),n=I.Ac(27),o=I.Ac(29);I.pc("@animate",I.vc(41,K,I.uc(40,Z))),I.Eb(1),I.pc("ngIf",a.cliente&&a.saldoCliente),I.Eb(1),I.pc("@animate",I.vc(44,K,I.uc(43,Z))),I.Eb(2),I.pc("columnMode","standard")("headerHeight",50)("footerHeight",100)("rowHeight",a.getRowHeight)("scrollbarV",!0)("scrollbarH",!0)("rows",a.tabla1.rows)("summaryRow",!0)("externalSorting",!0)("selectionType","single"),I.Eb(2),I.qc("name",I.lc(7,30,"Fecha")),I.pc("summaryTemplate",t)("width",200),I.Eb(3),I.qc("name",I.lc(10,32,"Tipo")),I.pc("summaryTemplate",e)("width",500),I.Eb(3),I.qc("name",I.lc(13,34,"Saldo")),I.pc("cellClass",a.getCellClass)("summaryTemplate",n)("width",150),I.Eb(3),I.qc("name",I.lc(16,36,"Cargar Pago")),I.pc("summaryTemplate",o)("width",150),I.Eb(3),I.qc("name",I.lc(19,38,"SALES.ACTIONS")),I.pc("flexGrow",1)("sortable",!1),I.Eb(3),I.pc("ngIf",a.tabla1.data.length>0)}},directives:[i.a,n.o,i.b,v.d,v.b,v.a,n.m,T.a,d.b,l.b,u.a,v.e,v.c,j.c],pipes:[C.c,n.d,n.f],styles:[""],data:{animation:[x.a]}}),t})(),data:{title:"Cuenta Corriente"}}];let at=(()=>{class t{}return t.\u0275mod=I.Pb({type:t}),t.\u0275inj=I.Ob({factory:function(a){return new(a||t)},imports:[[n.c,c.s,o.a,v.f,d.c,d.c,i.c,d.c,l.c,r.a,d.c,g.b,b.e,h.b,m.b,f.c,p.b,u.b,C.b,w.a,s.c,y.k.forChild(tt)]]}),t})()}}]);