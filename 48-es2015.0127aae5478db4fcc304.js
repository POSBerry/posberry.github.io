(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{"oZ/c":function(e,t,n){"use strict";n.r(t),n.d(t,"CustomerDisplaySettingsModule",function(){return q});var a=n("SVse"),i=n("3sEA"),c=n("vpPe"),s=n("O/+5"),r=n("8Y7J"),o=n("zHaW"),d=n("PDjf"),p=n("TSSN");function b(e,t){if(1&e){const e=r.Yb();r.Xb(0,"mat-card-content"),r.Xb(1,"h4"),r.Oc(2),r.kc(3,"translate"),r.Wb(),r.Sb(4,"img",1),r.Sb(5,"br"),r.Sb(6,"input",2),r.Xb(7,"button",3),r.fc("click",function(){r.Dc(e);const n=t.$implicit;return r.jc().enviarImagen(n.nombre,n.indice)}),r.Oc(8),r.kc(9,"translate"),r.Wb(),r.Wb()}if(2&e){const e=t.$implicit;r.Eb(2),r.Rc("",r.lc(3,5,"CUSTOMERDISPLAY.PICTURE")," ",11==e.indice?"Fondo Promociones":e.indice,""),r.Eb(2),r.qc("src",e.url,r.Fc),r.Eb(2),r.qc("id",e.nombre),r.Eb(2),r.Pc(r.lc(9,7,"CUSTOMERDISPLAY.SEND"))}}const l=[{path:"",component:(()=>{class e{constructor(e,t,n,a){this.servicioTicket=e,this.loader=t,this.snack=n,this.servicioUUID=a,this.idEmpresa=""}ngOnInit(){this.loader.open(),this.servicioTicket.obtenerEmpresas().subscribe(e=>{this.idEmpresa=e[0].id,this.listadoImagenes=[];for(var t=1;t<=11;t++)this.listadoImagenes.push({url:`https://s3.sa-east-1.amazonaws.com/images.posberry.com/${this.idEmpresa}-${t}.png?`+this.servicioUUID.generateUUID(),indice:t,nombre:`${this.idEmpresa}-${t}`});this.loader.close()},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}enviarImagen(e,t){!function(e,t){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){var e,a=[];a.push(encodeURIComponent("image")+"="+encodeURIComponent(n.result)),a.push(encodeURIComponent("name")+"="+encodeURIComponent(t)),e=a.join("&").replace(/%20/g,"+");var i=new XMLHttpRequest;i.withCredentials=!0,i.addEventListener("readystatechange",function(){4===this.readyState&&alert("Imagen enviada. Puede que necesite recargar la p\xe1gina para ver la nueva im\xe1gen en miniatura.")}),i.open("POST","/api/subidas3"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.setRequestHeader("cache-control","no-cache"),i.send(e)},n.onerror=function(e){alert("Error: no se pudo enviar la imagen")}}(document.getElementById(e).files[0],e)}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(s.a),r.Rb(i.a),r.Rb(o.a),r.Rb(c.a))},e.\u0275cmp=r.Lb({type:e,selectors:[["app-customer-display-settings"]],decls:6,vars:4,consts:[[4,"ngFor","ngForOf"],["width","320","height","auto",3,"src"],["type","file","accept",".png",3,"id"],["type","submit",1,"btn","btn-raised","btn-primary",3,"click"]],template:function(e,t){1&e&&(r.Xb(0,"mat-card"),r.Xb(1,"mat-card-content"),r.Xb(2,"p"),r.Oc(3),r.kc(4,"translate"),r.Wb(),r.Wb(),r.Mc(5,b,10,9,"mat-card-content",0),r.Wb()),2&e&&(r.Eb(3),r.Pc(r.lc(4,2,"CUSTOMERDISPLAY.PARRAF1")),r.Eb(2),r.pc("ngForOf",t.listadoImagenes))},directives:[d.a,d.b,a.n],pipes:[p.c],styles:[""]}),e})(),data:{title:"CUSTOMER DISPLAY"}}];var m=n("iInd"),u=n("u9T3"),h=n("s7LF"),f=n("Dxy4"),g=n("pMoy"),R=n("f44v"),E=n("TN/R"),I=n("iELJ"),v=n("40+f"),y=n("Tj54"),S=n("e6WT"),w=n("SqCe"),T=n("rJgo"),U=n("BTe0"),C=n("zQhy"),O=n("ZTz/"),P=n("jMqV"),D=n("M9ds"),k=n("ZFy/"),L=n("w9WL"),M=n("aYsj"),F=n("PCNd"),W=n("hrfs"),j=n("pYyI");let q=(()=>{class e{}return e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({factory:function(t){return new(t||e)},imports:[[a.c,h.t,u.a,L.f,S.c,S.c,d.c,S.c,f.c,R.a,S.c,k.b,I.f,o.b,P.b,D.c,O.b,y.b,p.b,F.a,E.g,h.j,w.b,T.c,v.b,g.b,C.c,U.b,W.a,j.a,M.a,m.k.forChild(l)]]}),e})()}}]);