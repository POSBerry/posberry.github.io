(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{WDA5:function(e,a,t){"use strict";t.r(a),t.d(a,"TicketSettingsModule",function(){return L});var i=t("SVse"),n=t("3sEA"),s=t("O/+5"),o=t("8Y7J"),c=t("zHaW"),r=t("PDjf"),d=t("Dxy4"),l=t("Tj54"),b=t("s7LF"),h=t("Q2Ze"),p=t("e6WT"),m=t("iELJ"),g=t("TSSN");const u=[{path:"",component:(()=>{class e{constructor(e,a,t){this.servicioTicket=e,this.loader=a,this.snack=t,this.encabezado1="",this.encabezado2="",this.pie="",this.pie2="",this.pie3="",this.mostrarEliminar=!1,this.fileName="",this.formCancelar=function(){this.cargarlogo("canvaslogo",this.empresas.slogo),this.empresas.sencabezado1&&(this.encabezado1=this.empresas.sencabezado1),this.empresas.sencabezado2&&(this.encabezado2=this.empresas.sencabezado2),this.empresas.spie&&(this.pie=this.empresas.spie),this.empresas.spie2&&(this.pie2=this.empresas.spie2),this.empresas.spie3&&(this.pie3=this.empresas.spie3)}}ngOnInit(){this.loader.open(),this.servicioTicket.obtenerEmpresas().subscribe(e=>{this.empresas=e[0],this.cargarlogo("canvaslogo",this.empresas.slogo),this.empresas.sencabezado1&&(this.encabezado1=this.empresas.sencabezado1),this.empresas.sencabezado2&&(this.encabezado2=this.empresas.sencabezado2),this.empresas.spie&&(this.pie=this.empresas.spie),this.empresas.spie2&&(this.pie2=this.empresas.spie2),this.empresas.spie3&&(this.pie3=this.empresas.spie3),this.loader.close()},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}formGuardar(){this.loader.open(),this.servicioTicket.obtenerEmpresas().subscribe(e=>{this.empresas=e[0];var a=document.getElementById("canvaslogo"),t={};Object.assign(t,this.empresas),t.slogo=0!=a.width&&0!=a.height?a.toDataURL():null,t.sencabezado1=this.encabezado1,t.sencabezado2=this.encabezado2,t.spie=this.pie,t.spie2=this.pie2,t.spie3=this.pie3,this.servicioTicket.actualizarEmpresa(t).subscribe(e=>{this.loader.close(),this.snack.open("\xa1Configuraci\xf3n Guardada!","OK",{duration:4e3})},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}formEliminar(){var e=document.getElementById("canvaslogo");e.width=0,e.height=0,this.mostrarEliminar=!1}cargarlogo(e,a){this.mostrarEliminar=a;var t=document.getElementById(e),i=t.getContext("2d");if(t.width=0,t.height=0,a){var n=new Image;n.onload=function(){t.width=n.width,t.height=n.height,i.drawImage(n,0,0)},n.src=a}}fileExist(e){const a=e.target.files[0];a&&(this.fileName=a.name)}submitLogo(e,a,t){var i=document.getElementById(e),n=i.getContext("2d"),s=document.getElementById(a).files[0];if(null!=s){this.mostrarEliminar=!0;var o=new FileReader;o.onload=e=>{var a=new Image;a.onload=()=>{i.width=a.width,i.height=a.height,n.drawImage(a,0,0);for(var e=n.getImageData(0,0,i.width,i.height),t=0;t<e.data.length;t+=4){var s=Math.round(.3*e.data[t]+.59*e.data[t+1]+.11*e.data[t+2])<127?0:255;e.data[t+3]<255&&(s=e.data[t+3]<127?255:0,e.data[t+3]=255),e.data[t]=s,e.data[t+1]=s,e.data[t+2]=s}n.putImageData(e,0,0,0,0,e.width,e.height)},a.src=e.target.result,this.fileName=""},o.readAsDataURL(s)}}}return e.\u0275fac=function(a){return new(a||e)(o.Rb(s.a),o.Rb(n.a),o.Rb(c.a))},e.\u0275cmp=o.Lb({type:e,selectors:[["app-ticket-settings"]],decls:53,vars:16,consts:[["mat-button","","color","warn","type","button",3,"click"],["id","canvaslogo",1,"m-16"],[3,"hidden"],["type","file","id","inputlogo","accept","image/x-png",3,"change"],["fileUpload",""],["mat-raised-button","","color","primary",1,"m-8",3,"click"],["mat-raised-button","","type","submit","color","primary","value","Upload Image","name","submit",1,"mb-16",3,"click"],[1,"full-width"],["matInput","","maxlength","50","placeholder","Encabezado 1",3,"ngModel","ngModelChange"],["matInput","","maxlength","50","placeholder","Encabezado 2",3,"ngModel","ngModelChange"],["matInput","","maxlength","50","placeholder","Pie 1",3,"ngModel","ngModelChange"],["matInput","","maxlength","50","placeholder","Pie 2",3,"ngModel","ngModelChange"],["matInput","","maxlength","50","placeholder","Pie 3",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,a){if(1&e){const e=o.Yb();o.Xb(0,"mat-card"),o.Xb(1,"mat-card-content"),o.Xb(2,"p"),o.Oc(3,"Puede cambiar el logo, el encabezado y el pie de p\xe1gina de los tickets impresos."),o.Wb(),o.Xb(4,"p"),o.Oc(5,"Las im\xe1gen debe estar en "),o.Xb(6,"strong"),o.Oc(7,"formato PNG sin transparencia con fondo blanco, texto y/o logo negro"),o.Wb(),o.Oc(8," (Resoluci\xf3n recomendada 500 pixeles de ancho por 130 pixeles de alto). Si tiene transparencia o si tiene color / escala de grises "),o.Xb(9,"strong"),o.Oc(10,"se convertir\xe1 a blanco y negro autom\xe1ticamente"),o.Wb(),o.Oc(11,". "),o.Wb(),o.Wb(),o.Xb(12,"mat-card-content"),o.Xb(13,"button",0),o.fc("click",function(){return a.formEliminar()}),o.Xb(14,"mat-icon"),o.Oc(15,"delete"),o.Wb(),o.Oc(16),o.kc(17,"translate"),o.Wb(),o.Sb(18,"br"),o.Sb(19,"canvas",1),o.Xb(20,"form"),o.Xb(21,"div",2),o.Xb(22,"input",3,4),o.fc("change",function(e){return a.fileExist(e)}),o.Wb(),o.Wb(),o.Xb(24,"div",2),o.Oc(25),o.Xb(26,"button",5),o.fc("click",function(){return o.Dc(e),o.Ac(23).click()}),o.Xb(27,"mat-icon"),o.Oc(28,"attach_file"),o.Wb(),o.Oc(29,"Cargar im\xe1gen "),o.Wb(),o.Wb(),o.Xb(30,"div",2),o.Oc(31),o.Xb(32,"button",6),o.fc("click",function(){return a.submitLogo("canvaslogo","inputlogo","logo")}),o.Xb(33,"mat-icon"),o.Oc(34,"cloud_upload"),o.Wb(),o.Oc(35,"Subir "),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(36,"mat-card-content"),o.Xb(37,"mat-form-field",7),o.Xb(38,"input",8),o.fc("ngModelChange",function(e){return a.encabezado1=e}),o.Wb(),o.Wb(),o.Xb(39,"mat-form-field",7),o.Xb(40,"input",9),o.fc("ngModelChange",function(e){return a.encabezado2=e}),o.Wb(),o.Wb(),o.Xb(41,"mat-form-field",7),o.Xb(42,"input",10),o.fc("ngModelChange",function(e){return a.pie=e}),o.Wb(),o.Wb(),o.Xb(43,"mat-form-field",7),o.Xb(44,"input",11),o.fc("ngModelChange",function(e){return a.pie2=e}),o.Wb(),o.Wb(),o.Xb(45,"mat-form-field",7),o.Xb(46,"input",12),o.fc("ngModelChange",function(e){return a.pie3=e}),o.Wb(),o.Wb(),o.Xb(47,"mat-dialog-content"),o.Xb(48,"button",13),o.fc("click",function(){return a.formGuardar()}),o.Xb(49,"mat-icon"),o.Oc(50,"save"),o.Wb(),o.Oc(51),o.kc(52,"translate"),o.Wb(),o.Wb(),o.Wb(),o.Wb()}2&e&&(o.Eb(16),o.Qc("",o.lc(17,12,"Eliminar Logo")," "),o.Eb(5),o.pc("hidden",!0),o.Eb(3),o.pc("hidden",a.fileName),o.Eb(1),o.Qc(" ",a.fileName||"Ning\xfan archivo cargado todav\xeda."," "),o.Eb(5),o.pc("hidden",!a.fileName),o.Eb(1),o.Qc(" ",a.fileName||"Ning\xfan archivo cargado todav\xeda."," "),o.Eb(7),o.pc("ngModel",a.encabezado1),o.Eb(2),o.pc("ngModel",a.encabezado2),o.Eb(2),o.pc("ngModel",a.pie),o.Eb(2),o.pc("ngModel",a.pie2),o.Eb(2),o.pc("ngModel",a.pie3),o.Eb(5),o.Qc("",o.lc(52,14,"FAMILIESPOPUPCOMPONENT.SAVE")," "))},directives:[r.a,r.b,d.b,l.a,b.w,b.p,b.q,h.c,p.b,b.c,b.k,b.o,b.r,m.e],pipes:[g.c],styles:[""]}),e})(),data:{title:"TICKETS CONFIGURACION"}}];var f=t("iInd"),E=t("u9T3"),W=t("pMoy"),v=t("f44v"),O=t("TN/R"),X=t("40+f"),z=t("SqCe"),k=t("rJgo"),M=t("BTe0"),w=t("zQhy"),I=t("ZTz/"),y=t("jMqV"),C=t("M9ds"),R=t("ZFy/"),N=t("w9WL"),T=t("aYsj"),x=t("PCNd"),P=t("hrfs"),S=t("pYyI");let L=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(a){return new(a||e)},imports:[[i.c,b.t,E.a,N.f,p.c,p.c,r.c,p.c,d.c,v.a,p.c,R.b,m.f,c.b,y.b,C.c,I.b,l.b,g.b,x.a,O.g,b.j,z.b,k.c,X.b,W.b,w.c,M.b,P.a,S.a,T.a,f.k.forChild(u)]]}),e})()}}]);