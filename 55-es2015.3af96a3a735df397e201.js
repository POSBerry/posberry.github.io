(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{WDA5:function(e,a,t){"use strict";t.r(a),t.d(a,"TicketSettingsModule",function(){return N});var i=t("SVse"),s=t("3sEA"),n=t("O/+5"),o=t("8Y7J"),r=t("zHaW"),c=t("PDjf"),d=t("Dxy4"),l=t("Tj54"),b=t("s7LF"),p=t("Q2Ze"),h=t("e6WT"),m=t("iELJ"),g=t("TSSN");const u=[{path:"",component:(()=>{class e{constructor(e,a,t){this.servicioTicket=e,this.loader=a,this.snack=t,this.encabezado1="",this.encabezado2="",this.pie="",this.pie2="",this.pie3="",this.mostrarEliminar=!1,this.formCancelar=function(){this.cargarlogo("canvaslogo",this.empresas.slogo),this.empresas.sencabezado1&&(this.encabezado1=this.empresas.sencabezado1),this.empresas.sencabezado2&&(this.encabezado2=this.empresas.sencabezado2),this.empresas.spie&&(this.pie=this.empresas.spie),this.empresas.spie2&&(this.pie2=this.empresas.spie2),this.empresas.spie3&&(this.pie3=this.empresas.spie3)}}ngOnInit(){this.loader.open(),this.servicioTicket.obtenerEmpresas().subscribe(e=>{this.empresas=e[0],this.cargarlogo("canvaslogo",this.empresas.slogo),this.empresas.sencabezado1&&(this.encabezado1=this.empresas.sencabezado1),this.empresas.sencabezado2&&(this.encabezado2=this.empresas.sencabezado2),this.empresas.spie&&(this.pie=this.empresas.spie),this.empresas.spie2&&(this.pie2=this.empresas.spie2),this.empresas.spie3&&(this.pie3=this.empresas.spie3),this.loader.close()},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}formGuardar(){this.loader.open(),this.servicioTicket.obtenerEmpresas().subscribe(e=>{this.empresas=e[0];var a=document.getElementById("canvaslogo"),t={};Object.assign(t,this.empresas),t.slogo=0!=a.width&&0!=a.height?a.toDataURL():null,t.sencabezado1=this.encabezado1,t.sencabezado2=this.encabezado2,t.spie=this.pie,t.spie2=this.pie2,t.spie3=this.pie3,this.servicioTicket.actualizarEmpresa(t).subscribe(e=>{this.loader.close(),this.snack.open("\xa1Configuraci\xf3n Guardada!","OK",{duration:4e3})},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}formEliminar(){var e=document.getElementById("canvaslogo");e.width=0,e.height=0,this.mostrarEliminar=!1}cargarlogo(e,a){this.mostrarEliminar=a;var t=document.getElementById(e),i=t.getContext("2d");if(t.width=0,t.height=0,a){var s=new Image;s.onload=function(){t.width=s.width,t.height=s.height,i.drawImage(s,0,0)},s.src=a}}submitLogo(e,a,t){var i=document.getElementById(e),s=i.getContext("2d"),n=document.getElementById(a).files[0];if(null!=n){this.mostrarEliminar=!0;var o=new FileReader;o.onload=e=>{var a=new Image;a.onload=()=>{i.width=a.width,i.height=a.height,s.drawImage(a,0,0);for(var e=s.getImageData(0,0,i.width,i.height),t=0;t<e.data.length;t+=4){var n=Math.round(.3*e.data[t]+.59*e.data[t+1]+.11*e.data[t+2])<127?0:255;e.data[t+3]<255&&(n=e.data[t+3]<127?255:0,e.data[t+3]=255),e.data[t]=n,e.data[t+1]=n,e.data[t+2]=n}s.putImageData(e,0,0,0,0,e.width,e.height)},a.src=e.target.result},o.readAsDataURL(n)}}}return e.\u0275fac=function(a){return new(a||e)(o.Rb(n.a),o.Rb(s.a),o.Rb(r.a))},e.\u0275cmp=o.Lb({type:e,selectors:[["app-ticket-settings"]],decls:40,vars:11,consts:[["mat-button","","color","warn","type","button",3,"click"],["id","canvaslogo",1,"m-16"],[3,"submit"],["type","file","id","inputlogo","accept","image/x-png"],["mat-raised-button","","color","primary","type","submit"],[1,"full-width"],["matInput","","maxlength","50","placeholder","Encabezado 1",3,"ngModel","ngModelChange"],["matInput","","maxlength","50","placeholder","Encabezado 2",3,"ngModel","ngModelChange"],["matInput","","maxlength","50","placeholder","Pie 1",3,"ngModel","ngModelChange"],["matInput","","maxlength","50","placeholder","Pie 2",3,"ngModel","ngModelChange"],["matInput","","maxlength","50","placeholder","Pie 3",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,a){1&e&&(o.Xb(0,"mat-card"),o.Xb(1,"mat-card-content"),o.Xb(2,"p"),o.Oc(3,"Puede cambiar el logo, el encabezado y el pie de p\xe1gina de los tickets impresos."),o.Wb(),o.Xb(4,"p"),o.Oc(5,"Las im\xe1gen debe estar en "),o.Xb(6,"strong"),o.Oc(7,"formato PNG sin transparencia con fondo blanco, texto y/o logo negro"),o.Wb(),o.Oc(8," (Resoluci\xf3n recomendada 500 pixeles de ancho por 130 pixeles de alto). Si tiene transparencia o si tiene color / escala de grises "),o.Xb(9,"strong"),o.Oc(10,"se convertir\xe1 a blanco y negro autom\xe1ticamente"),o.Wb(),o.Oc(11,". "),o.Wb(),o.Wb(),o.Xb(12,"mat-card-content"),o.Xb(13,"button",0),o.fc("click",function(){return a.formEliminar()}),o.Xb(14,"mat-icon"),o.Oc(15,"delete"),o.Wb(),o.Oc(16),o.kc(17,"translate"),o.Wb(),o.Sb(18,"br"),o.Sb(19,"canvas",1),o.Xb(20,"form",2),o.fc("submit",function(){return a.submitLogo("canvaslogo","inputlogo","logo")}),o.Sb(21,"input",3),o.Sb(22,"input",4),o.Wb(),o.Wb(),o.Xb(23,"mat-card-content"),o.Xb(24,"mat-form-field",5),o.Xb(25,"input",6),o.fc("ngModelChange",function(e){return a.encabezado1=e}),o.Wb(),o.Wb(),o.Xb(26,"mat-form-field",5),o.Xb(27,"input",7),o.fc("ngModelChange",function(e){return a.encabezado2=e}),o.Wb(),o.Wb(),o.Xb(28,"mat-form-field",5),o.Xb(29,"input",8),o.fc("ngModelChange",function(e){return a.pie=e}),o.Wb(),o.Wb(),o.Xb(30,"mat-form-field",5),o.Xb(31,"input",9),o.fc("ngModelChange",function(e){return a.pie2=e}),o.Wb(),o.Wb(),o.Xb(32,"mat-form-field",5),o.Xb(33,"input",10),o.fc("ngModelChange",function(e){return a.pie3=e}),o.Wb(),o.Wb(),o.Xb(34,"mat-dialog-content"),o.Xb(35,"button",11),o.fc("click",function(){return a.formGuardar()}),o.Xb(36,"mat-icon"),o.Oc(37,"save"),o.Wb(),o.Oc(38),o.kc(39,"translate"),o.Wb(),o.Wb(),o.Wb(),o.Wb()),2&e&&(o.Eb(16),o.Qc("",o.lc(17,7,"Eliminar Logo")," "),o.Eb(9),o.pc("ngModel",a.encabezado1),o.Eb(2),o.pc("ngModel",a.encabezado2),o.Eb(2),o.pc("ngModel",a.pie),o.Eb(2),o.pc("ngModel",a.pie2),o.Eb(2),o.pc("ngModel",a.pie3),o.Eb(5),o.Qc("",o.lc(39,9,"FAMILIESPOPUPCOMPONENT.SAVE")," "))},directives:[c.a,c.b,d.b,l.a,b.w,b.p,b.q,p.c,h.b,b.c,b.k,b.o,b.r,m.e],pipes:[g.c],styles:[""]}),e})(),data:{title:"TICKETS CONFIGURACION"}}];var f=t("iInd"),E=t("u9T3"),z=t("pMoy"),W=t("f44v"),v=t("TN/R"),M=t("40+f"),w=t("SqCe"),O=t("rJgo"),I=t("BTe0"),X=t("zQhy"),k=t("ZTz/"),y=t("jMqV"),C=t("M9ds"),R=t("ZFy/"),T=t("w9WL"),S=t("aYsj"),x=t("PCNd"),P=t("hrfs"),L=t("pYyI");let N=(()=>{class e{}return e.\u0275mod=o.Pb({type:e}),e.\u0275inj=o.Ob({factory:function(a){return new(a||e)},imports:[[i.c,b.t,E.a,T.f,h.c,h.c,c.c,h.c,d.c,W.a,h.c,R.b,m.f,r.b,y.b,C.c,k.b,l.b,g.b,x.a,v.g,b.j,w.b,O.c,M.b,z.b,X.c,I.b,P.a,L.a,S.a,f.k.forChild(u)]]}),e})()}}]);