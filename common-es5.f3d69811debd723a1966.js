!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"Ap+n":function(e,a,o){"use strict";o.d(a,"a",function(){return m});var c=o("iELJ"),r=o("GmJt"),i=o("8Y7J"),u=o("PDjf"),s=o("VDRc"),l=o("Dxy4"),d=o("Tj54"),f=o("TSSN"),p=o("SVse"),b=function(){return{y:"50px",delay:"300ms"}},v=function(t){return{value:"*",params:t}},m=function(){var e=function(){function e(n,a){t(this,e),this.data=n,this.dialogRef=a}return n(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Rb(c.a),i.Rb(c.f))},e.\u0275cmp=i.Lb({type:e,selectors:[["app-user-info-popup"]],decls:23,vars:37,consts:[["matDialogTitle",""],["ng-if","data.payload.fModificacion"],["fxLayout","row wrap","fxLayoutAlign","end"],["fxFlex","100",1,"mt-16"],["mat-button","","color","warn","type","button",3,"click"]],template:function(t,e){1&t&&(i.Xb(0,"h1",0),i.Oc(1),i.Wb(),i.Xb(2,"mat-dialog-content"),i.Xb(3,"mat-card"),i.Xb(4,"mat-card-content"),i.Xb(5,"h5"),i.Oc(6),i.kc(7,"translate"),i.kc(8,"date"),i.kc(9,"date"),i.Wb(),i.Xb(10,"h5",1),i.Oc(11),i.kc(12,"translate"),i.kc(13,"date"),i.kc(14,"date"),i.kc(15,"translate"),i.Wb(),i.Wb(),i.Wb(),i.Wb(),i.Xb(16,"mat-dialog-content",2),i.Xb(17,"div",3),i.Xb(18,"button",4),i.fc("click",function(){return e.dialogRef.close(!1)}),i.Xb(19,"mat-icon"),i.Oc(20,"cancel"),i.Wb(),i.Oc(21),i.kc(22,"translate"),i.Wb(),i.Wb(),i.Wb()),2&t&&(i.Eb(1),i.Pc(e.data.title),i.Eb(2),i.pc("@animate",i.vc(35,v,i.uc(34,b))),i.Eb(3),i.Uc("",i.lc(7,14,"Creado")," ",i.mc(8,16,e.data.payload.fcreacion,"dd/MM/yyyy ' a las ' HH:mm")," ",i.mc(9,19,e.data.payload.fCreacion,"dd/MM/yyyy ' a las ' HH:mm")," por ",e.data.payload.soperadorcreacion," ",e.data.payload.sOperadorCreacion,""),i.Eb(5),i.Vc("",i.lc(12,22,"Modificado")," ",i.mc(13,24,e.data.payload.fmodificacion,"dd/MM/yyyy ' a las ' HH:mm"),"",i.mc(14,27,e.data.payload.fModificacion,"dd/MM/yyyy ' a las ' HH:mm")," ",i.lc(15,30,"por")," ",e.data.payload.soperadormodificacion," ",e.data.payload.sOperadorModificacion,""),i.Eb(10),i.Pc(i.lc(22,32,"Cancelar")))},directives:[c.g,c.d,u.a,u.b,s.c,s.b,s.a,l.b,d.a],pipes:[f.c,p.f],styles:[""],data:{animation:[r.a]}}),e}()},BxcV:function(e,n,a){"use strict";a.d(n,"a",function(){return E});var o=a("SVse"),c=a("u9T3"),r=a("s7LF"),i=a("Dxy4"),u=a("PDjf"),s=a("f44v"),l=a("TN/R"),d=a("iELJ"),f=a("Tj54"),p=a("e6WT"),b=a("ZTz/"),v=a("jMqV"),m=a("zHaW"),h=a("M9ds"),y=a("ZFy/"),g=a("TSSN"),x=a("w9WL"),w=a("PCNd"),k=a("8Y7J"),E=function(){var e=function e(){t(this,e)};return e.\u0275mod=k.Pb({type:e}),e.\u0275inj=k.Ob({factory:function(t){return new(t||e)},imports:[[o.c,r.s,c.a,x.f,p.c,p.c,u.c,p.c,i.c,s.a,p.c,y.b,d.e,m.b,v.b,h.c,b.b,f.b,g.b,w.a,l.c]]}),e}()},IAdc:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var a=n("Kqap"),o=n("BFxc"),c=n("xbPD"),r=n("mCNh");function i(t,e,n){return 0===n?[e]:(t.push(e),t)}function u(){return function(t,e){return arguments.length>=2?function(n){return Object(r.a)(Object(a.a)(t,e),Object(o.a)(1),Object(c.a)(e))(n)}:function(e){return Object(r.a)(Object(a.a)(function(e,n,a){return t(e,n,a+1)}),Object(o.a)(1))(e)}}(i,[])}},Iab2:function(t,e,n){var a,o;void 0===(o="function"==typeof(a=function(){"use strict";function e(t,e,n){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){r(a.response,e,n)},a.onerror=function(){console.error("could not download file")},a.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function a(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,c=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(t,c,r){var i=o.URL||o.webkitURL,u=document.createElement("a");u.download=c=c||t.name||"download",u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?a(u):n(u.href)?e(t,c,r):a(u,u.target="_blank")):(u.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(u.href)},4e4),setTimeout(function(){a(u)},0))}:"msSaveOrOpenBlob"in navigator?function(t,o,c){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,c),o);else if(n(t))e(t,o,c);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){a(r)})}}:function(t,n,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,a);var i="application/octet-stream"===t.type,u=/constructor/i.test(o.HTMLElement)||o.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&u||c)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},l.readAsDataURL(t)}else{var d=o.URL||o.webkitURL,f=d.createObjectURL(t);r?r.location=f:location.href=f,r=null,setTimeout(function(){d.revokeObjectURL(f)},4e4)}});o.saveAs=r.saveAs=r,t.exports=r})?a.apply(e,[]):a)||(t.exports=o)},UVsP:function(e,a,o){"use strict";o.d(a,"a",function(){return l});var c=o("AytR"),r=o("HDdC"),i=o("cp0P"),u=o("8Y7J"),s=o("IheW"),l=function(){var e=function(){function e(n){t(this,e),this.http=n}return n(e,[{key:"obtenerDatos",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new r.a(function(o){var r=c.a.apiURL+"Sucursales/SucursalesPorOperador";a&&(r=c.a.apiURL+'Sucursales/?filter={"where":{"deletedon":{"eq":null}}}');var u=[t.http.get(encodeURI(r))];e&&u.push(t.http.get(encodeURI(c.a.apiURL+'PuntosVenta/?filter={"where":{"deletedon":{"eq":null}}}'))),Object(i.a)(u).subscribe(function(t){var c=t[0];if(c=c.map(function(t,e,n){return{bactivo:"T"==t.bactivo,nombre:t.sdescripcion,id:t.idsucursal,idsucursal:t.idsucursal,puntosventas:new Array}}),n&&(c=c.filter(function(t){return t.bactivo})),c.sort(function(t,e){return t.nombre>e.nombre?1:t.nombre<e.nombre?-1:0}),c.splice(0,0,{nombre:"TODAS",id:"",puntosventas:new Array}),e){var r=t[1];n&&(r=r.filter(function(t){return"T"==t.bactivo}));for(var i=0;i<r.length;i++){1!=c.length&&-1==c[0].puntosventas.indexOf(r[i])&&c[0].puntosventas.push(r[i].idpv);for(var u=1;u<c.length;u++)r[i].idsucursal==c[u].idsucursal&&-1==c[u].puntosventas.indexOf(r[i].idpv)&&c[u].puntosventas.push(r[i].idpv)}for(i=0;i<c.length;i++)c[i].puntosventasstr=c[i].puntosventas.join()}a||2!=c.length||c.shift(),o.next(c),o.complete()},function(t){return o.error(t)})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.bc(s.c))},e.\u0275prov=u.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},bPAe:function(e,a,o){"use strict";o.d(a,"a",function(){return u});var c=o("Iab2"),r=o("EUZL"),i=o("8Y7J"),u=function(){var e=function(){function e(){t(this,e),this.fileType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",this.fileExtension=".xlsx"}return n(e,[{key:"exportExcel",value:function(t,e,n){var a,o,c,i=r.utils.json_to_sheet(t),u=r.write({Sheets:(a={},o=n,c=i,o in a?Object.defineProperty(a,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[o]=c,a),SheetNames:[n]},{bookType:"xlsx",type:"array"});this.saveExcelFile(u,e)}},{key:"saveExcelFile",value:function(t,e){var n=new Blob([t],{type:this.fileType});c.saveAs(n,e+this.fileExtension)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},qA6C:function(e,a,o){"use strict";o.d(a,"a",function(){return u});var c=o("AytR"),r=o("8Y7J"),i=o("IheW"),u=function(){var e=function(){function e(n){t(this,e),this.http=n,this.listaProductos=[]}return n(e,[{key:"obtenerDatos",value:function(t,e,n,a){return this.http.get(encodeURI("".concat(c.a.apiURL,'Productos?filter={"where":').concat(t,',"limit":').concat(e,',"skip":').concat(n,',"order":"').concat(a,'"}')))}},{key:"traerProductosPagina",value:function(t,e,n,a){var o=this;this.http.get(encodeURI("".concat(c.a.apiURL,'Productos?filter={"limit":').concat(t,',"skip":').concat(e,',"order":"').concat(n,'"}'))).subscribe(function(c){c.length>0?(o.listaProductos=o.listaProductos.concat(c),o.traerProductosPagina(t,e+t,n,a)):a()})}},{key:"traerProductos",value:function(t,e){this.listaProductos.length=0,this.traerProductosPagina(2e4,0,t,e)}},{key:"obtenerFamilias",value:function(){return this.http.get(encodeURI(c.a.apiURL+'Familias?filter={"where":{"deletedon":{"eq":null}}}'))}},{key:"obtenerProveedores",value:function(){return this.http.get(encodeURI(c.a.apiURL+'Proveedores?filter={"where":{"deletedon":{"eq":null}}}'))}},{key:"obtenerCount",value:function(t){return this.http.get(encodeURI("".concat(c.a.apiURL,"Productos/count?where=").concat(t)))}},{key:"actualizarProducto",value:function(t){return this.http.put("".concat(c.a.apiURL,"Productos/").concat(t.id),t)}},{key:"agregarProducto",value:function(t){return this.http.post(c.a.apiURL+"Productos",t)}},{key:"obtenerEmpresas",value:function(){return this.http.get(c.a.apiURL+"Empresas")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.bc(i.c))},e.\u0275prov=r.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},rGvg:function(e,a,o){"use strict";o.d(a,"a",function(){return P});var c=o("iELJ"),r=o("bPAe"),i=o("wd/R"),u=o("GmJt"),s=o("8Y7J"),l=o("PDjf"),d=o("w9WL"),f=o("SVse"),p=o("VDRc"),b=o("Dxy4"),v=o("Tj54"),m=o("TSSN");function h(t,e){if(1&t&&(s.Oc(0),s.kc(1,"date")),2&t){var n=e.row;s.Qc(" ",s.mc(1,1,null==n?null:n.Fecha,"dd/MM/yyyy HH:mm:ss")," ")}}function y(t,e){if(1&t&&s.Oc(0),2&t){var n=e.row;s.Qc(" ",null==n?null:n.Descripcion," ")}}function g(t,e){if(1&t&&(s.Oc(0),s.kc(1,"number")),2&t){var n=e.row;s.Qc(" ",s.lc(1,1,null==n?null:n.Cantidad)," ")}}function x(t,e){if(1&t&&s.Oc(0),2&t){var n=e.row;s.Qc(" ",null==n?null:n.Operador," ")}}function w(t,e){if(1&t){var n=s.Yb();s.Xb(0,"button",12),s.fc("click",function(){return s.Dc(n),s.jc(3).export()}),s.Xb(1,"mat-icon"),s.Oc(2,"save_alt"),s.Wb(),s.Oc(3),s.kc(4,"translate"),s.Wb()}2&t&&(s.Eb(3),s.Pc(s.lc(4,1,"SALES.EXCEL")))}function k(t,e){if(1&t&&(s.Xb(0,"div",10),s.Mc(1,w,5,3,"button",11),s.Wb()),2&t){var n=s.jc(2);s.Eb(1),s.pc("ngIf",n.data.historialstock.length>0)}}function E(t,e){1&t&&(s.Xb(0,"ngx-datatable-footer"),s.Mc(1,k,2,1,"ng-template",9),s.Wb())}var R=function(){return{y:"50px",delay:"300ms"}},O=function(t){return{value:"*",params:t}},P=function(){var e=function(){function e(n,a,o,c){t(this,e),this.data=n,this.dialogRef=a,this.servicioExportarExcel=o,this.cdRef=c,this.page={count:0,offset:0,limit:10}}return n(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewChecked",value:function(){window.dispatchEvent(new Event("resize")),this.cdRef.detectChanges()}},{key:"export",value:function(){var t=this.data.historialstock.map(function(t){return{Fecha:i(t.Fecha).format("DD/MM/YYYY HH:mm:ss"),"Descripci\xf3n":t.Descripcion,Cantidad:t.Cantidad,Operador:t.Operador}});this.servicioExportarExcel.exportExcel(t,"historial_stock_"+this.data.payload.sProducto,"historial_stock")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Rb(c.a),s.Rb(c.f),s.Rb(r.a),s.Rb(s.h))},e.\u0275cmp=s.Lb({type:e,selectors:[["app-products-popup"]],decls:32,vars:42,consts:[["matDialogTitle",""],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","rowHeight","count","offset","limit","selectionType"],[3,"name","width"],["ngx-datatable-cell-template",""],[4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","end"],["fxFlex","100",1,"mt-16"],["mat-button","","color","warn","type","button",3,"click"],["ngx-datatable-footer-template",""],[1,"p-8",2,"margin-left","auto"],["mat-raised-button","","class","m-8","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",1,"m-8",3,"click"]],template:function(t,e){1&t&&(s.Xb(0,"h1",0),s.Oc(1),s.Wb(),s.Xb(2,"mat-dialog-content"),s.Xb(3,"mat-card"),s.Xb(4,"mat-card-content"),s.Xb(5,"h5"),s.Oc(6),s.Wb(),s.Xb(7,"h5"),s.Oc(8),s.Wb(),s.Wb(),s.Wb(),s.Xb(9,"mat-card",1),s.Xb(10,"mat-card-content",1),s.Xb(11,"ngx-datatable",2),s.Xb(12,"ngx-datatable-column",3),s.kc(13,"translate"),s.Mc(14,h,2,4,"ng-template",4),s.Wb(),s.Xb(15,"ngx-datatable-column",3),s.kc(16,"translate"),s.Mc(17,y,1,1,"ng-template",4),s.Wb(),s.Xb(18,"ngx-datatable-column",3),s.kc(19,"translate"),s.Mc(20,g,2,3,"ng-template",4),s.Wb(),s.Xb(21,"ngx-datatable-column",3),s.kc(22,"translate"),s.Mc(23,x,1,1,"ng-template",4),s.Wb(),s.Mc(24,E,2,0,"ngx-datatable-footer",5),s.Wb(),s.Wb(),s.Wb(),s.Wb(),s.Xb(25,"mat-dialog-content",6),s.Xb(26,"div",7),s.Xb(27,"button",8),s.fc("click",function(){return e.dialogRef.close(!1)}),s.Xb(28,"mat-icon"),s.Oc(29,"cancel"),s.Wb(),s.Oc(30),s.kc(31,"translate"),s.Wb(),s.Wb(),s.Wb()),2&t&&(s.Eb(1),s.Rc("",e.data.title,": ",e.data.payload.sProducto,""),s.Eb(2),s.pc("@animate",s.vc(37,O,s.uc(36,R))),s.Eb(3),s.Qc("Dep\xf3sito: ",e.data.payload.sDeposito,""),s.Eb(2),s.Qc("Stock: ",e.data.payload.rStock,""),s.Eb(1),s.pc("@animate",s.vc(40,O,s.uc(39,R))),s.Eb(2),s.pc("rows",e.data.historialstock)("columnMode","force")("headerHeight",50)("footerHeight",100)("scrollbarH",!0)("rowHeight",50)("count",e.page.count)("offset",e.page.offset)("limit",e.page.limit)("selectionType","single"),s.Eb(1),s.qc("name",s.lc(13,26,"Fecha")),s.pc("width",150),s.Eb(3),s.qc("name",s.lc(16,28,"Descripci\xf3n")),s.pc("width",150),s.Eb(3),s.qc("name",s.lc(19,30,"Cantidad")),s.pc("width",150),s.Eb(3),s.qc("name",s.lc(22,32,"Operador")),s.pc("width",150),s.Eb(3),s.pc("ngIf",e.data.historialstock.length>0),s.Eb(6),s.Pc(s.lc(31,34,"Cancelar")))},directives:[c.g,c.d,l.a,l.b,d.d,d.b,d.a,f.o,p.c,p.b,p.a,b.b,v.a,d.e,d.c],pipes:[m.c,f.f,f.g],styles:[""],data:{animation:[u.a]}}),e}()},vpPe:function(e,a,o){"use strict";o.d(a,"a",function(){return r});var c=o("8Y7J"),r=function(){var e=function(){function e(){t(this,e)}return n(e,[{key:"generateUUID",value:function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();