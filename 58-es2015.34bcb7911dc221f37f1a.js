(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{N3eF:function(e,t,i){"use strict";i.r(t),i.d(t,"BondingSettingsModule",function(){return V});var a=i("SVse"),r=i("3kSh"),n=i("3sEA"),c=i("vpPe"),o=i("cp0P"),s=i("AytR"),l=i("8Y7J"),u=i("IheW");let p=(()=>{class e{constructor(e){this.http=e}obtenerDatos(e,t,i,a){return this.http.get(encodeURI(`${s.a.apiURL}PuntosVenta?filter={"where":${e},"limit":${t},"skip":${i},"order":"${a}"}`))}obtenerCount(e){return this.http.get(encodeURI(`${s.a.apiURL}PuntosVenta/count?where=${e}`))}actualizarSucursales(e){return this.http.put(`${s.a.apiURL}PuntosVenta/${e.id}`,e)}agregarSucursales(e){return this.http.post(s.a.apiURL+"Sucursales",e)}}return e.\u0275fac=function(t){return new(t||e)(l.bc(u.c))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var b=i("iELJ"),h=i("zHaW"),d=i("PDjf"),f=i("Q2Ze"),m=i("Tj54"),g=i("e6WT"),v=i("w9WL"),O=i("Dxy4"),w=i("TSSN");function S(e,t){if(1&e){const e=l.Yb();l.Xb(0,"button",11),l.fc("click",function(t){l.Dc(e);const i=l.jc(),a=l.Ac(17);return i.updateFilter(t)&&(a.value="")}),l.Xb(1,"mat-icon"),l.Oc(2,"close"),l.Wb(),l.Wb()}}function I(e,t){if(1&e&&l.Oc(0),2&e){const e=t.row;l.Qc(" ",null==e?null:e.sdescripcion," ")}}function W(e,t){if(1&e&&l.Oc(0),2&e){const e=t.row;l.Qc(" ",null==e?null:e.hardid," ")}}function k(e,t){if(1&e){const e=l.Yb();l.Xb(0,"button",12),l.fc("click",function(){l.Dc(e);const i=t.row;return l.jc().deleteItem(i)}),l.Xb(1,"mat-icon"),l.Oc(2,"delete"),l.Wb(),l.Wb()}}const R=function(){return{y:"50px",delay:"300ms"}},D=function(e){return{value:"*",params:e}},X=[{path:"",component:(()=>{class e{constructor(e,t,i,a,r,n){this.servicioVinculacion=e,this.dialog=t,this.snack=i,this.confirmService=a,this.loader=r,this.servicioUUID=n,this.timeOutDuration=800,this.rows=[],this.order="sdescripcion ASC",this.search="",this.page={count:0,offset:0,limit:10}}ngOnInit(){this.prepararFiltro(),this.refresh()}prepararFiltro(){if(this.search){this.filter='{"and":[';var e=this.search.split(" ");e.length>0&&(e.forEach((e,t)=>{e.length>1&&(this.filter+=`{"or":[{"sdescripcion":{"ilike":"%${e}%"}}]}`,t<this.search.length-1&&(this.filter+=","))}),this.filter+='{"deletedon":{"eq":null}},{"hardid":{"neq":null}}]}')}else this.filter='{"and":[{"deletedon":{"eq":null}},{"hardid":{"neq":null}}]}'}refresh(){this.prepararFiltro(),Object(o.a)([this.servicioVinculacion.obtenerCount(this.filter),this.servicioVinculacion.obtenerDatos(this.filter,this.page.limit,this.page.offset*this.page.limit,this.order)]).subscribe(e=>{this.page.count=e[0].count,this.rows=e[1]},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}pageCallback(e){this.page.offset=e.offset,this.refresh()}updateFilter(e){return this.search=e instanceof MouseEvent?"":e.target.value,clearTimeout(this.timeOut),this.timeOut=setTimeout(()=>{this.refresh()},this.timeOutDuration),!0}onSort(e){const t=e.sorts[0];this.order=`${t.prop} ${t.dir.toUpperCase()}`,this.refresh()}deleteItem(e){this.confirmService.confirm({message:`\xbfDesvincular ${e.sdescripcion}?`}).subscribe(t=>{if(t){this.loader.open();var i={};Object.assign(i,e),i.hardid=null,this.servicioVinculacion.actualizarSucursales(i).subscribe(e=>{this.refresh(),this.loader.close(),this.snack.open("\xa1Hardware ID Desvinculado!","OK",{duration:4e3})},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}})}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(p),l.Rb(b.b),l.Rb(h.a),l.Rb(r.a),l.Rb(n.a),l.Rb(c.a))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-bonding-settings"]],decls:32,vars:35,consts:[[1,"margin-333",2,"width","100%"],["matPrefix",""],["matInput","","value","",3,"placeholder","keyup"],["searchinput",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","rowHeight","count","offset","limit","externalPaging","selectionType","page","sort"],["prop","sdescripcion",3,"name","flexGrow"],["ngx-datatable-cell-template",""],["prop","hardid",3,"name","flexGrow"],[3,"name","flexGrow"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-icon-button","","mat-sm-button","","color","foreground",1,"mr-16",3,"click"]],template:function(e,t){if(1&e&&(l.Xb(0,"mat-card"),l.Xb(1,"mat-card-content"),l.Xb(2,"h2"),l.Xb(3,"b"),l.Oc(4,"Vinculaci\xf3n de Dispositivos con Punto de Venta"),l.Wb(),l.Wb(),l.Xb(5,"p"),l.Oc(6,"Al iniciar por primera vez el sistema o si no hay ning\xfan dispositivo vinculado, POSBerry asocia su equipo (Hardware ID) con el punto de venta autom\xe1ticamente. Solo puede haber un equipo vinculado por punto de venta a la vez."),l.Wb(),l.Xb(7,"p"),l.Oc(8,'Puede ver el Hardware ID en el programa de escritorio en el men\xfa "Opciones > Acerca de", en la pesta\xf1a "Informe del Sistema", al lado del nombre del "Sistema Operativo".'),l.Wb(),l.Xb(9,"p"),l.Xb(10,"b"),l.Oc(11,"Desvincular:"),l.Wb(),l.Oc(12," si va a desvincular un dispositivo, aseg\xfarese que el programa de escritorio POSBerry esta cerrado en el equipo que va a desvincular."),l.Wb(),l.Wb(),l.Wb(),l.Xb(13,"mat-form-field",0),l.Xb(14,"mat-icon",1),l.Oc(15,"search"),l.Wb(),l.Xb(16,"input",2,3),l.fc("keyup",function(e){return t.updateFilter(e)}),l.kc(18,"translate"),l.Wb(),l.Mc(19,S,3,0,"button",4),l.Wb(),l.Xb(20,"mat-card",5),l.Xb(21,"mat-card-content",5),l.Xb(22,"ngx-datatable",6),l.fc("page",function(e){return t.pageCallback(e)})("sort",function(e){return t.onSort(e)}),l.Xb(23,"ngx-datatable-column",7),l.kc(24,"translate"),l.Mc(25,I,1,1,"ng-template",8),l.Wb(),l.Xb(26,"ngx-datatable-column",9),l.kc(27,"translate"),l.Mc(28,W,1,1,"ng-template",8),l.Wb(),l.Xb(29,"ngx-datatable-column",10),l.kc(30,"translate"),l.Mc(31,k,3,0,"ng-template",8),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e){const e=l.Ac(17);l.pc("@animate",l.vc(30,D,l.uc(29,R))),l.Eb(16),l.qc("placeholder",l.lc(18,21,"BONDINGSETTINGS.FILTER")),l.Eb(3),l.pc("ngIf",e.value),l.Eb(1),l.pc("@animate",l.vc(33,D,l.uc(32,R))),l.Eb(2),l.pc("rows",t.rows)("columnMode","flex")("headerHeight",50)("footerHeight",50)("scrollbarH",!1)("rowHeight",50)("count",t.page.count)("offset",t.page.offset)("limit",t.page.limit)("externalPaging",!0)("selectionType","single"),l.Eb(1),l.qc("name",l.lc(24,23,"BONDINGSETTINGS.BRANCHOFFICE")),l.pc("flexGrow",1),l.Eb(3),l.qc("name",l.lc(27,25,"BONDINGSETTINGS.HARDWAREID")),l.pc("flexGrow",1),l.Eb(3),l.qc("name",l.lc(30,27,"BONDINGSETTINGS.ACTIONS")),l.pc("flexGrow",1)}},directives:[d.a,d.b,f.c,m.a,f.g,g.b,a.o,v.d,v.b,v.a,O.b,f.h],pipes:[w.c],styles:[""]}),e})(),data:{title:"Vinculaci\xf3n"}}];var x=i("iInd"),E=i("u9T3"),T=i("s7LF"),N=i("f44v"),y=i("ZTz/"),P=i("jMqV"),q=i("M9ds"),G=i("ZFy/"),H=i("PCNd"),C=i("BxcV");let V=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(t){return new(t||e)},imports:[[a.c,T.t,E.a,v.f,g.c,g.c,d.c,g.c,O.c,N.a,g.c,G.b,b.f,h.b,P.b,q.c,y.b,m.b,w.b,H.a,C.a,x.k.forChild(X)]]}),e})()}}]);