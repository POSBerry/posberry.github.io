!function(){function e(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function a(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{WDA5:function(t,n,o){"use strict";o.r(n),o.d(n,"TicketSettingsModule",function(){return B});var i,s,c=o("SVse"),r=o("3sEA"),d=o("O/+5"),l=o("8Y7J"),b=o("zHaW"),p=o("PDjf"),m=o("Dxy4"),u=o("Tj54"),g=o("s7LF"),h=o("Q2Ze"),f=o("e6WT"),v=o("iELJ"),E=o("TSSN"),y=[{path:"",component:(i=function(){function t(a,n,o){e(this,t),this.servicioTicket=a,this.loader=n,this.snack=o,this.encabezado1="",this.encabezado2="",this.pie="",this.pie2="",this.pie3="",this.mostrarEliminar=!1,this.formCancelar=function(){this.cargarlogo("canvaslogo",this.empresas.slogo),this.empresas.sencabezado1&&(this.encabezado1=this.empresas.sencabezado1),this.empresas.sencabezado2&&(this.encabezado2=this.empresas.sencabezado2),this.empresas.spie&&(this.pie=this.empresas.spie),this.empresas.spie2&&(this.pie2=this.empresas.spie2),this.empresas.spie3&&(this.pie3=this.empresas.spie3)}}var n,o,i;return n=t,(o=[{key:"ngOnInit",value:function(){var e=this;this.loader.open(),this.servicioTicket.obtenerEmpresas().subscribe(function(a){e.empresas=a[0],e.cargarlogo("canvaslogo",e.empresas.slogo),e.empresas.sencabezado1&&(e.encabezado1=e.empresas.sencabezado1),e.empresas.sencabezado2&&(e.encabezado2=e.empresas.sencabezado2),e.empresas.spie&&(e.pie=e.empresas.spie),e.empresas.spie2&&(e.pie2=e.empresas.spie2),e.empresas.spie3&&(e.pie3=e.empresas.spie3),e.loader.close()},function(a){e.loader.close(),e.snack.open("ERROR","OK",{duration:4e3})})}},{key:"formGuardar",value:function(){var e=this;this.loader.open(),this.servicioTicket.obtenerEmpresas().subscribe(function(a){e.empresas=a[0];var t=document.getElementById("canvaslogo"),n={};Object.assign(n,e.empresas),n.slogo=0!=t.width&&0!=t.height?t.toDataURL():null,n.sencabezado1=e.encabezado1,n.sencabezado2=e.encabezado2,n.spie=e.pie,n.spie2=e.pie2,n.spie3=e.pie3,e.servicioTicket.actualizarEmpresa(n).subscribe(function(a){e.loader.close(),e.snack.open("\xa1Configuraci\xf3n Guardada!","OK",{duration:4e3})},function(a){e.loader.close(),e.snack.open("ERROR","OK",{duration:4e3})})},function(a){e.loader.close(),e.snack.open("ERROR","OK",{duration:4e3})})}},{key:"formEliminar",value:function(){var e=document.getElementById("canvaslogo");e.width=0,e.height=0,this.mostrarEliminar=!1}},{key:"cargarlogo",value:function(e,a){this.mostrarEliminar=a;var t=document.getElementById(e),n=t.getContext("2d");if(t.width=0,t.height=0,a){var o=new Image;o.onload=function(){t.width=o.width,t.height=o.height,n.drawImage(o,0,0)},o.src=a}}},{key:"submitLogo",value:function(e,a,t){var n=document.getElementById(e),o=n.getContext("2d"),i=document.getElementById(a).files[0];if(null!=i){this.mostrarEliminar=!0;var s=new FileReader;s.onload=function(e){var a=new Image;a.onload=function(){n.width=a.width,n.height=a.height,o.drawImage(a,0,0);for(var e=o.getImageData(0,0,n.width,n.height),t=0;t<e.data.length;t+=4){var i=Math.round(.3*e.data[t]+.59*e.data[t+1]+.11*e.data[t+2])<127?0:255;e.data[t+3]<255&&(i=e.data[t+3]<127?255:0,e.data[t+3]=255),e.data[t]=i,e.data[t+1]=i,e.data[t+2]=i}o.putImageData(e,0,0,0,0,e.width,e.height)},a.src=e.target.result},s.readAsDataURL(i)}}}])&&a(n.prototype,o),i&&a(n,i),t}(),i.\u0275fac=function(e){return new(e||i)(l.Rb(d.a),l.Rb(r.a),l.Rb(b.a))},i.\u0275cmp=l.Lb({type:i,selectors:[["app-ticket-settings"]],decls:40,vars:11,consts:[["mat-button","","color","warn","type","button",3,"click"],["id","canvaslogo",1,"m-16"],[3,"submit"],["type","file","id","inputlogo","accept","image/x-png"],["mat-raised-button","","color","primary","type","submit"],[1,"full-width"],["matInput","","maxlength","50","placeholder","Encabezado 1",3,"ngModel","ngModelChange"],["matInput","","maxlength","50","placeholder","Encabezado 2",3,"ngModel","ngModelChange"],["matInput","","maxlength","50","placeholder","Pie 1",3,"ngModel","ngModelChange"],["matInput","","maxlength","50","placeholder","Pie 2",3,"ngModel","ngModelChange"],["matInput","","maxlength","50","placeholder","Pie 3",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,a){1&e&&(l.Xb(0,"mat-card"),l.Xb(1,"mat-card-content"),l.Xb(2,"p"),l.Oc(3,"Puede cambiar el logo, el encabezado y el pie de p\xe1gina de los tickets impresos."),l.Wb(),l.Xb(4,"p"),l.Oc(5,"Las im\xe1gen debe estar en "),l.Xb(6,"strong"),l.Oc(7,"formato PNG sin transparencia con fondo blanco, texto y/o logo negro"),l.Wb(),l.Oc(8," (Resoluci\xf3n recomendada 500 pixeles de ancho por 130 pixeles de alto). Si tiene transparencia o si tiene color / escala de grises "),l.Xb(9,"strong"),l.Oc(10,"se convertir\xe1 a blanco y negro autom\xe1ticamente"),l.Wb(),l.Oc(11,". "),l.Wb(),l.Wb(),l.Xb(12,"mat-card-content"),l.Xb(13,"button",0),l.fc("click",function(){return a.formEliminar()}),l.Xb(14,"mat-icon"),l.Oc(15,"delete"),l.Wb(),l.Oc(16),l.kc(17,"translate"),l.Wb(),l.Sb(18,"br"),l.Sb(19,"canvas",1),l.Xb(20,"form",2),l.fc("submit",function(){return a.submitLogo("canvaslogo","inputlogo","logo")}),l.Sb(21,"input",3),l.Sb(22,"input",4),l.Wb(),l.Wb(),l.Xb(23,"mat-card-content"),l.Xb(24,"mat-form-field",5),l.Xb(25,"input",6),l.fc("ngModelChange",function(e){return a.encabezado1=e}),l.Wb(),l.Wb(),l.Xb(26,"mat-form-field",5),l.Xb(27,"input",7),l.fc("ngModelChange",function(e){return a.encabezado2=e}),l.Wb(),l.Wb(),l.Xb(28,"mat-form-field",5),l.Xb(29,"input",8),l.fc("ngModelChange",function(e){return a.pie=e}),l.Wb(),l.Wb(),l.Xb(30,"mat-form-field",5),l.Xb(31,"input",9),l.fc("ngModelChange",function(e){return a.pie2=e}),l.Wb(),l.Wb(),l.Xb(32,"mat-form-field",5),l.Xb(33,"input",10),l.fc("ngModelChange",function(e){return a.pie3=e}),l.Wb(),l.Wb(),l.Xb(34,"mat-dialog-content"),l.Xb(35,"button",11),l.fc("click",function(){return a.formGuardar()}),l.Xb(36,"mat-icon"),l.Oc(37,"save"),l.Wb(),l.Oc(38),l.kc(39,"translate"),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.Eb(16),l.Qc("",l.lc(17,7,"Eliminar Logo")," "),l.Eb(9),l.pc("ngModel",a.encabezado1),l.Eb(2),l.pc("ngModel",a.encabezado2),l.Eb(2),l.pc("ngModel",a.pie),l.Eb(2),l.pc("ngModel",a.pie2),l.Eb(2),l.pc("ngModel",a.pie3),l.Eb(5),l.Qc("",l.lc(39,9,"FAMILIESPOPUPCOMPONENT.SAVE")," "))},directives:[p.a,p.b,m.b,u.a,g.w,g.p,g.q,h.c,f.b,g.c,g.k,g.o,g.r,v.e],pipes:[E.c],styles:[""]}),i),data:{title:"TICKETS CONFIGURACION"}}],w=o("iInd"),z=o("u9T3"),k=o("pMoy"),W=o("f44v"),M=o("TN/R"),O=o("40+f"),I=o("SqCe"),X=o("rJgo"),C=o("BTe0"),R=o("zQhy"),T=o("ZTz/"),P=o("jMqV"),S=o("M9ds"),x=o("ZFy/"),L=o("w9WL"),j=o("aYsj"),N=o("PCNd"),D=o("hrfs"),A=o("pYyI"),B=((s=function a(){e(this,a)}).\u0275mod=l.Pb({type:s}),s.\u0275inj=l.Ob({factory:function(e){return new(e||s)},imports:[[c.c,g.t,z.a,L.f,f.c,f.c,p.c,f.c,m.c,W.a,f.c,x.b,v.f,b.b,P.b,S.c,T.b,u.b,E.b,N.a,M.g,g.j,I.b,X.c,O.b,k.b,R.c,C.b,D.a,A.a,j.a,w.k.forChild(y)]]}),s)}}])}();