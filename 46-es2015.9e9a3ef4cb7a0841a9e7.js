(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{GmJt:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var o=a("GS7A");const i=Object(o.g)([Object(o.l)({opacity:"{{opacity}}",transform:"scale({{scale}}) translate3d({{x}}, {{y}}, {{z}})"}),Object(o.e)("{{duration}} {{delay}} cubic-bezier(0.0, 0.0, 0.2, 1)",Object(o.l)("*"))],{params:{duration:"200ms",delay:"0ms",opacity:"0",scale:"1",x:"0",y:"0",z:"0"}}),r=[Object(o.n)("animate",[Object(o.m)("void => *",[Object(o.o)(i)])]),Object(o.n)("fadeInOut",[Object(o.k)("0",Object(o.l)({opacity:0,display:"none"})),Object(o.k)("1",Object(o.l)({opacity:1,display:"block"})),Object(o.m)("0 => 1",Object(o.e)("300ms")),Object(o.m)("1 => 0",Object(o.e)("300ms"))])]},HkQJ:function(e,t,a){"use strict";a.r(t),a.d(t,"PointOfSaleSettingsModule",function(){return ae});var o=a("SVse"),i=a("iInd"),r=a("u9T3"),c=a("s7LF"),n=a("Dxy4"),s=a("PDjf"),l=a("f44v"),b=a("iELJ"),d=a("Tj54"),p=a("e6WT"),u=a("ZTz/"),m=a("jMqV"),f=a("zHaW"),h=a("M9ds"),O=a("ZFy/"),E=a("TSSN"),P=a("w9WL"),v=a("PCNd"),T=a("GmJt"),g=a("3kSh"),S=a("3sEA"),I=a("vpPe"),F=a("cp0P"),N=a("Ap+n"),W=a("8Y7J"),C=a("VDRc"),X=a("Q2Ze"),A=a("pMoy"),k=a("UhP/");function U(e,t){if(1&e&&(W.Xb(0,"mat-option",23),W.Oc(1),W.Wb()),2&e){const e=t.$implicit;W.pc("value",e.idsucursal),W.Eb(1),W.Qc(" ",e.sdescripcion," ")}}function L(e,t){if(1&e&&(W.Xb(0,"mat-option",23),W.Oc(1),W.Wb()),2&e){const e=t.$implicit;W.pc("value",e.indice),W.Eb(1),W.Qc(" ",e.value," ")}}function R(e,t){if(1&e&&(W.Xb(0,"mat-option",23),W.Oc(1),W.Wb()),2&e){const e=t.$implicit;W.pc("value",e.scodcliente),W.Eb(1),W.Qc(" ",e.srazonsocial," ")}}function y(e,t){if(1&e&&(W.Xb(0,"mat-tab",1),W.kc(1,"translate"),W.Xb(2,"form",2),W.Xb(3,"mat-dialog-content",3),W.Xb(4,"div",10),W.Xb(5,"mat-form-field",7),W.Xb(6,"mat-label"),W.Oc(7),W.kc(8,"translate"),W.Wb(),W.Xb(9,"mat-select",24),W.Mc(10,R,2,2,"mat-option",9),W.Wb(),W.Wb(),W.Wb(),W.Xb(11,"div",15),W.Xb(12,"mat-checkbox",16),W.Oc(13),W.kc(14,"translate"),W.Wb(),W.Wb(),W.Xb(15,"div",15),W.Xb(16,"mat-checkbox",16),W.Oc(17),W.kc(18,"translate"),W.Wb(),W.Wb(),W.Xb(19,"div",15),W.Xb(20,"mat-checkbox",16),W.Oc(21),W.kc(22,"translate"),W.Wb(),W.Wb(),W.Xb(23,"div",15),W.Xb(24,"mat-checkbox",16),W.Oc(25),W.kc(26,"translate"),W.Wb(),W.Wb(),W.Xb(27,"div",15),W.Xb(28,"mat-checkbox",16),W.Oc(29),W.kc(30,"translate"),W.Wb(),W.Wb(),W.Wb(),W.Wb(),W.Wb()),2&e){const e=W.jc();W.qc("label",W.lc(1,15,"POINTOFSALESETTINGSPOPUP.PARAMETERS")),W.Eb(2),W.pc("formGroup",e.itemForm2),W.Eb(5),W.Pc(W.lc(8,17,"POINTOFSALESETTINGSPOPUP.DEFAULTCLIENT")),W.Eb(2),W.pc("formControl",e.itemForm2.controls.idclientegenerico),W.Eb(1),W.pc("ngForOf",e.listaDeClientes),W.Eb(2),W.pc("formControl",e.itemForm2.controls.bagruparproductosidenticos),W.Eb(1),W.Qc("",W.lc(14,19,"POINTOFSALESETTINGSPOPUP.GROUPIDENTICALPRODUCTS")," "),W.Eb(3),W.pc("formControl",e.itemForm2.controls.bforzarloginalcerrarcaja),W.Eb(1),W.Qc("",W.lc(18,21,"POINTOFSALESETTINGSPOPUP.FORCELOGINWHENCLOSINGBOX")," "),W.Eb(3),W.pc("formControl",e.itemForm2.controls.bpuedeeditarpreciounitario),W.Eb(1),W.Qc("",W.lc(22,23,"POINTOFSALESETTINGSPOPUP.CANEDITUNITPRICE")," "),W.Eb(3),W.pc("formControl",e.itemForm2.controls.bpuedeeditarcantidad),W.Eb(1),W.Qc("",W.lc(26,25,"POINTOFSALESETTINGSPOPUP.CANEDITQUANTITIES")," "),W.Eb(3),W.pc("formControl",e.itemForm2.controls.bpermitecantidadesnegativas),W.Eb(1),W.Qc("",W.lc(30,27,"POINTOFSALESETTINGSPOPUP.ALLOWNEGATIVEAMOUNTS")," ")}}function D(e,t){if(1&e){const e=W.Yb();W.Xb(0,"mat-tab",1),W.kc(1,"translate"),W.Xb(2,"form",2),W.Xb(3,"mat-dialog-content",3),W.Xb(4,"div",10),W.Xb(5,"mat-form-field",5),W.Sb(6,"input",25),W.kc(7,"translate"),W.Wb(),W.Wb(),W.Xb(8,"div"),W.Xb(9,"label"),W.Oc(10),W.kc(11,"translate"),W.Wb(),W.Xb(12,"div"),W.Xb(13,"input",26),W.fc("change",function(t){return W.Dc(e),W.jc().leerArchivoKey(t)}),W.Wb(),W.Xb(14,"pre",27),W.fc("ngModelChange",function(t){return W.Dc(e),W.jc().itemForm.controls.safipkey.value=t}),W.Oc(15),W.Wb(),W.Wb(),W.Wb(),W.Xb(16,"div"),W.Xb(17,"label"),W.Oc(18),W.kc(19,"translate"),W.Wb(),W.Xb(20,"div",28),W.Xb(21,"input",29),W.fc("change",function(t){return W.Dc(e),W.jc().leerArchivoCrt(t)}),W.Wb(),W.Xb(22,"pre",30),W.fc("ngModelChange",function(t){return W.Dc(e),W.jc().itemForm.controls.safipcrt.value=t}),W.Oc(23),W.Wb(),W.Wb(),W.Wb(),W.Wb(),W.Wb(),W.Wb()}if(2&e){const e=W.jc();W.qc("label",W.lc(1,10,"POINTOFSALESETTINGSPOPUP.ELECTRONICBILL")),W.Eb(2),W.pc("formGroup",e.itemForm),W.Eb(4),W.qc("placeholder",W.lc(7,12,"POINTOFSALESETTINGSPOPUP.POSCAEANUMBER")),W.pc("formControl",e.itemForm.controls.idpvcaea),W.Eb(4),W.Qc("",W.lc(11,14,"POINTOFSALESETTINGSPOPUP.ELECTRONICINVOICE-FILE.KEY"),":"),W.Eb(4),W.pc("ngModel",e.itemForm.controls.safipkey.value),W.Eb(1),W.Pc(e.itemForm.controls.safipkey.value),W.Eb(3),W.Qc("",W.lc(19,16,"POINTOFSALESETTINGSPOPUP.ELECTRONICINVOICE-FILE.CRT"),":"),W.Eb(4),W.pc("ngModel",e.itemForm.controls.safipcrt.value),W.Eb(1),W.Pc(e.itemForm.controls.safipcrt.value)}}let w=(()=>{class e{constructor(e,t,a){this.data=e,this.dialogRef=t,this.fb=a,this.tipoFacturacion=[{value:"Sin Impresion",indice:0},{value:"Serial",indice:1},{value:"Fiscal",indice:2},{value:"Factura Electr\xf3nica",indice:3}],this.listaDeSucursales=[],this.listaDeClientes=[]}ngOnInit(){this.listaDeSucursales=this.data.sucursales,this.listaDeClientes=this.data.clientes,this.buildItemForm(this.data.payload,this.data.parametros)}buildItemForm(e,t){this.itemForm=this.fb.group({id:[e.id||""],idsucursal:[e.idsucursal||this.listaDeSucursales[0].idsucursal,c.v.required],idpv:[e.idpv||"",c.v.required],idpvcaea:[e.idpvcaea||""],sdescripcion:[e.sdescripcion||"Punto de Venta",c.v.required],sdomicilio:[e.sdomicilio||"Domicilio"],slocalidad:[e.slocalidad||""],sprovincia:[e.sprovincia||""],spais:[e.spais||""],sweathercode:[e.sweathercode||""],bactivo:[!e.hasOwnProperty("bactivo")||"T"==e.bactivo],soperadorcreacion:[e.soperadorcreacion||""],fcreacion:[e.fcreacion||null],soperadormodificacion:[e.soperadormodificacion||""],fmodificacion:[e.fmodificacion||null],insertedon:[e.insertedon||null],updatedon:[e.updatedon||null],deletedon:[e.deletedon||null],itipo:[e.itipo||0,c.v.required],busarpantallaalcliente:[!e.hasOwnProperty("busarpantallaalcliente")||"T"==e.busarpantallaalcliente],busarverificadordeprecios:[!e.hasOwnProperty("busarverificadordeprecios")||"T"==e.busarverificadordeprecios],busarventaypreventaremota:[!e.hasOwnProperty("busarventaypreventaremota")||"T"==e.busarventaypreventaremota],rtopedescuento:[e.rtopedescuento||0,c.v.required],rlatitud:[e.rlatitud||0],rlongitud:[e.rlongitud||0],safipcrt:[e.safipcrt||""],safipkey:[e.safipkey||""],bfeenproduccion:[!e.hasOwnProperty("bfeenproduccion")||"T"==e.bfeenproduccion],hardid:[e.hardid||null],soperadoractivacion:[e.soperadoractivacion||null],factivacion:[e.factivacion||null],snumerodeserie:[e.snumerodeserie||null],rporcotrosimpuestos:[e.rporcotrosimpuestos||0]}),e.id&&(this.itemForm2=this.fb.group({id:[t.id||""],idpv:[t.idpv],smarcafiscal:[t.smarcafiscal],smodelofiscal:[t.smodelofiscal],bagruparproductosidenticos:[1==t.bagruparproductosidenticos],bpuedeeditarpreciounitario:[1==t.bpuedeeditarpreciounitario],bpuedeeditarcantidad:[1==t.bpuedeeditarcantidad],bpermitecantidadesnegativas:[1==t.bpermitecantidadesnegativas],idclientegenerico:[t.idclientegenerico.toString()],sformatofecha:[t.sformatofecha],sversion:[t.sversion],isegundosentresincro:[t.isegundosentresincro],fultimocalculodestock:[t.fultimocalculodestock],bforzarloginalcerrarcaja:[!t.hasOwnProperty("bforzarloginalcerrarcaja")||"T"==t.bforzarloginalcerrarcaja],soperadorcreacion:[t.soperadorcreacion],fcreacion:[t.fcreacion],soperadormodificacion:[t.soperadormodificacion],fmodificacion:[t.fmodificacion],insertedon:[t.insertedon],updatedon:[t.updatedon],deletedon:[t.deletedon]}))}leerArchivoKey(e){var t=e.target.files[0];if(t){var a=new FileReader;a.onload=e=>{var t=e.target.result;this.itemForm.get("safipkey").setValue(t)},a.readAsText(t)}}leerArchivoCrt(e){var t=e.target.files[0];if(t){var a=new FileReader;a.onload=e=>{var t=e.target.result;this.itemForm.get("safipcrt").setValue(t)},a.readAsText(t)}}submit(){this.dialogRef.close(this.itemForm.value.id?[this.itemForm.value,this.itemForm2.value]:[this.itemForm.value,null])}}return e.\u0275fac=function(t){return new(t||e)(W.Rb(b.a),W.Rb(b.g),W.Rb(c.d))},e.\u0275cmp=W.Lb({type:e,selectors:[["app-point-of-sale-settings-popup"]],decls:68,vars:58,consts:[["matDialogTitle",""],[3,"label"],[3,"formGroup"],["mat-dialog-content","","fxLayout","row wrap","fxLayout.lt-sm","column",2,"max-width","100%","margin","0px","padding-top","10px"],["fxFlex","50",1,"pr-16",3,"hidden"],[1,"full-width"],["matInput","","name","idpv",3,"formControl","placeholder"],["appearance","fill"],["name","idsucursal",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","50",1,"pr-16"],["matInput","","name","sdescripcion",3,"formControl","placeholder"],["name","itipo",3,"formControl"],["matInput","","name","rtopedescuento",3,"formControl","placeholder"],["name","bactivo",3,"formControl"],["fxFlex","50",1,"mb-16"],[3,"formControl"],["fxFlex","100"],[3,"label",4,"ngIf"],["fxFlex","100",1,"mt-16"],["mat-raised-button","","color","primary",3,"disabled","click"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],[3,"value"],["name","idclientegenerico",3,"formControl"],["matInput","","name","idpvcaea",3,"formControl","placeholder"],["type","file","id","file-input-key","accept",".key",3,"change"],["id","contenido-archivo-key",3,"ngModel","ngModelChange"],[1,"col-sm-10"],["type","file","id","file-input-crt","accept",".crt",3,"change"],["id","contenido-archivo-crt",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(W.Xb(0,"h1",0),W.Oc(1),W.Wb(),W.Xb(2,"mat-tab-group"),W.Xb(3,"mat-tab",1),W.kc(4,"translate"),W.Xb(5,"form",2),W.Xb(6,"mat-dialog-content",3),W.Xb(7,"div",4),W.Xb(8,"mat-form-field",5),W.Sb(9,"input",6),W.kc(10,"translate"),W.Wb(),W.Wb(),W.Xb(11,"div",4),W.Xb(12,"mat-form-field",7),W.Xb(13,"mat-label"),W.Oc(14),W.kc(15,"translate"),W.Wb(),W.Xb(16,"mat-select",8),W.Mc(17,U,2,2,"mat-option",9),W.Wb(),W.Wb(),W.Wb(),W.Xb(18,"div",10),W.Xb(19,"mat-form-field",5),W.Sb(20,"input",11),W.kc(21,"translate"),W.Wb(),W.Wb(),W.Xb(22,"div",10),W.Xb(23,"mat-form-field",7),W.Xb(24,"mat-label"),W.Oc(25),W.kc(26,"translate"),W.Wb(),W.Xb(27,"mat-select",12),W.Mc(28,L,2,2,"mat-option",9),W.Wb(),W.Wb(),W.Wb(),W.Xb(29,"div",10),W.Xb(30,"mat-form-field",5),W.Sb(31,"input",13),W.kc(32,"translate"),W.Wb(),W.Wb(),W.Xb(33,"div",10),W.Xb(34,"mat-slide-toggle",14),W.Oc(35),W.kc(36,"translate"),W.Wb(),W.Wb(),W.Xb(37,"div",15),W.Xb(38,"mat-checkbox",16),W.Oc(39),W.kc(40,"translate"),W.Wb(),W.Wb(),W.Xb(41,"div",15),W.Xb(42,"mat-checkbox",16),W.Oc(43),W.kc(44,"translate"),W.Wb(),W.Wb(),W.Xb(45,"div",15),W.Xb(46,"mat-checkbox",16),W.Oc(47),W.kc(48,"translate"),W.Wb(),W.Wb(),W.Xb(49,"div",17),W.Xb(50,"i"),W.Oc(51),W.kc(52,"translate"),W.Wb(),W.Wb(),W.Wb(),W.Wb(),W.Wb(),W.Mc(53,y,31,29,"mat-tab",18),W.Mc(54,D,24,18,"mat-tab",18),W.Wb(),W.Xb(55,"mat-dialog-content",3),W.Xb(56,"div",19),W.Xb(57,"button",20),W.fc("click",function(){return t.submit()}),W.Xb(58,"mat-icon"),W.Oc(59,"save"),W.Wb(),W.Oc(60),W.kc(61,"translate"),W.Wb(),W.Sb(62,"span",21),W.Xb(63,"button",22),W.fc("click",function(){return t.dialogRef.close(!1)}),W.Xb(64,"mat-icon"),W.Oc(65,"cancel"),W.Wb(),W.Oc(66),W.kc(67,"translate"),W.Wb(),W.Wb(),W.Wb()),2&e&&(W.Eb(1),W.Rc("",t.data.title," ",t.data.payload.idpv,""),W.Eb(2),W.qc("label",W.lc(4,32,"POINTOFSALESETTINGSPOPUP.DETAILS")),W.Eb(2),W.pc("formGroup",t.itemForm),W.Eb(2),W.pc("hidden",t.itemForm.value.id),W.Eb(2),W.rc("placeholder","*",W.lc(10,34,"POINTOFSALESETTINGSPOPUP.NUMBEROFPV"),""),W.pc("formControl",t.itemForm.controls.idpv),W.Eb(2),W.pc("hidden",t.itemForm.value.id),W.Eb(3),W.Qc("*",W.lc(15,36,"POINTOFSALESETTINGSPOPUP.BRANCHOFFICE"),""),W.Eb(2),W.pc("formControl",t.itemForm.controls.idsucursal),W.Eb(1),W.pc("ngForOf",t.listaDeSucursales),W.Eb(3),W.rc("placeholder","*",W.lc(21,38,"POINTOFSALESETTINGSPOPUP.DESCRIPTION"),""),W.pc("formControl",t.itemForm.controls.sdescripcion),W.Eb(5),W.Qc("*",W.lc(26,40,"POINTOFSALESETTINGSPOPUP.BILLINGTYPE"),""),W.Eb(2),W.pc("formControl",t.itemForm.controls.itipo),W.Eb(1),W.pc("ngForOf",t.tipoFacturacion),W.Eb(3),W.rc("placeholder","*",W.lc(32,42,"POINTOFSALESETTINGSPOPUP.DISCOUNTCAP"),""),W.pc("formControl",t.itemForm.controls.rtopedescuento),W.Eb(3),W.pc("formControl",t.itemForm.controls.bactivo),W.Eb(1),W.Qc(" ",W.lc(36,44,"POINTOFSALESETTINGSPOPUP.ACTIVE"),""),W.Eb(3),W.pc("formControl",t.itemForm.controls.busarpantallaalcliente),W.Eb(1),W.Qc("",W.lc(40,46,"POINTOFSALESETTINGSPOPUP.USECUSTOMERSCREEN")," "),W.Eb(3),W.pc("formControl",t.itemForm.controls.busarventaypreventaremota),W.Eb(1),W.Qc("",W.lc(44,48,"POINTOFSALESETTINGSPOPUP.USEREMOTESALEANDPRESALE")," "),W.Eb(3),W.pc("formControl",t.itemForm.controls.busarverificadordeprecios),W.Eb(1),W.Qc("",W.lc(48,50,"POINTOFSALESETTINGSPOPUP.USEPRICECHECKER")," "),W.Eb(4),W.Qc("* ",W.lc(52,52,"POINTOFSALESETTINGSPOPUP.PARRAF1"),"."),W.Eb(2),W.pc("ngIf",t.itemForm.value.id),W.Eb(1),W.pc("ngIf",3==t.itemForm.controls.itipo.value),W.Eb(3),W.pc("disabled",t.itemForm.invalid),W.Eb(3),W.Qc("",W.lc(61,54,"POINTOFSALESETTINGSPOPUP.SAVE")," "),W.Eb(6),W.Qc("",W.lc(67,56,"POINTOFSALESETTINGSPOPUP.CANCEL")," "))},directives:[b.h,h.b,h.a,c.w,c.p,c.i,b.e,C.c,C.a,X.c,p.b,c.c,c.o,c.f,X.f,u.a,o.n,m.a,A.a,o.o,n.b,d.a,k.n,c.r],pipes:[E.c],styles:[""],data:{animation:[T.a]}}),e})();var x=a("AytR"),G=a("IheW");let j=(()=>{class e{constructor(e){this.http=e}obtenerDatos(e,t,a,o){return this.http.get(encodeURI(`${x.a.apiURL}PuntosVenta?filter={"where":${e},"limit":${t},"skip":${a},"order":"${o}"}`))}obtenerCount(e){return this.http.get(encodeURI(`${x.a.apiURL}PuntosVenta/count?where=${e}`))}actualizarPuntoDeVenta(e){return this.http.put(`${x.a.apiURL}PuntosVenta/${e.id}`,e)}actualizarParametros(e){return this.http.put(`${x.a.apiURL}Parametros/${e.id}`,e)}agregarPuntoDeVenta(e){return this.http.post(x.a.apiURL+"PuntosVenta",e)}obtenerSucursales(){return this.http.get(encodeURI(x.a.apiURL+"Sucursales?"))}obtenerParametros(){return this.http.get(encodeURI(x.a.apiURL+"Parametros?"))}obtenerClientes(){return this.http.get(encodeURI(x.a.apiURL+'Clientes?filter={"where":{"deletedon":{"eq":null}},"order":"srazonsocial ASC"}'))}}return e.\u0275fac=function(t){return new(t||e)(W.bc(G.c))},e.\u0275prov=W.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function V(e,t){if(1&e){const e=W.Yb();W.Xb(0,"button",12),W.fc("click",function(t){W.Dc(e);const a=W.jc(),o=W.Ac(10);return a.updateFilter(t)&&(o.value="")}),W.Xb(1,"mat-icon"),W.Oc(2,"close"),W.Wb(),W.Wb()}}function M(e,t){if(1&e&&W.Oc(0),2&e){const e=t.row;W.Qc(" ",null==e?null:e.sdescripcion," ")}}function Q(e,t){if(1&e){const e=W.Yb();W.Xb(0,"button",13),W.fc("click",function(){W.Dc(e);const a=t.row;return W.jc().openPopUp(a)}),W.Xb(1,"mat-icon"),W.Oc(2,"edit"),W.Wb(),W.Wb(),W.Xb(3,"button",13),W.fc("click",function(){W.Dc(e);const a=t.row;return W.jc().openUserInfoPopUp(a)}),W.Xb(4,"mat-icon"),W.Oc(5,"person_pin"),W.Wb(),W.Wb()}}const z=function(){return{y:"50px",delay:"300ms"}},q=function(e){return{value:"*",params:e}},$=[{path:"",component:(()=>{class e{constructor(e,t,a,o,i,r){this.servicioPuntoDeVenta=e,this.dialog=t,this.snack=a,this.confirmService=o,this.loader=i,this.servicioUUID=r,this.timeOutDuration=800,this.rows=[],this.order="sdescripcion ASC",this.search="",this.page={count:0,offset:0,limit:10}}ngOnInit(){this.prepararFiltro(),this.refresh(),this.servicioPuntoDeVenta.obtenerSucursales().subscribe(e=>{this.sucursales=e}),this.servicioPuntoDeVenta.obtenerClientes().subscribe(e=>{this.clientes=e})}prepararFiltro(){if(this.search){this.filter='{"and":[';var e=this.search.split(" ");e.length>0&&(e.forEach((e,t)=>{e.length>1&&(this.filter+=`{"or":[{"sdescripcion":{"ilike":"%${e}%"}}]}`,t<this.search.length-1&&(this.filter+=","))}),this.filter+='{"deletedon":{"eq":null}}]}')}else this.filter='{"deletedon":{"eq":null}}'}refresh(){this.prepararFiltro(),Object(F.a)([this.servicioPuntoDeVenta.obtenerCount(this.filter),this.servicioPuntoDeVenta.obtenerDatos(this.filter,this.page.limit,this.page.offset*this.page.limit,this.order),this.servicioPuntoDeVenta.obtenerParametros()]).subscribe(e=>{this.page.count=e[0].count,this.rows=e[1],this.parametros=e[2]},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}pageCallback(e){this.page.offset=e.offset,this.refresh()}updateFilter(e){return this.search=e instanceof MouseEvent?"":e.target.value,clearTimeout(this.timeOut),this.timeOut=setTimeout(()=>{this.refresh()},this.timeOutDuration),!0}onSort(e){const t=e.sorts[0];this.order=`${t.prop} ${t.dir.toUpperCase()}`,this.refresh()}openPopUp(e={},t){this.dialog.open(w,{width:"720px",disableClose:!0,data:{title:t?"AGREGAR PUNTO DE VENTA":"ACTUALIZAR PUNTO DE VENTA",payload:e,sucursales:this.sucursales,parametros:this.parametros.find(t=>t.idpv==e.idpv),clientes:this.clientes}}).afterClosed().subscribe(e=>{if(e){this.loader.open();var a={};if(Object.assign(a,e[0]),a.bactivo=e[0].bactivo?"T":"F",a.busarpantallaalcliente=e[0].busarpantallaalcliente?"T":"F",a.busarverificadordeprecios=e[0].busarverificadordeprecios?"T":"F",a.busarventaypreventaremota=e[0].busarventaypreventaremota?"T":"F",a.bfeenproduccion=e[0].bfeenproduccion?"T":"F",t)a.id=this.servicioUUID.generateUUID(),this.servicioPuntoDeVenta.agregarPuntoDeVenta(a).subscribe(e=>{this.refresh(),this.loader.close(),this.snack.open("\xa1Punto de Venta Agregado!","OK",{duration:4e3})},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})});else{var o={};Object.assign(o,e[1]),o.bagruparproductosidenticos=e[1].bagruparproductosidenticos?1:0,o.bpuedeeditarpreciounitario=e[1].bpuedeeditarpreciounitario?1:0,o.bpuedeeditarcantidad=e[1].bpuedeeditarcantidad?1:0,o.bpermitecantidadesnegativas=e[1].bpermitecantidadesnegativas?1:0,o.bforzarloginalcerrarcaja=e[1].bforzarloginalcerrarcaja?"T":"F",Object(F.a)([this.servicioPuntoDeVenta.actualizarPuntoDeVenta(a),this.servicioPuntoDeVenta.actualizarParametros(o)]).subscribe(e=>{this.refresh(),this.loader.close(),this.snack.open("\xa1Punto de Venta Actualizado!","OK",{duration:4e3})},e=>{this.loader.close(),this.snack.open("ERROR","OK",{duration:4e3})})}}})}openUserInfoPopUp(e={}){this.dialog.open(N.a,{width:"720px",disableClose:!0,data:{title:"INFORMACION DE MODIFICACION",payload:e}})}}return e.\u0275fac=function(t){return new(t||e)(W.Rb(j),W.Rb(b.b),W.Rb(f.a),W.Rb(g.a),W.Rb(S.a),W.Rb(I.a))},e.\u0275cmp=W.Lb({type:e,selectors:[["app-point-of-sale-settings"]],decls:22,vars:30,consts:[[1,"m-333"],["mat-raised-button","","color","primary",1,"mb-8",3,"click"],[1,"margin-333",2,"width","100%"],["matPrefix",""],["matInput","","value","",3,"placeholder","keyup"],["searchinput",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","rowHeight","count","offset","limit","externalPaging","selectionType","page","sort"],["prop","sdescripcion",3,"name","flexGrow"],["ngx-datatable-cell-template",""],[3,"name","flexGrow"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-icon-button","","mat-sm-button","","color","foreground",1,"mr-16",3,"click"]],template:function(e,t){if(1&e&&(W.Xb(0,"div",0),W.Xb(1,"button",1),W.fc("click",function(){return t.openPopUp({},!0)}),W.Xb(2,"mat-icon"),W.Oc(3,"library_add"),W.Wb(),W.Oc(4),W.kc(5,"translate"),W.Wb(),W.Wb(),W.Xb(6,"mat-form-field",2),W.Xb(7,"mat-icon",3),W.Oc(8,"search"),W.Wb(),W.Xb(9,"input",4,5),W.fc("keyup",function(e){return t.updateFilter(e)}),W.kc(11,"translate"),W.Wb(),W.Mc(12,V,3,0,"button",6),W.Wb(),W.Xb(13,"mat-card",7),W.Xb(14,"mat-card-content",7),W.Xb(15,"ngx-datatable",8),W.fc("page",function(e){return t.pageCallback(e)})("sort",function(e){return t.onSort(e)}),W.Xb(16,"ngx-datatable-column",9),W.kc(17,"translate"),W.Mc(18,M,1,1,"ng-template",10),W.Wb(),W.Xb(19,"ngx-datatable-column",11),W.kc(20,"translate"),W.Mc(21,Q,6,0,"ng-template",10),W.Wb(),W.Wb(),W.Wb(),W.Wb()),2&e){const e=W.Ac(10);W.Eb(4),W.Qc("",W.lc(5,19,"POINTOFSALESETTINGS.ADDPOINTOFSALE")," "),W.Eb(5),W.qc("placeholder",W.lc(11,21,"POINTOFSALESETTINGS.FILTER")),W.Eb(3),W.pc("ngIf",e.value),W.Eb(1),W.pc("@animate",W.vc(28,q,W.uc(27,z))),W.Eb(2),W.pc("rows",t.rows)("columnMode","flex")("headerHeight",50)("footerHeight",50)("scrollbarH",!1)("rowHeight",50)("count",t.page.count)("offset",t.page.offset)("limit",t.page.limit)("externalPaging",!0)("selectionType","single"),W.Eb(1),W.qc("name",W.lc(17,23,"POINTOFSALESETTINGS.POINTOFSALE")),W.pc("flexGrow",1),W.Eb(3),W.qc("name",W.lc(20,25,"POINTOFSALESETTINGS.ACTIONS")),W.pc("flexGrow",1)}},directives:[n.b,d.a,X.c,X.g,p.b,o.o,s.a,s.b,P.d,P.b,P.a,X.h],pipes:[E.c],styles:[""],data:{animation:[T.a]}}),e})(),data:{title:"PUNTO DE VENTA"}}];var H=a("TN/R"),K=a("40+f"),J=a("SqCe"),Y=a("rJgo"),B=a("BTe0"),Z=a("zQhy"),_=a("aYsj"),ee=a("hrfs"),te=a("pYyI");let ae=(()=>{class e{}return e.\u0275mod=W.Pb({type:e}),e.\u0275inj=W.Ob({factory:function(t){return new(t||e)},imports:[[o.c,c.t,r.a,P.f,p.c,p.c,s.c,p.c,n.c,l.a,p.c,O.b,b.f,f.b,m.b,h.c,u.b,d.b,E.b,v.a,H.g,c.j,J.b,Y.c,K.b,A.b,Z.c,B.b,ee.a,te.a,_.a,i.k.forChild($)]]}),e})()}}]);